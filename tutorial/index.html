<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tutorial &mdash; FLAME GPU 2 0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../_static/collapsible-lists/css/tree_view.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/flamegpu.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/tabs.js"></script>
        <script src="../_static/collapsible-lists/js/CollapsibleLists.compressed.js"></script>
        <script src="../_static/collapsible-lists/js/apply-collapsible-lists.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Quickstart" href="../quickstart/index.html" />
    <link rel="prev" title="Welcome to FLAME GPU 2’s documentation!" href="../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #4d4d4d" >
            <a href="../index.html" class="icon icon-home"> FLAME GPU 2
            <img src="../_static/flamegpu2-icon-notext-128.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#flame-gpu-design-philosophy">FLAME GPU Design Philosophy</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-a-project">Creating a Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="#structure-of-a-flame-gpu-2-program">Structure of a FLAME GPU 2 Program</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#agent-host-function-definitions">Agent/Host Function Definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#model-declaration">Model Declaration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#initialisation">Initialisation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#execution">Execution</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#tutorial-creating-the-circles-model">Tutorial: Creating the Circles Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introducing-the-circles-model">Introducing The Circles Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuring-cmake">Configuring CMake</a></li>
<li class="toctree-l3"><a class="reference internal" href="#opening-the-project">Opening the Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="#model-description">Model Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="#message-description">Message Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="#agent-description">Agent Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="#environment-description">Environment Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="#agent-function-description-implementation">Agent Function Description &amp; Implementation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#execution-order">Execution Order</a></li>
<li class="toctree-l3"><a class="reference internal" href="#initialisation-function">Initialisation Function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuring-the-simulation">Configuring the Simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuring-logging-optional">Configuring Logging (Optional)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#visualisation-config-optional">Visualisation Config (Optional)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-simulation">Running the Simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#complete-tutorial-code">Complete Tutorial Code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/index.html">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/index.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/index.html#c">C++</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../quickstart/index.html#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quickstart/index.html#creating-a-new-project">Creating a New Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quickstart/index.html#compiling-your-project">Compiling Your Project</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../quickstart/index.html#cmake-gui-windows-only">CMake GUI (Windows Only)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../quickstart/index.html#running-your-project">Running Your Project</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/index.html#python-3">Python 3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../quickstart/index.html#q-python-installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quickstart/index.html#building-from-source">Building From Source</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quickstart/index.html#id3">Creating a New Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quickstart/index.html#id4">Running your project</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guide/index.html">User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../guide/1-creating-a-model/index.html">Creating a Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../guide/1-creating-a-model/index.html#what-is-a-model">What is a Model?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/1-creating-a-model/index.html#creating-a-modeldescription-object">Creating a ModelDescription Object</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guide/2-environment/index.html">Environmental Properties</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../guide/2-environment/index.html#accessing-the-environmentdescription-object">Accessing the EnvironmentDescription Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/2-environment/index.html#defining-properties">Defining Properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/2-environment/index.html#defining-macro-properties">Defining Macro Properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/2-environment/index.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guide/3-defining-agents/index.html">Defining Agents</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../guide/3-defining-agents/index.html#defining-a-new-agent-type">Defining a New Agent Type</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/3-defining-agents/index.html#agent-variables">Agent Variables</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/3-defining-agents/index.html#agent-id">Agent ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/3-defining-agents/index.html#user-defined-variables">User Defined Variables</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/3-defining-agents/index.html#id2">Agent States</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/3-defining-agents/index.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guide/4-defining-messages-communication/index.html">Defining Messages (Communication)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../guide/4-defining-messages-communication/index.html#communication-strategies">Communication Strategies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/4-defining-messages-communication/index.html#defining-a-new-message-type">Defining a New Message Type</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/4-defining-messages-communication/index.html#brute-force-specialisation">Brute Force Specialisation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/4-defining-messages-communication/index.html#bucket-specialisation">Bucket Specialisation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/4-defining-messages-communication/index.html#spatial-specialisation">Spatial Specialisation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/4-defining-messages-communication/index.html#array-specialisation">Array Specialisation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/4-defining-messages-communication/index.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guide/5-agent-functions/index.html">Agent Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../guide/5-agent-functions/1-defining-agent-functions.html">Defining Agent Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/5-agent-functions/1-defining-agent-functions.html#flame-gpu-device-functions">FLAME GPU Device Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/5-agent-functions/1-defining-agent-functions.html#flame-gpu-host-device-functions">FLAME GPU Host Device Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/5-agent-functions/1-defining-agent-functions.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/5-agent-functions/2-modifying-agent-variables.html">Accessing Agent Variables</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/5-agent-functions/2-modifying-agent-variables.html#reading-an-agent-s-id">Reading an Agent’s ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/5-agent-functions/2-modifying-agent-variables.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/5-agent-functions/3-interacting-with-environment.html">Accessing the Environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/5-agent-functions/3-interacting-with-environment.html#environment-properties">Environment Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/5-agent-functions/3-interacting-with-environment.html#environment-macro-properties">Environment Macro Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/5-agent-functions/3-interacting-with-environment.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/5-agent-functions/4-agent-communication.html">Agent Communication</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/5-agent-functions/4-agent-communication.html#id1">Sending Messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/5-agent-functions/4-agent-communication.html#reading-messages">Reading Messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/5-agent-functions/4-agent-communication.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/5-agent-functions/5-agent-birth-death.html">Agent Birth &amp; Death</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/5-agent-functions/5-agent-birth-death.html#agent-death">Agent Death</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/5-agent-functions/5-agent-birth-death.html#agent-birth">Agent Birth</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/5-agent-functions/5-agent-birth-death.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/5-agent-functions/6-random-numbers.html">Random Numbers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/5-agent-functions/6-random-numbers.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/5-agent-functions/7-conditional-behaviours.html">Agent Function Conditions (Conditional Behaviours)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/5-agent-functions/7-conditional-behaviours.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/5-agent-functions/8-miscellaneous.html">Miscellaneous Methods</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/5-agent-functions/8-miscellaneous.html#related-links">Related Links</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guide/6-host-functions/index.html">Host Functions &amp; Conditions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../guide/6-host-functions/1-defining-host-functions.html">Defining Host Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/6-host-functions/1-defining-host-functions.html#types-of-host-function">Types of Host Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/6-host-functions/1-defining-host-functions.html#adding-host-functions-to-a-model">Adding Host Functions to a Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/6-host-functions/1-defining-host-functions.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/6-host-functions/2-interacting-with-environment.html">Accessing the Environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/6-host-functions/2-interacting-with-environment.html#environment-properties">Environment Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/6-host-functions/2-interacting-with-environment.html#environment-macro-properties">Environment Macro Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/6-host-functions/2-interacting-with-environment.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/6-host-functions/3-agent-operations.html">Agent Operations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/6-host-functions/3-agent-operations.html#variable-reductions">Variable Reductions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/6-host-functions/3-agent-operations.html#sorting-agents">Sorting Agents</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/6-host-functions/3-agent-operations.html#agent-creation">Agent Creation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/6-host-functions/3-agent-operations.html#id1">Direct Agent Access</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/6-host-functions/3-agent-operations.html#miscellaneous-methods">Miscellaneous Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/6-host-functions/3-agent-operations.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/6-host-functions/4-random-numbers.html">Random Numbers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/6-host-functions/4-random-numbers.html#seeding-the-random-state">Seeding the Random State</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/6-host-functions/4-random-numbers.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/6-host-functions/5-miscellaneous.html">Miscellaneous Methods</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/6-host-functions/5-miscellaneous.html#related-links">Related Links</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guide/7-defining-execution-order/index.html">Defining Execution Order</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../guide/7-defining-execution-order/1-dependency-graph.html">Dependency Graph</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/7-defining-execution-order/1-dependency-graph.html#specifying-dependencies">Specifying Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/7-defining-execution-order/1-dependency-graph.html#accessing-the-dependencygraph">Accessing the DependencyGraph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/7-defining-execution-order/1-dependency-graph.html#specifying-roots">Specifying Roots</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/7-defining-execution-order/1-dependency-graph.html#generating-layers">Generating Layers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/7-defining-execution-order/1-dependency-graph.html#visualising-the-dependencies">Visualising the Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/7-defining-execution-order/1-dependency-graph.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/7-defining-execution-order/2-layers.html">Layers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/7-defining-execution-order/2-layers.html#manual-layer-specification">Manual Layer Specification</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/7-defining-execution-order/2-layers.html#layer-specification-rules">Layer Specification Rules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/7-defining-execution-order/2-layers.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/7-defining-execution-order/3-exit-conditions.html">Exit Conditions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/7-defining-execution-order/3-exit-conditions.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/7-defining-execution-order/4-submodels.html">Submodels</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/7-defining-execution-order/4-submodels.html#id1">Defining a Submodel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/7-defining-execution-order/4-submodels.html#related-links">Related Links</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guide/8-running-a-simulation/index.html">Running a Simulation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../guide/8-running-a-simulation/1-configuring-execution.html">Configuring Execution</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/8-running-a-simulation/1-configuring-execution.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/8-running-a-simulation/2-initial-state.html">Overriding the Initial State</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/8-running-a-simulation/2-initial-state.html#with-code">With Code</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/8-running-a-simulation/2-initial-state.html#from-file">From File</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/8-running-a-simulation/2-initial-state.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/8-running-a-simulation/3-collecting-data.html">Collecting Data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/8-running-a-simulation/3-collecting-data.html#logging">Logging</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/8-running-a-simulation/3-collecting-data.html#accessing-the-complete-agent-state">Accessing the Complete Agent State</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/8-running-a-simulation/3-collecting-data.html#additional-notes">Additional Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/8-running-a-simulation/3-collecting-data.html#related-links">Related Links</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guide/9-running-multiple-simulations/index.html">Running Multiple Simulations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../guide/9-running-multiple-simulations/index.html#creating-a-cudaensemble">Creating a CUDAEnsemble</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/9-running-multiple-simulations/index.html#creating-a-runplanvector">Creating a RunPlanVector</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/9-running-multiple-simulations/index.html#creating-a-logging-configuration">Creating a Logging Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/9-running-multiple-simulations/index.html#configuring-running-the-ensemble">Configuring &amp; Running the Ensemble</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/9-running-multiple-simulations/index.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guide/10-visualisation/index.html">Visualisation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../guide/10-visualisation/1-building-with-vis.html">Enabling Visualisation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/10-visualisation/1-building-with-vis.html#detecting-visualisation-support">Detecting Visualisation Support</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/10-visualisation/2-setting-up-vis.html">Configuring a Visualisation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/10-visualisation/2-setting-up-vis.html#visualisation-options">Visualisation Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/10-visualisation/2-setting-up-vis.html#visualising-after-simulation-exit">Visualising After Simulation Exit</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/10-visualisation/2-setting-up-vis.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/10-visualisation/3-visualising-agents.html">Visualising Agents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/10-visualisation/3-visualising-agents.html#agent-model">Agent Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/10-visualisation/3-visualising-agents.html#agent-position">Agent Position</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/10-visualisation/3-visualising-agents.html#agent-direction">Agent Direction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/10-visualisation/3-visualising-agents.html#agent-scale">Agent Scale</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/10-visualisation/3-visualising-agents.html#agent-color">Agent Color</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/10-visualisation/3-visualising-agents.html#agent-states">Agent States</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/10-visualisation/3-visualising-agents.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/10-visualisation/4-adding-details.html">Visualising Additional Details</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/10-visualisation/4-adding-details.html#lines">Lines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/10-visualisation/4-adding-details.html#models">Models</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/10-visualisation/4-adding-details.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/10-visualisation/5-visualisation-controls.html">Visualisation Controls</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guide/11-performance-troubleshooting/index.html">Performance Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/12-flamegpu2-source/index.html">Building or Modifying the FLAME GPU 2 Source</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../guide/12-flamegpu2-source/1-build-from-source.html">Building FLAME GPU from Source</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/12-flamegpu2-source/1-build-from-source.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/12-flamegpu2-source/2-request-a-new-feature.html">Requesting Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/12-flamegpu2-source/3-contribute.html">Contributing to FLAMEGPU2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/12-flamegpu2-source/3-contribute.html#reporting-bugs">Reporting Bugs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/12-flamegpu2-source/3-contribute.html#submitting-pull-requests">Submitting Pull Requests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/12-flamegpu2-source/3-contribute.html#license">License</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guide/13-seatbelts/index.html">What is SEATBELTS?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../guide/13-seatbelts/index.html#enabling-disabling-seatbelts">Enabling/Disabling SEATBELTS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/13-seatbelts/index.html#related-links">Related Links</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api/library_root.html">Library API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/library_root.html#page-hierarchy">Page Hierarchy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/library_root.html#class-hierarchy">Class Hierarchy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/library_root.html#file-hierarchy">File Hierarchy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/library_root.html#full-api">Full API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/library_root.html#namespaces">Namespaces</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/namespace_flamegpu.html">Namespace flamegpu</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/namespace_flamegpu__%40156.html">Namespace flamegpu::&#64;156</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/namespace_flamegpu__exception.html">Namespace flamegpu::exception</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/namespace_flamegpu__io.html">Namespace flamegpu::io</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/namespace_flamegpu__util.html">Namespace flamegpu::util</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/namespace_flamegpu__util__nvtx.html">Namespace flamegpu::util::nvtx</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/namespace_flamegpu__visualiser.html">Namespace flamegpu::visualiser</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/namespace_flamegpu__visualiser__Stock.html">Namespace flamegpu::visualiser::Stock</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/namespace_flamegpu__visualiser__Stock__Colors.html">Namespace flamegpu::visualiser::Stock::Colors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/namespace_flamegpu__visualiser__Stock__Palettes.html">Namespace flamegpu::visualiser::Stock::Palettes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/library_root.html#classes-and-structs">Classes and Structs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1AgentData.html">Struct AgentData</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1AgentFunctionData.html">Struct AgentFunctionData</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1AgentLogFrame.html">Struct AgentLogFrame</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1AgentVariable.html">Struct AgentVariable</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1AgentVariableHash.html">Struct AgentVariableHash</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1CUDAEnsemble_1_1EnsembleConfig.html">Struct CUDAEnsemble::EnsembleConfig</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1CUDAFatAgent_1_1AgentState.html">Struct CUDAFatAgent::AgentState</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1CUDAFatAgent_1_1AgentState__hash.html">Struct CUDAFatAgent::AgentState_hash</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1CUDAFatAgent_1_1NewBuffer.html">Struct CUDAFatAgent::NewBuffer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1CUDAMacroEnvironment_1_1MacroEnvProp.html">Struct CUDAMacroEnvironment::MacroEnvProp</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1CUDAScanCompactionConfig.html">Struct CUDAScanCompactionConfig</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1CUDAScanCompactionPtrs.html">Struct CUDAScanCompactionPtrs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1CUDAScatter_1_1InversionIterator.html">Struct CUDAScatter::InversionIterator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1CUDAScatter_1_1ScatterData.html">Struct CUDAScatter::ScatterData</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1CUDAScatter_1_1StreamData.html">Struct CUDAScatter::StreamData</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1CUDASimulation_1_1Config.html">Struct CUDASimulation::Config</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1CUDASimulation_1_1Singletons.html">Struct CUDASimulation::Singletons</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1DeviceAgentVector__impl_1_1VariableBufferPair.html">Struct DeviceAgentVector_impl::VariableBufferPair</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1EnvironmentDescription_1_1MacroPropData.html">Struct EnvironmentDescription::MacroPropData</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1EnvironmentDescription_1_1PropData.html">Struct EnvironmentDescription::PropData</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1EnvironmentManager_1_1DefragProp.html">Struct EnvironmentManager::DefragProp</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1EnvironmentManager_1_1EnvProp.html">Struct EnvironmentManager::EnvProp</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1EnvironmentManager_1_1EnvUpdateFlags.html">Struct EnvironmentManager::EnvUpdateFlags</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1EnvironmentManager_1_1MappedProp.html">Struct EnvironmentManager::MappedProp</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1EnvironmentManager_1_1NamePairHash.html">Struct EnvironmentManager::NamePairHash</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1EnvironmentManager_1_1RTCEnvPropCache.html">Struct EnvironmentManager::RTCEnvPropCache</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1exception_1_1DeviceExceptionBuffer.html">Struct DeviceExceptionBuffer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1ExitLogFrame.html">Struct ExitLogFrame</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1HostAPI_1_1key__hash.html">Struct HostAPI::key_hash</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1HostMacroProperty__MetaData.html">Struct HostMacroProperty_MetaData</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1LayerData.html">Struct LayerData</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1LogFrame.html">Struct LogFrame</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1LoggingConfig_1_1NameReductionFn.html">Struct LoggingConfig::NameReductionFn</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1MessageArray2D_1_1Data.html">Struct MessageArray2D::Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1MessageArray2D_1_1MetaData.html">Struct MessageArray2D::MetaData</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1MessageArray3D_1_1Data.html">Struct MessageArray3D::Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1MessageArray3D_1_1MetaData.html">Struct MessageArray3D::MetaData</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1MessageArray_1_1Data.html">Struct MessageArray::Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1MessageArray_1_1MetaData.html">Struct MessageArray::MetaData</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1MessageBruteForce_1_1Data.html">Struct MessageBruteForce::Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1MessageBruteForce_1_1MetaData.html">Struct MessageBruteForce::MetaData</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1MessageBucket_1_1Data.html">Struct MessageBucket::Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1MessageBucket_1_1MetaData.html">Struct MessageBucket::MetaData</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1MessageSpatial2D_1_1Data.html">Struct MessageSpatial2D::Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1MessageSpatial2D_1_1GridPos2D.html">Struct MessageSpatial2D::GridPos2D</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1MessageSpatial2D_1_1MetaData.html">Struct MessageSpatial2D::MetaData</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1MessageSpatial3D_1_1Data.html">Struct MessageSpatial3D::Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1MessageSpatial3D_1_1GridPos3D.html">Struct MessageSpatial3D::GridPos3D</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1MessageSpatial3D_1_1MetaData.html">Struct MessageSpatial3D::MetaData</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1ModelData.html">Struct ModelData</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1NewAgentStorage.html">Struct NewAgentStorage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1RunLog.html">Struct RunLog</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1RunLog_1_1PerformanceSpecs.html">Struct RunLog::PerformanceSpecs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1Simulation_1_1Config.html">Struct Simulation::Config</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1StepLogFrame.html">Struct StepLogFrame</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1SubAgentData.html">Struct SubAgentData</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1SubEnvironmentData.html">Struct SubEnvironmentData</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1SubModelData.html">Struct SubModelData</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1sum__input__t.html">Template Struct sum_input_t</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1sum__input__t_3_01char_01_4.html">Template Struct sum_input_t&lt; char &gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1sum__input__t_3_01double_01_4.html">Template Struct sum_input_t&lt; double &gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1sum__input__t_3_01float_01_4.html">Template Struct sum_input_t&lt; float &gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1sum__input__t_3_01int16__t_01_4.html">Template Struct sum_input_t&lt; int16_t &gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1sum__input__t_3_01int32__t_01_4.html">Template Struct sum_input_t&lt; int32_t &gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1sum__input__t_3_01int64__t_01_4.html">Template Struct sum_input_t&lt; int64_t &gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1sum__input__t_3_01int8__t_01_4.html">Template Struct sum_input_t&lt; int8_t &gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1sum__input__t_3_01uint16__t_01_4.html">Template Struct sum_input_t&lt; uint16_t &gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1sum__input__t_3_01uint32__t_01_4.html">Template Struct sum_input_t&lt; uint32_t &gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1sum__input__t_3_01uint64__t_01_4.html">Template Struct sum_input_t&lt; uint64_t &gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1sum__input__t_3_01uint8__t_01_4.html">Template Struct sum_input_t&lt; uint8_t &gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1util_1_1Any.html">Struct Any</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1util_1_1StringPairHash.html">Struct StringPairHash</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1util_1_1StringUint32PairHash.html">Struct StringUint32PairHash</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1Variable.html">Struct Variable</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1VariableBuffer.html">Struct VariableBuffer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1VarOffsetStruct.html">Struct VarOffsetStruct</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1VarOffsetStruct_1_1OffsetLen.html">Struct VarOffsetStruct::OffsetLen</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1visualiser_1_1Color.html">Struct Color</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1visualiser_1_1Palette.html">Struct Palette</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1visualiser_1_1Stock_1_1Palettes_1_1Dark2.html">Struct Dark2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1visualiser_1_1Stock_1_1Palettes_1_1Greys.html">Struct Greys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1visualiser_1_1Stock_1_1Palettes_1_1Pastel.html">Struct Pastel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1visualiser_1_1Stock_1_1Palettes_1_1PiYG.html">Struct PiYG</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1visualiser_1_1Stock_1_1Palettes_1_1RdYlBu.html">Struct RdYlBu</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1visualiser_1_1Stock_1_1Palettes_1_1Set1.html">Struct Set1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1visualiser_1_1Stock_1_1Palettes_1_1Set2.html">Struct Set2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1visualiser_1_1Stock_1_1Palettes_1_1Viridis.html">Struct Viridis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1visualiser_1_1Stock_1_1Palettes_1_1YlGn.html">Struct YlGn</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structflamegpu_1_1visualiser_1_1Stock_1_1Palettes_1_1YlOrRd.html">Struct YlOrRd</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/structtype__decode.html">Template Struct type_decode</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1AgentDescription.html">Class AgentDescription</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1AgentFunctionDescription.html">Class AgentFunctionDescription</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1AgentInstance.html">Class AgentInstance</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1AgentInterface.html">Class AgentInterface</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1AgentLoggingConfig.html">Class AgentLoggingConfig</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1AgentRandom.html">Class AgentRandom</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1AgentVector.html">Class AgentVector</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1AgentVector_1_1const__iterator.html">Class AgentVector::const_iterator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1AgentVector_1_1const__reverse__iterator.html">Class AgentVector::const_reverse_iterator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1AgentVector_1_1iterator.html">Class AgentVector::iterator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1AgentVector_1_1reverse__iterator.html">Class AgentVector::reverse_iterator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1AgentVector__Agent.html">Class AgentVector_Agent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1AgentVector__CAgent.html">Class AgentVector_CAgent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1CUDAAgent.html">Class CUDAAgent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1CUDAAgentStateList.html">Class CUDAAgentStateList</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1CUDAEnsemble.html">Class CUDAEnsemble</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1CUDAFatAgent.html">Class CUDAFatAgent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1CUDAFatAgentStateList.html">Class CUDAFatAgentStateList</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1CUDAMacroEnvironment.html">Class CUDAMacroEnvironment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1CUDAMessage.html">Class CUDAMessage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1CUDAMessageList.html">Class CUDAMessageList</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1CUDAScanCompaction.html">Class CUDAScanCompaction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1CUDAScatter.html">Class CUDAScatter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1CUDASimulation.html">Class CUDASimulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1DependencyGraph.html">Class DependencyGraph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1DependencyNode.html">Class DependencyNode</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1DeviceAgentVector__impl.html">Class DeviceAgentVector_impl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1DeviceAPI.html">Template Class DeviceAPI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1DeviceAPI_1_1AgentOut.html">Class DeviceAPI::AgentOut</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1DeviceEnvironment.html">Class DeviceEnvironment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1DeviceMacroProperty.html">Template Class DeviceMacroProperty</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1EnvironmentDescription.html">Class EnvironmentDescription</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1EnvironmentManager.html">Class EnvironmentManager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1AgentIDCollision.html">Class AgentIDCollision</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1ArrayMessageWriteConflict.html">Class ArrayMessageWriteConflict</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1CUDAError.html">Class CUDAError</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1CurveException.html">Class CurveException</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1DeviceError.html">Class DeviceError</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1DeviceExceptionManager.html">Class DeviceExceptionManager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1DifferentModel.html">Class DifferentModel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1DuplicateEnvProperty.html">Class DuplicateEnvProperty</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1EnvDescriptionAlreadyLoaded.html">Class EnvDescriptionAlreadyLoaded</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1ExpiredWeakPtr.html">Class ExpiredWeakPtr</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1FLAMEGPUException.html">Class FLAMEGPUException</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidAgent.html">Class InvalidAgent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidAgentFunc.html">Class InvalidAgentFunc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidAgentName.html">Class InvalidAgentName</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidAgentState.html">Class InvalidAgentState</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidAgentVar.html">Class InvalidAgentVar</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidArgument.html">Class InvalidArgument</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidCudaAgent.html">Class InvalidCudaAgent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidCudaAgentDesc.html">Class InvalidCudaAgentDesc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidCudaAgentMapSize.html">Class InvalidCudaAgentMapSize</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidCudaAgentState.html">Class InvalidCudaAgentState</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidCUDAComputeCapability.html">Class InvalidCUDAComputeCapability</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidCUDAdevice.html">Class InvalidCUDAdevice</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidCudaMessage.html">Class InvalidCudaMessage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidDependencyGraph.html">Class InvalidDependencyGraph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidEnvProperty.html">Class InvalidEnvProperty</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidEnvPropertyType.html">Class InvalidEnvPropertyType</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidFilePath.html">Class InvalidFilePath</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidFuncLayerIndx.html">Class InvalidFuncLayerIndx</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidHostFunc.html">Class InvalidHostFunc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidInputFile.html">Class InvalidInputFile</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidLayerMember.html">Class InvalidLayerMember</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidMemoryCapacity.html">Class InvalidMemoryCapacity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidMessage.html">Class InvalidMessage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidMessageData.html">Class InvalidMessageData</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidMessageName.html">Class InvalidMessageName</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidMessageType.html">Class InvalidMessageType</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidMessageVar.html">Class InvalidMessageVar</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidOperation.html">Class InvalidOperation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidParent.html">Class InvalidParent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidStateName.html">Class InvalidStateName</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidSubAgentName.html">Class InvalidSubAgentName</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidSubModel.html">Class InvalidSubModel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidSubModelName.html">Class InvalidSubModelName</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidVarArrayLen.html">Class InvalidVarArrayLen</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1InvalidVarType.html">Class InvalidVarType</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1OutOfBoundsException.html">Class OutOfBoundsException</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1OutOfMemory.html">Class OutOfMemory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1OutOfRangeVarArray.html">Class OutOfRangeVarArray</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1RapidJSONError.html">Class RapidJSONError</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1ReadOnlyEnvProperty.html">Class ReadOnlyEnvProperty</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1ReservedName.html">Class ReservedName</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1TimerException.html">Class TimerException</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1TinyXMLError.html">Class TinyXMLError</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1UnknownError.html">Class UnknownError</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1UnknownInternalError.html">Class UnknownInternalError</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1UnsupportedFileType.html">Class UnsupportedFileType</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1UnsupportedVarType.html">Class UnsupportedVarType</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1VersionMismatch.html">Class VersionMismatch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1exception_1_1VisualisationException.html">Class VisualisationException</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1HostAgentAPI.html">Class HostAgentAPI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1HostAPI.html">Class HostAPI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1HostEnvironment.html">Class HostEnvironment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1HostFunctionCallback.html">Class HostFunctionCallback</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1HostFunctionConditionCallback.html">Class HostFunctionConditionCallback</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1HostFunctionDescription.html">Class HostFunctionDescription</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1HostMacroProperty.html">Template Class HostMacroProperty</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1HostNewAgentAPI.html">Class HostNewAgentAPI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1HostRandom.html">Class HostRandom</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1io_1_1JSONLogger.html">Class JSONLogger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1io_1_1JSONStateReader.html">Class JSONStateReader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1io_1_1JSONStateReader__agentsize__counter.html">Class JSONStateReader_agentsize_counter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1io_1_1JSONStateReader__impl.html">Class JSONStateReader_impl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1io_1_1JSONStateWriter.html">Class JSONStateWriter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1io_1_1Logger.html">Class Logger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1io_1_1LoggerFactory.html">Class LoggerFactory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1io_1_1StateReader.html">Class StateReader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1io_1_1StateReaderFactory.html">Class StateReaderFactory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1io_1_1StateWriter.html">Class StateWriter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1io_1_1StateWriterFactory.html">Class StateWriterFactory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1io_1_1XMLLogger.html">Class XMLLogger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1io_1_1XMLStateReader.html">Class XMLStateReader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1io_1_1XMLStateWriter.html">Class XMLStateWriter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1LayerDescription.html">Class LayerDescription</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1LoggingConfig.html">Class LoggingConfig</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray.html">Class MessageArray</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray2D.html">Class MessageArray2D</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray2D_1_1CUDAModelHandler.html">Class MessageArray2D::CUDAModelHandler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray2D_1_1Description.html">Class MessageArray2D::Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray2D_1_1In.html">Class MessageArray2D::In</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray2D_1_1In_1_1Filter.html">Class In::Filter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray2D_1_1In_1_1Filter_1_1iterator.html">Class Filter::iterator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray2D_1_1In_1_1Filter_1_1Message.html">Class Filter::Message</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray2D_1_1In_1_1Message.html">Class In::Message</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray2D_1_1In_1_1VonNeumannFilter.html">Class In::VonNeumannFilter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray2D_1_1In_1_1VonNeumannFilter_1_1iterator.html">Class VonNeumannFilter::iterator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray2D_1_1In_1_1VonNeumannFilter_1_1Message.html">Class VonNeumannFilter::Message</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray2D_1_1In_1_1VonNeumannWrapFilter.html">Class In::VonNeumannWrapFilter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray2D_1_1In_1_1VonNeumannWrapFilter_1_1iterator.html">Class VonNeumannWrapFilter::iterator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray2D_1_1In_1_1VonNeumannWrapFilter_1_1Message.html">Class VonNeumannWrapFilter::Message</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray2D_1_1In_1_1WrapFilter.html">Class In::WrapFilter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray2D_1_1In_1_1WrapFilter_1_1iterator.html">Class WrapFilter::iterator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray2D_1_1In_1_1WrapFilter_1_1Message.html">Class WrapFilter::Message</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray2D_1_1Out.html">Class MessageArray2D::Out</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray3D.html">Class MessageArray3D</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray3D_1_1CUDAModelHandler.html">Class MessageArray3D::CUDAModelHandler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray3D_1_1Description.html">Class MessageArray3D::Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray3D_1_1In.html">Class MessageArray3D::In</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray3D_1_1In_1_1Filter.html">Class In::Filter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray3D_1_1In_1_1Filter_1_1iterator.html">Class Filter::iterator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray3D_1_1In_1_1Filter_1_1Message.html">Class Filter::Message</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray3D_1_1In_1_1Message.html">Class In::Message</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray3D_1_1In_1_1VonNeumannFilter.html">Class In::VonNeumannFilter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray3D_1_1In_1_1VonNeumannFilter_1_1iterator.html">Class VonNeumannFilter::iterator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray3D_1_1In_1_1VonNeumannFilter_1_1Message.html">Class VonNeumannFilter::Message</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray3D_1_1In_1_1VonNeumannWrapFilter.html">Class In::VonNeumannWrapFilter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray3D_1_1In_1_1VonNeumannWrapFilter_1_1iterator.html">Class VonNeumannWrapFilter::iterator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray3D_1_1In_1_1VonNeumannWrapFilter_1_1Message.html">Class VonNeumannWrapFilter::Message</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray3D_1_1In_1_1WrapFilter.html">Class In::WrapFilter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray3D_1_1In_1_1WrapFilter_1_1iterator.html">Class WrapFilter::iterator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray3D_1_1In_1_1WrapFilter_1_1Message.html">Class WrapFilter::Message</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray3D_1_1Out.html">Class MessageArray3D::Out</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray_1_1CUDAModelHandler.html">Class MessageArray::CUDAModelHandler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray_1_1Description.html">Class MessageArray::Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray_1_1In.html">Class MessageArray::In</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray_1_1In_1_1Filter.html">Class In::Filter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray_1_1In_1_1Filter_1_1iterator.html">Class Filter::iterator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray_1_1In_1_1Filter_1_1Message.html">Class Filter::Message</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray_1_1In_1_1Message.html">Class In::Message</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray_1_1In_1_1WrapFilter.html">Class In::WrapFilter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray_1_1In_1_1WrapFilter_1_1iterator.html">Class WrapFilter::iterator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray_1_1In_1_1WrapFilter_1_1Message.html">Class WrapFilter::Message</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageArray_1_1Out.html">Class MessageArray::Out</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageBruteForce.html">Class MessageBruteForce</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageBruteForce_1_1CUDAModelHandler.html">Class MessageBruteForce::CUDAModelHandler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageBruteForce_1_1Description.html">Class MessageBruteForce::Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageBruteForce_1_1In.html">Class MessageBruteForce::In</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageBruteForce_1_1In_1_1iterator.html">Class In::iterator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageBruteForce_1_1In_1_1Message.html">Class In::Message</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageBruteForce_1_1Out.html">Class MessageBruteForce::Out</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageBucket.html">Class MessageBucket</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageBucket_1_1CUDAModelHandler.html">Class MessageBucket::CUDAModelHandler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageBucket_1_1Description.html">Class MessageBucket::Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageBucket_1_1In.html">Class MessageBucket::In</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageBucket_1_1In_1_1Filter.html">Class In::Filter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageBucket_1_1In_1_1Filter_1_1iterator.html">Class Filter::iterator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageBucket_1_1In_1_1Filter_1_1Message.html">Class Filter::Message</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageBucket_1_1Out.html">Class MessageBucket::Out</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageNone.html">Class MessageNone</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageNone_1_1CUDAModelHandler.html">Class MessageNone::CUDAModelHandler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageNone_1_1In.html">Class MessageNone::In</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageNone_1_1Out.html">Class MessageNone::Out</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial2D.html">Class MessageSpatial2D</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial2D_1_1CUDAModelHandler.html">Class MessageSpatial2D::CUDAModelHandler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial2D_1_1Description.html">Class MessageSpatial2D::Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial2D_1_1In.html">Class MessageSpatial2D::In</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial2D_1_1In_1_1Filter.html">Class In::Filter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial2D_1_1In_1_1Filter_1_1iterator.html">Class Filter::iterator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial2D_1_1In_1_1Filter_1_1Message.html">Class Filter::Message</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial2D_1_1Out.html">Class MessageSpatial2D::Out</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial3D.html">Class MessageSpatial3D</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial3D_1_1CUDAModelHandler.html">Class MessageSpatial3D::CUDAModelHandler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial3D_1_1Description.html">Class MessageSpatial3D::Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial3D_1_1In.html">Class MessageSpatial3D::In</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial3D_1_1In_1_1Filter.html">Class In::Filter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial3D_1_1In_1_1Filter_1_1iterator.html">Class Filter::iterator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial3D_1_1In_1_1Filter_1_1Message.html">Class Filter::Message</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial3D_1_1Out.html">Class MessageSpatial3D::Out</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1MessageSpecialisationHandler.html">Class MessageSpecialisationHandler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1ModelDescription.html">Class ModelDescription</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1RandomManager.html">Class RandomManager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1ReadOnlyDeviceAPI.html">Class ReadOnlyDeviceAPI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1ReadOnlyDeviceEnvironment.html">Class ReadOnlyDeviceEnvironment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1ReadOnlyDeviceMacroProperty.html">Template Class ReadOnlyDeviceMacroProperty</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1RunPlan.html">Class RunPlan</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1RunPlanVector.html">Class RunPlanVector</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1SimLogger.html">Class SimLogger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1SimRunner.html">Class SimRunner</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1Simulation.html">Class Simulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1StepLoggingConfig.html">Class StepLoggingConfig</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1SubAgentDescription.html">Class SubAgentDescription</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1SubEnvironmentDescription.html">Class SubEnvironmentDescription</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1SubModelDescription.html">Class SubModelDescription</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1util_1_1nvtx_1_1NVTXRange.html">Class NVTXRange</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1visualiser_1_1AgentStateVis.html">Class AgentStateVis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1visualiser_1_1AgentVis.html">Class AgentVis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1visualiser_1_1AutoPalette.html">Class AutoPalette</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1visualiser_1_1ColorFunction.html">Class ColorFunction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1visualiser_1_1DiscreteColor.html">Template Class DiscreteColor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1visualiser_1_1HSVInterpolation.html">Class HSVInterpolation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1visualiser_1_1LineVis.html">Class LineVis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1visualiser_1_1ModelVis.html">Class ModelVis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1visualiser_1_1Palette_1_1const__iterator.html">Class Palette::const_iterator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1visualiser_1_1StaticColor.html">Class StaticColor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1visualiser_1_1StaticModelVis.html">Class StaticModelVis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/classflamegpu_1_1visualiser_1_1ViridisInterpolation.html">Class ViridisInterpolation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/library_root.html#enums">Enums</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/enum_namespaceflamegpu_1a1adc39b89f4a6045c011c55a91339e4c.html">Enum AGENT_STATUS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/enum_namespaceflamegpu_1a2f06e5efd2a057b11a2fb53e711c443a.html">Enum CONDITION_RESULT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/enum_namespaceflamegpu_1a167df7c66e4cd9ff9a0fbc124d6a4825.html">Enum MessageSortingType</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/library_root.html#functions">Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1ad0783b09357d94b0e6164fe7047ca661.html">Template Function flamegpu::agent_function_condition_wrapper</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1a643b1b7d842763420a871b5ad01cde07.html">Template Function flamegpu::agent_function_wrapper</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1a5fa1624859f6fef19656f12c5cf23124.html">Function flamegpu::allocateIDs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1a0e9933d8e92fc85b481c5ffcec96e4c5.html">Function flamegpu::atomicHistogram1D</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1a62702550faacab131476f2f0fd42b15d.html">Function flamegpu::atomicHistogram2D</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1ab142b7f3311b4d53df2ec36802361c18.html">Function flamegpu::atomicHistogram3D</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1a372e103ba46c067bc0f68a2a103b90b1.html">Function flamegpu::broadcastInitKernel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1ab6b7cc2d61ad5fc6ef4f30962f0e1c0c.html">Function flamegpu::calculateSpatialHash</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1a98d812fe76f87a584031e516b3bd4d83.html">Function flamegpu::calculateSpatialHashFloat2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1a1c1e558eafa9efc336bcdac7fad3fe09.html">Function flamegpu::calculateSpatialHashFloat3</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1a8e4c805fb1a16187e4a86a8dc7ced84d.html">Function flamegpu::generateCollisionFlags</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1a5b21b0ec7c8afea544e7fee29d2a0e7f.html">Template Function flamegpu::getAgentVariableMaxFunc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1a451011c85abe5de4e9497e29ccf8ffdb.html">Template Function flamegpu::getAgentVariableMeanFunc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1a083ca13c3f24c050c137312fbd4ef6a8.html">Template Function flamegpu::getAgentVariableMinFunc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1aaefedcfe801f1afde9d49fda31de4bfc.html">Template Function flamegpu::getAgentVariableStandardDevFunc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1a0cdae124d116e9ae414cf82e168aa147.html">Template Function flamegpu::getAgentVariableSumFunc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1aef3737bc73df02c3cacdfe023e540fda.html">Function flamegpu::getGridPosition2D</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1af8bd0c23b13150691a8075e10e315df8.html">Function flamegpu::getGridPosition3D</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1ac19244e95de615218572437593f6f366.html">Function flamegpu::getHash2D</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1aecff32308539a40d36081f141c5bcee3.html">Function flamegpu::getHash3D</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1ae83605c416211185d6408b08d3758ea6.html">Function flamegpu::init_curand</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1a7a197dc32a2a7d5896c0e6f7159dd065.html">Function flamegpu::initToThreadIndex</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1a580dd14f3e500d19284a204cc56cb96e.html">Function flamegpu::pbm_reorder_generic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1a529cbc02e5f6ba21c809fc4f858fe082.html">Function flamegpu::reorder_array_messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1a728cd4b44037b620e529e3a548ea5494.html">Function flamegpu::scatter_all_generic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1a844df115c40ca91356e95f37b37f5072.html">Template Function flamegpu::scatter_generic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1a234b5ec14c0009cdce8001a6bc08bf85.html">Function flamegpu::scatter_new_agents</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1aca5e4a678eafc6ca26d5ff6e3239503c.html">Function flamegpu::scatter_position_generic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1a39c5c7fb5befdc5ea64afdb4e97f0e60.html">Function flamegpu::sortBuffer_kernel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1a44d39ffe8c5917018e1090545cf6cbf9.html">Function flamegpu::spatialSortInitToThreadIndex</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1_1util_1_1nvtx_1af0b150530f56beedbdd1b0dff603f869.html">Function flamegpu::util::nvtx::pop</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/function_namespaceflamegpu_1_1util_1_1nvtx_1ae4d84b8b9f557577d74b2545dc8213f1.html">Function flamegpu::util::nvtx::push</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/library_root.html#variables">Variables</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/variable_namespaceflamegpu_1ae222c3a1e48085efbe98bf734bf18c47.html">Variable flamegpu::ID_NOT_SET</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/variable_namespaceflamegpu_1ae2461128afe905a603afcb7877188f29.html">Variable flamegpu::ID_VARIABLE_NAME</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/variable_namespaceflamegpu_1_1util_1_1nvtx_1af78944ce056f56e9d4c1df7d773792bf.html">Variable flamegpu::util::nvtx::colourCount</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/variable_namespaceflamegpu_1_1util_1_1nvtx_1a0302736e3c60407a5ba2aeeee9415a6f.html">Variable flamegpu::util::nvtx::palette</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/variable_namespaceflamegpu_1afe3afceec4bb90c840ea5482d7b07a97.html">Variable flamegpu::VERSION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/variable_namespaceflamegpu_1abf99fff85270c03559c6846ce15c254f.html">Variable flamegpu::VERSION_BUILDMETADATA</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/variable_namespaceflamegpu_1ab2825ce1960a77bc8afbbd98b6305a44.html">Variable flamegpu::VERSION_FULL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/variable_namespaceflamegpu_1ac29d48311f0cba829d4603734ba14450.html">Variable flamegpu::VERSION_MAJOR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/variable_namespaceflamegpu_1abeeb7b039bde639c7627990c5f62e83d.html">Variable flamegpu::VERSION_MINOR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/variable_namespaceflamegpu_1a6c1bfc357e2e82b0e575ec2b5b6a33f5.html">Variable flamegpu::VERSION_PATCH</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/variable_namespaceflamegpu_1a069e154449fb7dd97a34bc531ed9298c.html">Variable flamegpu::VERSION_PRERELEASE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/variable_namespaceflamegpu_1a3afacc122b436ea9ab35959b1a8eff0f.html">Variable flamegpu::VERSION_STRING</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/variable_namespaceflamegpu_1_1visualiser_1_1Stock_1_1Colors_1a591a2e09088968ef4e9549ade22b5333.html">Variable flamegpu::visualiser::Stock::Colors::BLACK</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/variable_namespaceflamegpu_1_1visualiser_1_1Stock_1_1Colors_1a00e6f044ffe65490ec534820dc711801.html">Variable flamegpu::visualiser::Stock::Colors::BLUE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/variable_namespaceflamegpu_1_1visualiser_1_1Stock_1_1Colors_1aad8474812ca5c495e3d427bac61c1065.html">Variable flamegpu::visualiser::Stock::Colors::GREEN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/variable_namespaceflamegpu_1_1visualiser_1_1Stock_1_1Colors_1a5c18952ccee1c554960d0591212508e4.html">Variable flamegpu::visualiser::Stock::Colors::RED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/variable_namespaceflamegpu_1_1visualiser_1_1Stock_1_1Colors_1a6a178b4824a681a995f9e4ff131af19a.html">Variable flamegpu::visualiser::Stock::Colors::WHITE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/variable_namespaceflamegpu_1_1visualiser_1_1Stock_1_1Palettes_1a20fa45b16191b081045ab552e8b2d642.html">Variable flamegpu::visualiser::Stock::Palettes::DARK2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/variable_namespaceflamegpu_1_1visualiser_1_1Stock_1_1Palettes_1a88eb71e0f17b9303a07ea89aa64bc1a2.html">Variable flamegpu::visualiser::Stock::Palettes::GREYS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/variable_namespaceflamegpu_1_1visualiser_1_1Stock_1_1Palettes_1a30cc45821bb2d273b8d88cc52ca569ca.html">Variable flamegpu::visualiser::Stock::Palettes::PASTEL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/variable_namespaceflamegpu_1_1visualiser_1_1Stock_1_1Palettes_1afe0ee1ad329fd208faffa923fc0cb07f.html">Variable flamegpu::visualiser::Stock::Palettes::PIYG</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/variable_namespaceflamegpu_1_1visualiser_1_1Stock_1_1Palettes_1ae976b044a8dd59d5fae4b28dcff4c07b.html">Variable flamegpu::visualiser::Stock::Palettes::RDYLBU</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/variable_namespaceflamegpu_1_1visualiser_1_1Stock_1_1Palettes_1a3bb28bea63506f9eb15100d55c68fa7e.html">Variable flamegpu::visualiser::Stock::Palettes::SET1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/variable_namespaceflamegpu_1_1visualiser_1_1Stock_1_1Palettes_1a1bd3aa65da115e2a07b9118fa6952e82.html">Variable flamegpu::visualiser::Stock::Palettes::SET2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/variable_namespaceflamegpu_1_1visualiser_1_1Stock_1_1Palettes_1a852a3b927ba4d6fd38f3be0b1c915c30.html">Variable flamegpu::visualiser::Stock::Palettes::YLGN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/variable_namespaceflamegpu_1_1visualiser_1_1Stock_1_1Palettes_1a0cfc07ba486999d845c4db0e8b74f152.html">Variable flamegpu::visualiser::Stock::Palettes::YLORRD</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/library_root.html#defines">Defines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/define_filesystem_8h_1aab6af62131aad81d17d3b4afd9db334f.html">Define _SILENCE_EXPERIMENTAL_FILESYSTEM_DEPRECATION_WARNING</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_CUDAAgent_8cu_1aab6af62131aad81d17d3b4afd9db334f.html">Define _SILENCE_EXPERIMENTAL_FILESYSTEM_DEPRECATION_WARNING</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_SimLogger_8cu_1aab6af62131aad81d17d3b4afd9db334f.html">Define _SILENCE_EXPERIMENTAL_FILESYSTEM_DEPRECATION_WARNING</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_JitifyCache_8cu_1aab6af62131aad81d17d3b4afd9db334f.html">Define _SILENCE_EXPERIMENTAL_FILESYSTEM_DEPRECATION_WARNING</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_FLAMEGPUException_8h_1a3782b4c58365dfbff74733193c5b886e.html">Define DERIVED_FLAMEGPUException</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_FLAMEGPUDeviceException__device_8cuh_1a9e2b87f2547583d337b7db1b3abdf501.html">Define DTHROW</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_AgentFunction__shim_8cuh_1a1c067606a392fd111d240d55377e79a9.html">Define FLAMEGPU_AGENT_FUNCTION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_AgentFunctionCondition__shim_8cuh_1a18080498fb1ee3218b8b0ff14d7ec1af.html">Define FLAMEGPU_AGENT_FUNCTION_CONDITION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_HostAgentAPI_8cuh_1ad9d5573357effdcf7430c6c2024becc4.html">Define FLAMEGPU_CUSTOM_REDUCTION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_HostAgentAPI_8cuh_1a64629b6c7aa246731d1657c3ad70996a.html">Define FLAMEGPU_CUSTOM_TRANSFORM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_AgentFunction__shim_8cuh_1a76f5ec2c762f0289e11d150131b80ef9.html">Define FLAMEGPU_DEVICE_FUNCTION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_HostAPI__macros_8h_1a4a4750514dd45f70b587b29543fe7a27.html">Define FLAMEGPU_EXIT_CONDITION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_HostAPI__macros_8h_1a1c604c9eb863599998429b48b31fe671.html">Define FLAMEGPU_EXIT_FUNCTION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_HostAPI__macros_8h_1a1682b3b663340523820b7b1dc35ef180.html">Define FLAMEGPU_HOST_CONDITION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_AgentFunction__shim_8cuh_1a92ddd2311e736cc418e2ed1092485ca1.html">Define FLAMEGPU_HOST_DEVICE_FUNCTION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_HostAPI__macros_8h_1afd0f16608253df0496b74c78500282c5.html">Define FLAMEGPU_HOST_FUNCTION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_HostAPI__macros_8h_1a45ad84203a419b7833ef1f21484648c8.html">Define FLAMEGPU_INIT_FUNCTION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_HostAPI__macros_8h_1a779541ca72e6a0019460ace6d0a9d1ab.html">Define FLAMEGPU_STEP_FUNCTION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_version_8h_1a3721686dc87c2ab44fd82ad98ffc21db.html">Define FLAMEGPU_VERSION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_CUDAErrorChecking_8cuh_1a3f6ea8e9ef58125936d50d7e1181aa7a.html">Define gpuErrchk</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_CUDAErrorChecking_8cuh_1a05a1b794ed7313e0763388e626530d99.html">Define gpuErrchkDriverAPI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_CUDAErrorChecking_8cuh_1aab94d05ca41ffb1aec281d2fee3014a5.html">Define gpuErrchkLaunch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_FLAMEGPUDeviceException_8cuh_1a1a757b8c1e833b86bfca9a577aed08c8.html">Define INCLUDE_FLAMEGPU_EXCEPTION_FLAMEGPUDEVICEEXCEPTION_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_FLAMEGPUDeviceException__device_8cuh_1a8970b890bde138df77fa8531f6166660.html">Define INCLUDE_FLAMEGPU_EXCEPTION_FLAMEGPUDEVICEEXCEPTION_DEVICE_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_CUDAScatter_8cuh_1a95124ede6afa81fd979fd65cd77b4b95.html">Define INCLUDE_FLAMEGPU_GPU_CUDASCATTER_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_CUDAErrorChecking_8cuh_1a57686b7f62e6545a194aa078947f020c.html">Define INCLUDE_FLAMEGPU_GPU_DETAIL_CUDAERRORCHECKING_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_AgentFunctionData_8cuh_1abcd20b720bdde9dae536097d9b59ce83.html">Define INCLUDE_FLAMEGPU_MODEL_AGENTFUNCTIONDATA_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_AgentFunction_8cuh_1affe4f5c251678f8cb6a9da167dabbcb4.html">Define INCLUDE_FLAMEGPU_RUNTIME_AGENTFUNCTION_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_AgentFunction__shim_8cuh_1ab99977b2d12596d8e7eb69f86fd2c0f7.html">Define INCLUDE_FLAMEGPU_RUNTIME_AGENTFUNCTION_SHIM_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_AgentFunctionCondition_8cuh_1a574cefe207a9b2a90e1b48ecbac1bfed.html">Define INCLUDE_FLAMEGPU_RUNTIME_AGENTFUNCTIONCONDITION_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_AgentFunctionCondition__shim_8cuh_1a4fade0adcfca1c63f63301ef0f4618cd.html">Define INCLUDE_FLAMEGPU_RUNTIME_AGENTFUNCTIONCONDITION_SHIM_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_curve_8cuh_1a05ee33eb8cc0ac9d4f74b4bb3142e251.html">Define INCLUDE_FLAMEGPU_RUNTIME_DETAIL_CURVE_CURVE_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_curve__rtc_8cuh_1a4af8369376d2fad37ccada340646f766.html">Define INCLUDE_FLAMEGPU_RUNTIME_DETAIL_CURVE_CURVE_RTC_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_DeviceAPI_8cuh_1ae19bcc534bdbb83776e9b23350a073d8.html">Define INCLUDE_FLAMEGPU_RUNTIME_DEVICEAPI_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_HostAgentAPI_8cuh_1a1bb5d48469df1669da757724c8d6bc49.html">Define INCLUDE_FLAMEGPU_RUNTIME_HOSTAGENTAPI_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_MessageArray2DDevice_8cuh_1a2d970be19925286658ef10612418323d.html">Define INCLUDE_FLAMEGPU_RUNTIME_MESSAGING_MESSAGEARRAY2D_MESSAGEARRAY2DDEVICE_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_MessageArray3DDevice_8cuh_1a1eac92a18d97d668a467428697f02f45.html">Define INCLUDE_FLAMEGPU_RUNTIME_MESSAGING_MESSAGEARRAY3D_MESSAGEARRAY3DDEVICE_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_MessageArrayDevice_8cuh_1af8e2891480b9423ea605c599f3c7ed78.html">Define INCLUDE_FLAMEGPU_RUNTIME_MESSAGING_MESSAGEARRAY_MESSAGEARRAYDEVICE_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_MessageBruteForceDevice_8cuh_1a908163ddb9bfbb81c3eabd54007c7d04.html">Define INCLUDE_FLAMEGPU_RUNTIME_MESSAGING_MESSAGEBRUTEFORCE_MESSAGEBRUTEFORCEDEVICE_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_MessageBucketDevice_8cuh_1a55f537869b8e489d0323140c49f550c7.html">Define INCLUDE_FLAMEGPU_RUNTIME_MESSAGING_MESSAGEBUCKET_MESSAGEBUCKETDEVICE_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_MessageNoneDevice_8cuh_1af35d3304468392badb3a3c3f490ed543.html">Define INCLUDE_FLAMEGPU_RUNTIME_MESSAGING_MESSAGENONE_MESSAGENONEDEVICE_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_MessageSpatial2DDevice_8cuh_1a64a87e1d070382b34fd7106f97b4dad9.html">Define INCLUDE_FLAMEGPU_RUNTIME_MESSAGING_MESSAGESPATIAL2D_MESSAGESPATIAL2DDEVICE_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_MessageSpatial3DDevice_8cuh_1a2e44a936ef72b228e1b4022d142c6d39.html">Define INCLUDE_FLAMEGPU_RUNTIME_MESSAGING_MESSAGESPATIAL3D_MESSAGESPATIAL3DDEVICE_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_AgentRandom_8cuh_1acd7f782648ca5a41ae070fcd10411190.html">Define INCLUDE_FLAMEGPU_RUNTIME_UTILITY_AGENTRANDOM_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_DeviceEnvironment_8cuh_1a70778256e5045fe5a8a73595d04ce1db.html">Define INCLUDE_FLAMEGPU_RUNTIME_UTILITY_DEVICEENVIRONMENT_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_DeviceMacroProperty_8cuh_1a061e18ea0c5e08a909ac3b5e9b6e7d29.html">Define INCLUDE_FLAMEGPU_RUNTIME_UTILITY_DEVICEMACROPROPERTY_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_EnvironmentManager_8cuh_1a35e4d0576f837bbd5d6ae21c4024f9eb.html">Define INCLUDE_FLAMEGPU_RUNTIME_UTILITY_ENVIRONMENTMANAGER_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_HostEnvironment_8cuh_1a3e67960203739446d72ad966a9f0d710.html">Define INCLUDE_FLAMEGPU_RUNTIME_UTILITY_HOSTENVIRONMENT_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_HostMacroProperty_8cuh_1a46f00be2ac5b3fd3461d430c8fbf6f1a.html">Define INCLUDE_FLAMEGPU_RUNTIME_UTILITY_HOSTMACROPROPERTY_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_HostRandom_8cuh_1a057dabfe55bd607fde69100834c1a29c.html">Define INCLUDE_FLAMEGPU_RUNTIME_UTILITY_HOSTRANDOM_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_RandomManager_8cuh_1abdc3446320e64bb468b1c7d563ce0521.html">Define INCLUDE_FLAMEGPU_RUNTIME_UTILITY_RANDOMMANAGER_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_AgentLoggingConfig__Reductions_8cuh_1a7f05530c5c7a13f8de36eb4cd1271788.html">Define INCLUDE_FLAMEGPU_SIM_AGENTLOGGINGCONFIG_REDUCTIONS_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_compute__capability_8cuh_1a4bad8946cebb8e427cdf878597032be5.html">Define INCLUDE_FLAMEGPU_UTIL_DETAIL_COMPUTE_CAPABILITY_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_CUDAEventTimer_8cuh_1a906db513b7e58dbad67f053deb4d830f.html">Define INCLUDE_FLAMEGPU_UTIL_DETAIL_CUDAEVENTTIMER_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_wddm_8cuh_1a6bd3f6bafd8d04201ccb2e8e21972bb4.html">Define INCLUDE_FLAMEGPU_UTIL_DETAIL_WDDM_CUH_</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_nvtx_8h_1a27e6e9154344b5ec41e9b55b177d8e17.html">Define NVTX_POP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_nvtx_8h_1ad9715a7b8d8ac1584097a1d664dba054.html">Define NVTX_PUSH</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_nvtx_8h_1af9a6ff0a3f4236d36762228e06b84c51.html">Define NVTX_RANGE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_FLAMEGPUException_8h_1ac900f7f4cbb8ade051915b56180eb89d.html">Define THROW</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_XMLLogger_8cu_1afa12b43d02fbd77db41a70be0733552a.html">Define XMLCheckResult</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_XMLStateReader_8cpp_1afa12b43d02fbd77db41a70be0733552a.html">Define XMLCheckResult</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/define_XMLStateWriter_8cpp_1afa12b43d02fbd77db41a70be0733552a.html">Define XMLCheckResult</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/library_root.html#typedefs">Typedefs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/typedef_namespaceflamegpu_1a1526f45009388246e8fa90b51961ffc1.html">Typedef flamegpu::AgentFunctionConditionWrapper</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/typedef_namespaceflamegpu_1a321a8cd9cb3fc96929c7c378b38dc55b.html">Typedef flamegpu::AgentFunctionWrapper</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/typedef_namespaceflamegpu_1a63d0d158d88f589b144c183925cf6ac4.html">Typedef flamegpu::CUDAMessageMap</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/typedef_namespaceflamegpu_1ac8e9e6ebf91151e28403d28a1cf51288.html">Typedef flamegpu::CUDAMessageMapPair</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/typedef_namespaceflamegpu_1afe2ca90ee1ba3f7638e0a640dda346b3.html">Typedef flamegpu::DeviceAgentVector</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/typedef_namespaceflamegpu_1a5607538d6f1b97ef411a40c9d52f71b1.html">Typedef flamegpu::FLAMEGPU_EXIT_CONDITION_POINTER</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/typedef_namespaceflamegpu_1a677d0646677414a5fe34a580891c1296.html">Typedef flamegpu::FLAMEGPU_EXIT_FUNCTION_POINTER</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/typedef_namespaceflamegpu_1a13e4b64ac18db61a5da0c453baf89b1d.html">Typedef flamegpu::FLAMEGPU_HOST_CONDITION_POINTER</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/typedef_namespaceflamegpu_1a9bfe18618d31195e57596fba50d28af9.html">Typedef flamegpu::FLAMEGPU_HOST_FUNCTION_POINTER</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/typedef_namespaceflamegpu_1a49027ae818bd10917878571d0aab9eae.html">Typedef flamegpu::FLAMEGPU_INIT_FUNCTION_POINTER</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/typedef_namespaceflamegpu_1a327d7686ae940faa86f0119b6c7da377.html">Typedef flamegpu::FLAMEGPU_STEP_FUNCTION_POINTER</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/typedef_namespaceflamegpu_1aa38504d5d161ede66606cf62524fb9e2.html">Typedef flamegpu::id_t</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/typedef_namespaceflamegpu_1a83d0ff667b27ea2b2ec5677bf0c24253.html">Typedef flamegpu::IntT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/typedef_namespaceflamegpu_1_1util_1aa7b566b0594a93a119a5514350637c4c.html">Typedef flamegpu::util::StringPair</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/typedef_namespaceflamegpu_1_1util_1aecb766a8c1523feef0016f93a23fcc05.html">Typedef flamegpu::util::StringPairMap</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/typedef_namespaceflamegpu_1_1util_1afbbdc01d25d7a25770ebe2dda9327653.html">Typedef flamegpu::util::StringPairUnorderedMap</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/typedef_namespaceflamegpu_1_1util_1a72a7e160df1621db15bbc9959be7fec0.html">Typedef flamegpu::util::StringUint32Pair</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/typedef_namespaceflamegpu_1_1util_1aa4471b1ad6fc994261e936035243c21f.html">Typedef flamegpu::util::StringUint32PairMap</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/typedef_namespaceflamegpu_1_1util_1a66f226b533f3e6710fb78c7e7b801dd1.html">Typedef flamegpu::util::StringUint32PairUnorderedMap</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/typedef_namespaceflamegpu_1aebf720d85bdb918165592c59575fe998.html">Typedef flamegpu::VariableMap</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/typedef_namespaceflamegpu_1_1visualiser_1af8b0a3c3a081bb0366b9867e22af0d99.html">Typedef flamegpu::visualiser::iDiscreteColor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/typedef_namespaceflamegpu_1_1visualiser_1ae4a92f51d0b0c323285c6df3f97b5910.html">Typedef flamegpu::visualiser::uDiscreteColor</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/FLAMEGPU/FLAMEGPU2/discussions">Forum</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #4d4d4d" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">FLAME GPU 2</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Tutorial</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/tutorial/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="tutorial">
<h1>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline"></a></h1>
<p>This tutorial presents a brief overview of FLAME GPU 2 and a worked example demonstrating how to implement the <a class="reference external" href="https://github.com/FLAMEGPU/FLAMEGPU2/tree/master/examples/circles_spatial3D">Circles example</a>, a simple model provided with FLAME GPU 2.</p>
<p>In order to follow the tutorial, you will need to be using a machine with a CUDA capable GPU which meets the <a class="reference internal" href="../quickstart/index.html#quickstart-prerequisites"><span class="std std-ref">prerequisites</span></a> for (compiling and) running either C++ or Python FLAME GPU projects.</p>
<p>An alternate, in-browser, tutorial using Google Collab is available <a class="reference external" href="https://colab.research.google.com/github/FLAMEGPU/FLAMEGPU2-tutorial-python/blob/google-colab/FLAME_GPU_2_python_tutorial.ipynb">here</a>, this should work on any machine with a modern web browser and an internet connection. However, limitations of iPython notebooks prevent demonstration of all features (e.g. Visualisations).</p>
<div class="section" id="flame-gpu-design-philosophy">
<h2>FLAME GPU Design Philosophy<a class="headerlink" href="#flame-gpu-design-philosophy" title="Permalink to this headline"></a></h2>
<p>FLAME GPU has the aim of accelerating the performance and scale of agent-based simulation by targeting readily available parallelism in the form of Graphics Processing Units (GPUs). A central idea behind FLAME GPU is to abstract the GPU away from modellers so that modellers can build models without having to worry about writing parallel code. FLAME GPU also separates a model description from the model implementation. This simplifies the processes of validating and verifying models as the simulator code is tested in isolation from the model itself.</p>
<p>FLAME GPU started in the early days of general purpose computing on GPUs. GPU hardware and software development approaches have changed significantly since the inception of FLAME GPU, as such version 2.0 is a complete re-write of the library. It shifts from the FLAME GPU 1 architecture of template driven agent based modelling towards a modern C++ API with a cleaner interface for the specification of agent behaviour. It also adds a range of new features which ensure performant model simulation. E.g.</p>
<ul class="simple">
<li><p>Support for Big GPUs - Support for concurrent execution of agents functions which ensures that heterogeneous models do not necessarily result in poor device utilisation.</p></li>
<li><p>Model Ensembles - The ability to run ensembles of models. I.e. the same model with different parameters or random seeds. This is necessary within stochastic simulation and FLAME GPU allows the specification of ensembles to occupy multiple devices on a single computing node.</p></li>
<li><p>Sub models - Certain behaviours in FLAME GPU require iterative processes to ensure reproducibility with serial counterparts (e.g. conflict resolution for resources). FLAME GPU 2 allows re-usable sub models to be described for such behaviours so that it can be abstracted from the rest of the model function.</p></li>
</ul>
</div>
<div class="section" id="creating-a-project">
<h2>Creating a Project<a class="headerlink" href="#creating-a-project" title="Permalink to this headline"></a></h2>
<p>To create your own FLAME GPU 2 model, we recommend that you use one of the provided FLAME GPU 2 example template repositories. These provide you with all the build scripts to build a standalone FLAME GPU 2 model. They begin with an implementation of the Circles example, however in the tutorial below we will clear that file and start with it empty.</p>
<ul class="simple">
<li><p>If you wish to use the CUDA/C++ interface, use <a class="reference external" href="https://github.com/FLAMEGPU/FLAMEGPU2-example-template">FLAME GPU 2 example template</a></p></li>
<li><p>If you wish to use the Python 3.6+ interface, use <a class="reference external" href="https://github.com/FLAMEGPU/FLAMEGPU2-python-example-template">FLAME GPU 2 python example template</a></p></li>
</ul>
</div>
<div class="section" id="structure-of-a-flame-gpu-2-program">
<h2>Structure of a FLAME GPU 2 Program<a class="headerlink" href="#structure-of-a-flame-gpu-2-program" title="Permalink to this headline"></a></h2>
<p>FLAME GPU 2 programs are composed of 4 sections:</p>
<ul class="simple">
<li><p>Agent/Host function definitions</p></li>
<li><p>Model Declaration</p></li>
<li><p>Initialisation</p></li>
<li><p>Execution</p></li>
</ul>
<div class="section" id="agent-host-function-definitions">
<h3>Agent/Host Function Definitions<a class="headerlink" href="#agent-host-function-definitions" title="Permalink to this headline"></a></h3>
<p>These functions define the actual behaviours of your model and are normally defined before the <code class="docutils literal notranslate"><span class="pre">main</span></code> function, however larger models can use more advanced techniques to split the model definition across multiple files. Refer to the respective full guides, for more information regarding <a class="reference internal" href="../guide/5-agent-functions/1-defining-agent-functions.html#defining-agent-functions"><span class="std std-ref">agent functions</span></a> and <a class="reference internal" href="../guide/6-host-functions/1-defining-host-functions.html#defining-host-functions"><span class="std std-ref">host functions</span></a>.</p>
</div>
<div class="section" id="model-declaration">
<h3>Model Declaration<a class="headerlink" href="#model-declaration" title="Permalink to this headline"></a></h3>
<p>Normally inside the <code class="docutils literal notranslate"><span class="pre">main</span></code> function or simply the main file if using Python, your model structure is declared. This includes declaration of the required agent and message types for your model. We recommend the following structure for model declaration:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../guide/1-creating-a-model/index.html#defining-a-model"><span class="std std-ref">ModelDescription</span></a></p></li>
<li><p><a class="reference internal" href="../guide/4-defining-messages-communication/index.html#defining-messages"><span class="std std-ref">MessageDescriptions</span></a></p></li>
<li><p><a class="reference internal" href="../guide/3-defining-agents/index.html#defining-agents"><span class="std std-ref">AgentDescriptions</span></a></p></li>
<li><p><a class="reference internal" href="../guide/2-environment/index.html#defining-environmental-properties"><span class="std std-ref">EnvironmentDescription</span></a></p></li>
<li><p><a class="reference internal" href="../guide/7-defining-execution-order/index.html#execution-order"><span class="std std-ref">Function execution order</span></a></p></li>
</ul>
</div>
<div class="section" id="initialisation">
<h3>Initialisation<a class="headerlink" href="#initialisation" title="Permalink to this headline"></a></h3>
<p>In order to execute your model it requires an initial state, this normally means some initial agents and environment properties may need to be setup. There are several ways this can be achieved:</p>
<ul class="simple">
<li><p>Init Function(s), host functions which run once when the simulation begins.</p></li>
<li><p>Input files, a simulation can load agent populations, and environment properties from an input file when it begins.</p></li>
<li><p><a class="reference internal" href="../api/classflamegpu_1_1AgentVector.html#_CPPv4N8flamegpu11AgentVectorE" title="flamegpu::AgentVector"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">AgentVector</span></code></a>, Agent populations and environment properties can be defined externally and set within the <a class="reference internal" href="../api/classflamegpu_1_1CUDASimulation.html#_CPPv4N8flamegpu14CUDASimulationE" title="flamegpu::CUDASimulation"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">CUDASimulation</span></code></a> prior to execution, however this technique is not recommend.</p></li>
</ul>
</div>
<div class="section" id="execution">
<h3>Execution<a class="headerlink" href="#execution" title="Permalink to this headline"></a></h3>
<p>Finally, to run your simulation you must create a <a class="reference internal" href="../api/classflamegpu_1_1CUDASimulation.html#_CPPv4N8flamegpu14CUDASimulationE" title="flamegpu::CUDASimulation"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">CUDASimulation</span></code></a> by providing it your <a class="reference internal" href="../api/classflamegpu_1_1ModelDescription.html#_CPPv4N8flamegpu16ModelDescriptionE" title="flamegpu::ModelDescription"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ModelDescription</span></code></a>. At this stage you can configure the <a class="reference internal" href="../api/classflamegpu_1_1Simulation.html#_CPPv4N8flamegpu10Simulation16SimulationConfigEv" title="flamegpu::Simulation::SimulationConfig"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">simulation</span></code></a> and <a class="reference internal" href="../api/classflamegpu_1_1CUDASimulation.html#_CPPv4N8flamegpu14CUDASimulation10CUDAConfigEv" title="flamegpu::CUDASimulation::CUDAConfig"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">CUDA</span></code></a> settings, alternatively you can provide the <a class="reference internal" href="../guide/8-running-a-simulation/1-configuring-execution.html#configuring-execution"><span class="std std-ref">command line arguments</span></a>. If required, you can also <a class="reference internal" href="../guide/10-visualisation/2-setting-up-vis.html#configuring-visualisation"><span class="std std-ref">setup the visualisation</span></a> for the model.</p>
<p>When ready, you then call <a class="reference internal" href="../api/classflamegpu_1_1CUDASimulation.html#_CPPv4N8flamegpu14CUDASimulation8simulateEv" title="flamegpu::CUDASimulation::simulate"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">simulate()</span></code></a>, to execute your model!</p>
</div>
</div>
<div class="section" id="tutorial-creating-the-circles-model">
<h2>Tutorial: Creating the Circles Model<a class="headerlink" href="#tutorial-creating-the-circles-model" title="Permalink to this headline"></a></h2>
<p>Hopefully at this point you have downloaded and set up one of the example templates.</p>
<div class="section" id="introducing-the-circles-model">
<h3>Introducing The Circles Model<a class="headerlink" href="#introducing-the-circles-model" title="Permalink to this headline"></a></h3>
<p>The Circles model is a simple agent model, where a single type of point agent exists in a 2D or 3D continuous space environment.</p>
<p>The agents observe their neighbours locations, to decide how to move.</p>
<p>The model resolves towards a steady state where agents have formed circular or spherical clusters.</p>
<p>The video below provides a demonstration of the Circles model.</p>
<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/ZedroqmOaHU" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>
<div class="section" id="configuring-cmake">
<h3>Configuring CMake<a class="headerlink" href="#configuring-cmake" title="Permalink to this headline"></a></h3>
<p><em>This stage is only required if you are using C++, or are building pyflamegpu from source.</em></p>
<p>FLAME GPU 2 uses CMake to manage the build process, so we use CMake to generate a build directory which it will fill with build scripts. It can also assist by downloading certain missing dependencies.</p>
<p>The basic commands required differ slightly between Linux and Windows, however in both cases they should be executed in the directory which the template was cloned into:</p>
<p><em>A more detailed guide, regarding building FLAME GPU 2 from source can be found :ref:`here&lt;q-compiling flamegpu&gt;`.</em></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-TGludXggKC5zaCk=" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-0-TGludXggKC5zaCk=" name="TGludXggKC5zaCk=" role="tab" tabindex="0">Linux (.sh)</button><button aria-controls="panel-0-V2luZG93cyAoLmJhdCk=" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-0-V2luZG93cyAoLmJhdCk=" name="V2luZG93cyAoLmJhdCk=" role="tab" tabindex="-1">Windows (.bat)</button></div><div aria-labelledby="tab-0-TGludXggKC5zaCk=" class="sphinx-tabs-panel code-tab group-tab" id="panel-0-TGludXggKC5zaCk=" name="TGludXggKC5zaCk=" role="tabpanel" tabindex="0"><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create the build directory and change into it</span>
mkdir -p build <span class="o">&amp;&amp;</span> <span class="nb">cd</span> build

<span class="c1"># Configure CMake from the command line passing configure-time options.</span>
cmake .. -DCMAKE_BUILD_TYPE<span class="o">=</span>Release -DCUDA_ARCH<span class="o">=</span><span class="m">61</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-V2luZG93cyAoLmJhdCk=" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-0-V2luZG93cyAoLmJhdCk=" name="V2luZG93cyAoLmJhdCk=" role="tabpanel" tabindex="0"><div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="p">:</span><span class="c1">: Create the build directory</span>
<span class="k">mkdir</span> build
<span class="k">cd</span> build

<span class="p">:</span><span class="c1">: Configure CMake from the command line, specifying the -A and -G options. Alternatively use the GUI (see Quickstart guide)</span>
cmake .. -A x64 -G <span class="s2">&quot;Visual Studio 16 2019&quot;</span> -DCUDA_ARCH=61

<span class="p">:</span><span class="c1">: You can then open Visual Studio manually from the .sln file, or via:</span>
cmake --open .
</pre></div>
</div>
</div></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">-DCUDA_ARCH=61</span></code>, configures the build for Pascal GPUs of <code class="docutils literal notranslate"><span class="pre">SM_61</span></code>, you may wish to change this to match your available GPU. Omitting it entirely will produce a larger binary suitable for all current architectures, which essentially multiplies the compile time by the number of architectures. In general, GPUs of newer architecture than specified will run but be limited to the features of the earlier architecture that the program was compiled for.</p>
</div>
<p>The build files for the project should now be created inside the directory <code class="docutils literal notranslate"><span class="pre">build</span></code>.</p>
</div>
<div class="section" id="opening-the-project">
<h3>Opening the Project<a class="headerlink" href="#opening-the-project" title="Permalink to this headline"></a></h3>
<p>Linux C++ users should now open <code class="docutils literal notranslate"><span class="pre">src/main.cu</span></code> in their preferred  text editor or IDE.</p>
<p>Windows C++ users should now open <code class="docutils literal notranslate"><span class="pre">build/example.vcxproj</span></code> with Visual Studio, and subsequently open <code class="docutils literal notranslate"><span class="pre">main.cu</span></code> via the solution explorer panel.</p>
<p>Python users should now open <code class="docutils literal notranslate"><span class="pre">model.py</span></code> in their preferred text editor or IDE.</p>
<p>In every case, we will clear the file only keeping the FLAME GPU include/import statement. This statement allows the file access to the full FLAME GPU 2 library.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-Qysr" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-1-Qysr" name="Qysr" role="tab" tabindex="0">C++</button><button aria-controls="panel-1-UHl0aG9u" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-1-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="-1">Python</button></div><div aria-labelledby="tab-1-Qysr" class="sphinx-tabs-panel code-tab group-tab" id="panel-1-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;flamegpu/flamegpu.h&quot;</span><span class="cp"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-1-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyflamegpu</span>
</pre></div>
</div>
</div></div>
</div>
<div class="section" id="model-description">
<h3>Model Description<a class="headerlink" href="#model-description" title="Permalink to this headline"></a></h3>
<p>The first step to creating a FLAME GPU model is to define the model, this begins by creating a <a class="reference internal" href="../api/classflamegpu_1_1ModelDescription.html#_CPPv4N8flamegpu16ModelDescriptionE" title="flamegpu::ModelDescription"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ModelDescription</span></code></a>. This will be used to describe the entire model, by adding descriptions of messages, agents and the environment.</p>
<p>The only argument which the constructor <a class="reference internal" href="../api/classflamegpu_1_1ModelDescription.html#_CPPv4N8flamegpu16ModelDescription16ModelDescriptionERKNSt6stringE" title="flamegpu::ModelDescription::ModelDescription"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">ModelDescription()</span></code></a> takes is a string representing the name of the model. <em>Currently the name is only used as the default title of the window if a visualisation is created.</em></p>
<p>Normally the <a class="reference internal" href="../api/classflamegpu_1_1ModelDescription.html#_CPPv4N8flamegpu16ModelDescriptionE" title="flamegpu::ModelDescription"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ModelDescription</span></code></a> is defined at the start of program flow. In C++ this means within the <code class="docutils literal notranslate"><span class="pre">main()</span></code> method, whereas in Python this can simply be within the main file (Python does allow an entry function to be specified).</p>
<p>Before the model description, we will also define two (constant) variables, to define the environment dimensions and the number of agents. These values will be used in a few places, so it is useful name them.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-Qysr" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-2-Qysr" name="Qysr" role="tab" tabindex="0">C++</button><button aria-controls="panel-2-UHl0aG9u" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-2-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="-1">Python</button></div><div aria-labelledby="tab-2-Qysr" class="sphinx-tabs-panel code-tab group-tab" id="panel-2-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;flamegpu/flamegpu.h&quot;</span><span class="cp"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="n">argv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Define some useful constants</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">AGENT_COUNT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16384</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">ENV_WIDTH</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">floor</span><span class="p">(</span><span class="n">cbrt</span><span class="p">(</span><span class="n">AGENT_COUNT</span><span class="p">)));</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Define the FLAME GPU model</span>
<span class="w">    </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">ModelDescription</span><span class="w"> </span><span class="n">model</span><span class="p">(</span><span class="s">&quot;Circles Tutorial&quot;</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-2-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-2-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyflamegpu</span>

<span class="c1"># Define some useful constants</span>
<span class="n">AGENT_COUNT</span> <span class="o">=</span> <span class="mi">16384</span>
<span class="n">ENV_WIDTH</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">AGENT_COUNT</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">))</span>

<span class="c1"># Define the FLAME GPU model</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">pyflamegpu</span><span class="o">.</span><span class="n">ModelDescription</span><span class="p">(</span><span class="s2">&quot;Circles Tutorial&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></div>
</div>
<div class="section" id="message-description">
<h3>Message Description<a class="headerlink" href="#message-description" title="Permalink to this headline"></a></h3>
<p>Next we must decide how the agents will communicate. This is normally completed before agents, as agent functions refer back to messages, so they must be described first.</p>
<p>As the agents within the Circles model exist in a continuous space and want to find their local neighbours, there are three potential message types suited to the model:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../api/classflamegpu_1_1MessageBruteForce.html#_CPPv4N8flamegpu17MessageBruteForceE" title="flamegpu::MessageBruteForce"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">MessageBruteForce</span></code></a>: Every agent reads every message, this is very expensive with a large number of messages/agents.</p></li>
<li><p><a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial2D.html#_CPPv4N8flamegpu16MessageSpatial2DE" title="flamegpu::MessageSpatial2D"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">MessageSpatial2D</span></code></a>: Each agent outputs a message at a specific location in 2D space, agents only read messages located close to a particular search origin.</p></li>
<li><p><a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial3D.html#_CPPv4N8flamegpu16MessageSpatial3DE" title="flamegpu::MessageSpatial3D"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">MessageSpatial3D</span></code></a>: Each agent outputs a message at a specific location in 3D space, agents only read messages located close to a particular search origin.</p></li>
</ul>
<p>We will implement the Circles model in 2D during this tutorial, therefore <a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial2D.html#_CPPv4N8flamegpu16MessageSpatial2DE" title="flamegpu::MessageSpatial2D"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">MessageSpatial2D</span></code></a> will be the most appropriate message type. Although, later extending the model to 3D should require minimal changes.</p>
<p>In order to create a <a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial2D.html#_CPPv4N8flamegpu16MessageSpatial2D11DescriptionE" title="flamegpu::MessageSpatial2D::Description"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">MessageSpatial2D::Description</span></code></a>, <a class="reference internal" href="../api/classflamegpu_1_1ModelDescription.html#_CPPv4I0EN8flamegpu16ModelDescription10newMessageERN11MessageType11DescriptionERKNSt6stringE" title="flamegpu::ModelDescription::newMessage"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">newMessage()</span></code></a> must be called on the previously created <a class="reference internal" href="../api/classflamegpu_1_1ModelDescription.html#_CPPv4N8flamegpu16ModelDescriptionE" title="flamegpu::ModelDescription"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ModelDescription</span></code></a>. This is a templated function, so it must be called with the template argument of the name of the desired message type, in our case <a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial2D.html#_CPPv4N8flamegpu16MessageSpatial2DE" title="flamegpu::MessageSpatial2D"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">MessageSpatial2D</span></code></a>. Additionally, the sole argument is a string representing the name of the message, this can be used later on when attaching the message as an input or output to an <a class="reference internal" href="../api/classflamegpu_1_1AgentFunctionDescription.html#_CPPv4N8flamegpu24AgentFunctionDescriptionE" title="flamegpu::AgentFunctionDescription"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">AgentFunctionDescription</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Python interface does not support C++’s templates and nested classes so there are differences in naming style. In almost all cases the template argument is simply appended to the name.</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>C++</p></th>
<th class="head"><p>Python</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="../api/classflamegpu_1_1ModelDescription.html#_CPPv4I0EN8flamegpu16ModelDescription10newMessageERN11MessageType11DescriptionERKNSt6stringE" title="flamegpu::ModelDescription::newMessage"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">newMessage&lt;flamegpu::MessageSpatial2D&gt;()</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">newMessageSpatial2D()</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial2D.html#_CPPv4N8flamegpu16MessageSpatial2D11DescriptionE" title="flamegpu::MessageSpatial2D::Description"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">MessageSpatial2D::Description</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MessageSpatial2DDescription</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api/classflamegpu_1_1MessageBruteForce.html#_CPPv4I0EN8flamegpu17MessageBruteForce11Description11newVariableEvRKNSt6stringE" title="template&lt;typename T&gt; void flamegpu::MessageBruteForce::Description::newVariable(const std::string&amp;)"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">newVariable&lt;flamegpu::id_t&gt;()</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">newVariableID()</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/classflamegpu_1_1MessageBruteForce.html#_CPPv4I0_N11MessageNone9size_typeEEN8flamegpu17MessageBruteForce11Description11newVariableEvRKNSt6stringE" title="template&lt;typename T, MessageNone::size_type N&gt; void flamegpu::MessageBruteForce::Description::newVariable(const std::string&amp;)"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">message.newVariable&lt;int,</span> <span class="pre">3&gt;(&quot;vector3&quot;);</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">message.newVariableArrayInt(&quot;vector3&quot;,</span> <span class="pre">3)</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<p>Spatial messages have some settings which must be specified prior to use.</p>
<p>The environment bounds must be specified using <a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial2D.html#_CPPv4N8flamegpu16MessageSpatial2D11Description6setMinERKfRKf" title="flamegpu::MessageSpatial2D::Description::setMin"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">setMin()</span></code></a> and <a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial2D.html#_CPPv4N8flamegpu16MessageSpatial2D11Description6setMaxERKfRKf" title="flamegpu::MessageSpatial2D::Description::setMax"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">setMax()</span></code></a>. Spatial messages can be emit at any location, however for best performance the specified bounds should encapsulate all messages. For this reason, we will make the bounds of the environment run from <code class="docutils literal notranslate"><span class="pre">0</span></code> to <code class="docutils literal notranslate"><span class="pre">ENV_WIDTH</span></code>, that we declared in the previous step.</p>
<p>A search radius must also be specified, using <a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial2D.html#_CPPv4N8flamegpu16MessageSpatial2D11Description9setRadiusERKf" title="flamegpu::MessageSpatial2D::Description::setRadius"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">setRadius()</span></code></a>, this is the distance from the search origin that messages must be within to be returned. This radius is used to subdivide the covered environmental area into a discrete grid, messages are then stored according to their position within the grid. For the purposes of this tutorial we will use a radius of <code class="docutils literal notranslate"><span class="pre">2</span></code>, however you can experiment with changing the value later.</p>
<p>As messages are used for communication, you will normally want to add variables to them too. As the Circles model is simple, the location implicitly provided by the message is enough. However, we will also add a variable to store the sending agent’s ID. This can be used, to ensure agent’s don’t handle their own messages. Variables are added using <a class="reference internal" href="../api/classflamegpu_1_1MessageBruteForce.html#_CPPv4I0EN8flamegpu17MessageBruteForce11Description11newVariableEvRKNSt6stringE" title="template&lt;typename T&gt; void flamegpu::MessageBruteForce::Description::newVariable(const std::string&amp;)"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">newVariable()</span></code></a>, again this is a templated function where the template argument is the type to be used for the variable, and the only regular argument to the function is the variable’s name.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FLAME GPU 2 messages (and agents) may also have array variables.</p>
<p>In C++, a second template argument is passed to <code class="docutils literal notranslate"><span class="pre">newVariable()</span></code>, e.g. <code class="docutils literal notranslate"><span class="pre">message.newVariable&lt;int,</span> <span class="pre">3&gt;(&quot;vector3&quot;);</span></code>.</p>
<p>In Python, a second argument is passed to <code class="docutils literal notranslate"><span class="pre">newVariableArray()</span></code>, e.g. <code class="docutils literal notranslate"><span class="pre">message.newVariableArrayInt(&quot;vector3&quot;,</span> <span class="pre">3)</span></code>.</p>
</div>
<p>FLAME GPU provides a special type for agent IDs, this is referred to as <a class="reference internal" href="../api/typedef_namespaceflamegpu_1aa38504d5d161ede66606cf62524fb9e2.html#_CPPv4N8flamegpu4id_tE" title="flamegpu::id_t"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">flamegpu::id_t</span></code></a> and <code class="docutils literal notranslate"><span class="pre">ID</span></code> in the C++ and Python interfaces respectively.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-3-Qysr" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-3-Qysr" name="Qysr" role="tab" tabindex="0">C++</button><button aria-controls="panel-3-UHl0aG9u" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-3-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="-1">Python</button></div><div aria-labelledby="tab-3-Qysr" class="sphinx-tabs-panel code-tab group-tab" id="panel-3-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Define the FLAME GPU model</span>
<span class="w">    </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">ModelDescription</span><span class="w"> </span><span class="n">model</span><span class="p">(</span><span class="s">&quot;Circles Tutorial&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="p">{</span><span class="w">   </span><span class="c1">// (optional local scope block for cleaner grouping)</span>
<span class="w">        </span><span class="c1">// Define a message of type MessageSpatial2D named location</span>
<span class="w">        </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">MessageSpatial2D</span><span class="o">::</span><span class="n">Description</span><span class="w"> </span><span class="o">&amp;</span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">model</span><span class="p">.</span><span class="n">newMessage</span><span class="o">&lt;</span><span class="n">flamegpu</span><span class="o">::</span><span class="n">MessageSpatial2D</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;location&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Configure the message list</span>
<span class="w">        </span><span class="n">message</span><span class="p">.</span><span class="n">setMin</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">message</span><span class="p">.</span><span class="n">setMax</span><span class="p">(</span><span class="n">ENV_WIDTH</span><span class="p">,</span><span class="w"> </span><span class="n">ENV_WIDTH</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">message</span><span class="p">.</span><span class="n">setRadius</span><span class="p">(</span><span class="mf">1.0f</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Add extra variables to the message</span>
<span class="w">        </span><span class="c1">// X Y (Z) are implicit for spatial messages</span>
<span class="w">        </span><span class="n">message</span><span class="p">.</span><span class="n">newVariable</span><span class="o">&lt;</span><span class="n">flamegpu</span><span class="o">::</span><span class="kt">id_t</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-3-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-3-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="c1"># Define the FLAME GPU model</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">pyflamegpu</span><span class="o">.</span><span class="n">ModelDescription</span><span class="p">(</span><span class="s2">&quot;Circles Tutorial&quot;</span><span class="p">)</span>

<span class="c1"># Define a message of type MessageSpatial2D named location</span>
<span class="n">message</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">newMessageSpatial2D</span><span class="p">(</span><span class="s2">&quot;location&quot;</span><span class="p">)</span>
<span class="c1"># Configure the message list</span>
<span class="n">message</span><span class="o">.</span><span class="n">setMin</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">message</span><span class="o">.</span><span class="n">setMax</span><span class="p">(</span><span class="n">ENV_WIDTH</span><span class="p">,</span> <span class="n">ENV_WIDTH</span><span class="p">)</span>
<span class="n">message</span><span class="o">.</span><span class="n">setRadius</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># Add extra variables to the message</span>
<span class="c1"># X Y (Z) are implicit for spatial messages</span>
<span class="n">message</span><span class="o">.</span><span class="n">newVariableID</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></div>
</div>
<div class="section" id="agent-description">
<h3>Agent Description<a class="headerlink" href="#agent-description" title="Permalink to this headline"></a></h3>
<p>Now it’s time to define the agents. In FLAME GPU agents are a collection of variables, agent functions and optionally states. The Circles model is not stateful so their usage will not be covered here, however you can read more about agent states <a class="reference internal" href="../guide/3-defining-agents/index.html#agent-states"><span class="std std-ref">here</span></a>.</p>
<p>In order to define a new <a class="reference internal" href="../api/classflamegpu_1_1AgentDescription.html#_CPPv4N8flamegpu16AgentDescriptionE" title="flamegpu::AgentDescription"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">AgentDescription</span></code></a> type, similar to defining a new message type, <a class="reference internal" href="../api/classflamegpu_1_1ModelDescription.html#_CPPv4N8flamegpu16ModelDescription8newAgentERKNSt6stringE" title="flamegpu::ModelDescription::newAgent"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">newAgent()</span></code></a> must be called on the previously created <a class="reference internal" href="../api/classflamegpu_1_1ModelDescription.html#_CPPv4N8flamegpu16ModelDescriptionE" title="flamegpu::ModelDescription"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ModelDescription</span></code></a>. The sole argument is a string representing the name of the agent, this name is used when referring to the agent type later on (e.g. in host functions). For the Circles model, we will simply name the sole agent type <code class="docutils literal notranslate"><span class="pre">&quot;point&quot;</span></code>.</p>
<p>Adding variables to an agent is very similar to adding variables to a message, <a class="reference internal" href="../api/classflamegpu_1_1AgentDescription.html#_CPPv4I0EN8flamegpu16AgentDescription11newVariableEvRKNSt6stringERK1T" title="template&lt;typename T&gt; void flamegpu::AgentDescription::newVariable(const std::string&amp;, const T&amp;)"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">newVariable()</span></code></a> is called providing the variable’s type, name and optionally a default value. If provided, this default value will be assigned to any newly created/birthed agents. Adding array variables to agent’s follows the some rules as explained in the previous section, however they may also have default values specified.</p>
<p>The Circles model requires a location, so we can add three <code class="docutils literal notranslate"><span class="pre">float</span></code> variables to represent this. Additionally, we will add a fourth <code class="docutils literal notranslate"><span class="pre">float</span></code> named <code class="docutils literal notranslate"><span class="pre">&quot;drift&quot;</span></code>, this isn’t required but can be used to provide us something measurable if not using the visualisation.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-4-Qysr" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-4-Qysr" name="Qysr" role="tab" tabindex="0">C++</button><button aria-controls="panel-4-UHl0aG9u" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-4-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="-1">Python</button></div><div aria-labelledby="tab-4-Qysr" class="sphinx-tabs-panel code-tab group-tab" id="panel-4-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="w">        </span><span class="n">message</span><span class="p">.</span><span class="n">newVariable</span><span class="o">&lt;</span><span class="n">flamegpu</span><span class="o">::</span><span class="kt">id_t</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Define an agent named point</span>
<span class="w">    </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">AgentDescription</span><span class="w"> </span><span class="o">&amp;</span><span class="n">agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">model</span><span class="p">.</span><span class="n">newAgent</span><span class="p">(</span><span class="s">&quot;point&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Assign the agent some variables (ID is implicit to agents, so we don&#39;t define it ourselves)</span>
<span class="w">    </span><span class="n">agent</span><span class="p">.</span><span class="n">newVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">agent</span><span class="p">.</span><span class="n">newVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">agent</span><span class="p">.</span><span class="n">newVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;z&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">agent</span><span class="p">.</span><span class="n">newVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;drift&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-4-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-4-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="n">message</span><span class="o">.</span><span class="n">newVariableID</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>

<span class="c1"># Define an agent named point</span>
<span class="n">agent</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">newAgent</span><span class="p">(</span><span class="s2">&quot;point&quot;</span><span class="p">)</span>
<span class="c1"># Assign the agent some variables (ID is implicit to agents, so we don&#39;t define it ourselves)</span>
<span class="n">agent</span><span class="o">.</span><span class="n">newVariableFloat</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">)</span>
<span class="n">agent</span><span class="o">.</span><span class="n">newVariableFloat</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">)</span>
<span class="n">agent</span><span class="o">.</span><span class="n">newVariableFloat</span><span class="p">(</span><span class="s2">&quot;z&quot;</span><span class="p">)</span>
<span class="n">agent</span><span class="o">.</span><span class="n">newVariableFloat</span><span class="p">(</span><span class="s2">&quot;drift&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div></div>
<p>We’ll return to this block of code when we work on the agent functions.</p>
</div>
<div class="section" id="environment-description">
<h3>Environment Description<a class="headerlink" href="#environment-description" title="Permalink to this headline"></a></h3>
<p>In FLAME GPU, the environment represents state outside of the agents. Agent’s have read-only access to the environment’s properties, they can only be updated by <a class="reference internal" href="../guide/6-host-functions/index.html#host-functions-and-conditions"><span class="std std-ref">host functions</span></a>. Additionally, FLAME GPU 2 adds environment macro properties for representing larger environmental data which agent’s have limited access to update, this advanced feature is not covered in the tutorial but can be explored <a class="reference internal" href="../guide/2-environment/index.html#define-macro-environmental-properties"><span class="std std-ref">here</span></a>.</p>
<p>Before we can add properties to the environment, we need to fetch the <a class="reference internal" href="../api/classflamegpu_1_1EnvironmentDescription.html#_CPPv4N8flamegpu22EnvironmentDescriptionE" title="flamegpu::EnvironmentDescription"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">EnvironmentDescription</span></code></a> from the <a class="reference internal" href="../api/classflamegpu_1_1ModelDescription.html#_CPPv4N8flamegpu16ModelDescriptionE" title="flamegpu::ModelDescription"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ModelDescription</span></code></a> using <a class="reference internal" href="../api/classflamegpu_1_1ModelDescription.html#_CPPv4N8flamegpu16ModelDescription11EnvironmentEv" title="flamegpu::ModelDescription::Environment"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Environment()</span></code></a>.</p>
<p>Following this, much like with messages and agents, <a class="reference internal" href="../api/classflamegpu_1_1EnvironmentDescription.html#_CPPv4I0EN8flamegpu22EnvironmentDescription11newPropertyEvRKNSt6stringE1Tb" title="template&lt;typename T&gt; void flamegpu::EnvironmentDescription::newProperty(const std::string&amp;, T, bool)"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">newProperty()</span></code></a> is used to add properties to the model’s environment. However, an initial value <strong>must</strong> be specified as the second argument.</p>
<p>The Circles model only requires a single environmental property which we will call repulse, this <code class="docutils literal notranslate"><span class="pre">float</span></code> property is merely a constant for tuning the force (indirectly the resolution speed) of the model. Initially, it can be set to <code class="docutils literal notranslate"><span class="pre">0.05</span></code>.</p>
<p>Additionally, we will add the two constants we defined earlier so that they are made available within the model.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FLAME GPU 2 allows environment properties to be marked as <code class="docutils literal notranslate"><span class="pre">const</span></code>, this prevents them from ever being updated accidentally. This intended for use with values such as mathematical constants. This can be enabled by passing <code class="docutils literal notranslate"><span class="pre">true</span></code> (C++) or <code class="docutils literal notranslate"><span class="pre">True</span></code> (Python) as the 3rd argument to <a class="reference internal" href="../api/classflamegpu_1_1EnvironmentDescription.html#_CPPv4I0EN8flamegpu22EnvironmentDescription11newPropertyEvRKNSt6stringE1Tb" title="template&lt;typename T&gt; void flamegpu::EnvironmentDescription::newProperty(const std::string&amp;, T, bool)"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">newProperty()</span></code></a>.</p>
</div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-5-Qysr" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-5-Qysr" name="Qysr" role="tab" tabindex="0">C++</button><button aria-controls="panel-5-UHl0aG9u" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-5-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="-1">Python</button></div><div aria-labelledby="tab-5-Qysr" class="sphinx-tabs-panel code-tab group-tab" id="panel-5-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="w">    </span><span class="n">agent</span><span class="p">.</span><span class="n">newVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;drift&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="p">{</span><span class="w">   </span><span class="c1">// (optional local scope block for cleaner grouping)</span>
<span class="w">        </span><span class="c1">// Define environment properties</span>
<span class="w">        </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">EnvironmentDescription</span><span class="w"> </span><span class="o">&amp;</span><span class="n">env</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">model</span><span class="p">.</span><span class="n">Environment</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="n">env</span><span class="p">.</span><span class="n">newProperty</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;AGENT_COUNT&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">AGENT_COUNT</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">env</span><span class="p">.</span><span class="n">newProperty</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;ENV_WIDTH&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ENV_WIDTH</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">env</span><span class="p">.</span><span class="n">newProperty</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;repulse&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">0.05f</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-5-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-5-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="n">agent</span><span class="o">.</span><span class="n">newVariableFloat</span><span class="p">(</span><span class="s2">&quot;drift&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="c1"># Define environment properties</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Environment</span><span class="p">()</span>
<span class="n">env</span><span class="o">.</span><span class="n">newPropertyUInt</span><span class="p">(</span><span class="s2">&quot;AGENT_COUNT&quot;</span><span class="p">,</span> <span class="n">AGENT_COUNT</span><span class="p">)</span>
<span class="n">env</span><span class="o">.</span><span class="n">newPropertyFloat</span><span class="p">(</span><span class="s2">&quot;ENV_WIDTH&quot;</span><span class="p">,</span> <span class="n">ENV_WIDTH</span><span class="p">)</span>
<span class="n">env</span><span class="o">.</span><span class="n">newPropertyFloat</span><span class="p">(</span><span class="s2">&quot;repulse&quot;</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">)</span>
</pre></div>
</div>
</div></div>
</div>
<div class="section" id="agent-function-description-implementation">
<h3>Agent Function Description &amp; Implementation<a class="headerlink" href="#agent-function-description-implementation" title="Permalink to this headline"></a></h3>
<p>Now that we’ve defined the messages, agents and environment for the Circles model, it’s time to implement the behaviours of our agents and make use of them.</p>
<p>In FLAME GPU 2, agent functions are implemented using the <a class="reference internal" href="../api/define_AgentFunction__shim_8cuh_1a1c067606a392fd111d240d55377e79a9.html#c.FLAMEGPU_AGENT_FUNCTION" title="FLAMEGPU_AGENT_FUNCTION"><code class="xref c c-macro docutils literal notranslate"><span class="pre">FLAMEGPU_AGENT_FUNCTION(name,</span> <span class="pre">input_message,</span> <span class="pre">output_message)</span></code></a> macro function. It is expanded by the compiler, to produce the full definition of an agent function (see it’s API documentation for an example of it’s expansion). However, for our usage we simply need to provide it three parameters; the function’s name, the function’s message input style and the function’s message output style. Then the function can be implemented from this, with the macro call being treated as the function’s prototype.</p>
<p>We will start by implementing the agent function, whereby each agent outputs a message sharing their location.</p>
<p>We will name the function <code class="docutils literal notranslate"><span class="pre">output_message</span></code> (the name should not be wrapped in quotes), it does not have a message input so <a class="reference internal" href="../api/classflamegpu_1_1MessageNone.html#_CPPv4N8flamegpu11MessageNoneE" title="flamegpu::MessageNone"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">flamegpu::MessageNone</span></code></a> is used for the input message argument and we’re outputting the spatial 2D message we defined above so <a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial2D.html#_CPPv4N8flamegpu16MessageSpatial2DE" title="flamegpu::MessageSpatial2D"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">flamegpu::MessageSpatial2D</span></code></a> is used for the output message argument.</p>
<p>Following this, we can implement the agent function body. Agent functions are provided a single input argument, <code class="docutils literal notranslate"><span class="pre">FLAMEGPU</span></code> which is a pointer to the <a class="reference internal" href="../api/classflamegpu_1_1DeviceAPI.html#_CPPv4I00EN8flamegpu9DeviceAPIE" title="flamegpu::DeviceAPI"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">DeviceAPI</span></code></a>, this object provides access to all available FLAME GPU features (agent variables, message input/output, environment properties, agent output, random) within agent functions.</p>
<p>To implement the output message agent function we need to read the agents location (<code class="docutils literal notranslate"><span class="pre">&quot;x&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;y&quot;</span></code>) variables and ID, and then set the message’s location and <code class="docutils literal notranslate"><span class="pre">&quot;id&quot;</span></code> variable.</p>
<p>To read an agent’s variables the <a class="reference internal" href="../api/classflamegpu_1_1DeviceAPI.html#_CPPv4I0_jENK8flamegpu9DeviceAPI11getVariableE1TRA1N_Kc" title="template&lt;typename T, unsigned int N&gt; __device__ T flamegpu::DeviceAPI::getVariable(const char (&amp;)[N]) const"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">FLAMEGPU-&gt;getVariable()</span></code></a> function is used. As you may expect by now, the variable’s type must be passed as a template argument, and it’s name is the only argument. To read an agent’s ID, <a class="reference internal" href="../api/classflamegpu_1_1DeviceAPI.html#_CPPv4N8flamegpu9DeviceAPI5getIDEv" title="flamegpu::DeviceAPI::getID"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">FLAMEGPU-&gt;getID()</span></code></a> is called, this special function requires no additional arguments.</p>
<p>Functionality for the message output is accessed via <code class="docutils literal notranslate"><span class="pre">FLAMEGPU-&gt;message_out</span></code>, this object is specialised depending on the output message type originally specified in the <a class="reference internal" href="../api/define_AgentFunction__shim_8cuh_1a1c067606a392fd111d240d55377e79a9.html#c.FLAMEGPU_AGENT_FUNCTION" title="FLAMEGPU_AGENT_FUNCTION"><code class="xref c c-macro docutils literal notranslate"><span class="pre">FLAMEGPU_AGENT_FUNCTION</span></code></a> macro. The spatial 2D specialisation, <a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial2D.html#_CPPv4N8flamegpu16MessageSpatial2D3OutE" title="flamegpu::MessageSpatial2D::Out"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">flamegpu::MessageSpatial2D::Out</span></code></a>, has two available functions; <a class="reference internal" href="../api/classflamegpu_1_1MessageBruteForce.html#_CPPv4I0_jENK8flamegpu17MessageBruteForce3Out11setVariableEvRA1N_Kc1T" title="template&lt;typename T, unsigned int N&gt; __device__ void flamegpu::MessageBruteForce::Out::setVariable(const char (&amp;)[N], T) const"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">setVariable()</span></code></a> which is common to all message output types, and <a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial2D.html#_CPPv4NK8flamegpu16MessageSpatial2D3Out11setLocationERKfRKf" title="flamegpu::MessageSpatial2D::Out::setLocation"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">setLocation()</span></code></a> which takes two <code class="docutils literal notranslate"><span class="pre">float</span></code> arguments specifying the location of the message in 2D space.</p>
<p>Finally, all agent functions must return either <a class="reference internal" href="../api/enum_namespaceflamegpu_1a1adc39b89f4a6045c011c55a91339e4c.html#_CPPv4N8flamegpu12AGENT_STATUS5ALIVEE" title="flamegpu::AGENT_STATUS::ALIVE"><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">flamegpu::ALIVE</span></code></a> or <a class="reference internal" href="../api/enum_namespaceflamegpu_1a1adc39b89f4a6045c011c55a91339e4c.html#_CPPv4N8flamegpu12AGENT_STATUS4DEADE" title="flamegpu::AGENT_STATUS::DEAD"><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">flamegpu::DEAD</span></code></a>. Unless the agent function is specified to support agent death inside the <a class="reference internal" href="../api/classflamegpu_1_1AgentFunctionDescription.html#_CPPv4N8flamegpu24AgentFunctionDescriptionE" title="flamegpu::AgentFunctionDescription"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">AgentFunctionDescription</span></code></a> via <a class="reference internal" href="../api/classflamegpu_1_1AgentFunctionDescription.html#_CPPv4N8flamegpu24AgentFunctionDescription18setAllowAgentDeathERKb" title="flamegpu::AgentFunctionDescription::setAllowAgentDeath"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">setAllowAgentDeath()</span></code></a>, <a class="reference internal" href="../api/enum_namespaceflamegpu_1a1adc39b89f4a6045c011c55a91339e4c.html#_CPPv4N8flamegpu12AGENT_STATUS5ALIVEE" title="flamegpu::AGENT_STATUS::ALIVE"><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">flamegpu::ALIVE</span></code></a> should be returned. If <a class="reference internal" href="../api/enum_namespaceflamegpu_1a1adc39b89f4a6045c011c55a91339e4c.html#_CPPv4N8flamegpu12AGENT_STATUS4DEADE" title="flamegpu::AGENT_STATUS::DEAD"><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">flamegpu::DEAD</span></code></a> is returned, without agent death being enabled, an exception will be raised if <code class="docutils literal notranslate"><span class="pre">SEATBELTS</span></code> error checking is enabled.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FLAME GPUs Python API performs runtime compilation of the CUDA agent functions. Therefore, in contrast to the C++ API, agent functions must be written as Python strings.</p>
<p>Runtime compilation adds a small additional cost to the initial execution of an agent function, due to compilation. However, FLAME GPU caches compiled agent functions to remove this for repeated runs (if the agent function/model has not changed).</p>
</div>
<p>Below you can see how the message output function may be assembled. Normally, agent functions would be implemented near the top of the source file directly after any includes.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-6-Qysr" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-6-Qysr" name="Qysr" role="tab" tabindex="0">C++</button><button aria-controls="panel-6-UHl0aG9u" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-6-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="-1">Python</button></div><div aria-labelledby="tab-6-Qysr" class="sphinx-tabs-panel code-tab group-tab" id="panel-6-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;flamegpu/flamegpu.h&quot;</span><span class="cp"></span>

<span class="c1">// Agent Function to output the agents ID and position in to a 2D spatial message list</span>
<span class="n">FLAMEGPU_AGENT_FUNCTION</span><span class="p">(</span><span class="n">output_message</span><span class="p">,</span><span class="w"> </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">MessageNone</span><span class="p">,</span><span class="w"> </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">MessageSpatial2D</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">message_out</span><span class="p">.</span><span class="n">setVariable</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">getID</span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">message_out</span><span class="p">.</span><span class="n">setLocation</span><span class="p">(</span><span class="w"></span>
<span class="w">        </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">getVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">),</span><span class="w"></span>
<span class="w">        </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">getVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">ALIVE</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-6-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-6-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyflamegpu</span>

<span class="c1"># Agent Function to output the agents ID and position in to a 2D spatial message list</span>
<span class="n">output_message</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">FLAMEGPU_AGENT_FUNCTION(output_message, flamegpu::MessageNone, flamegpu::MessageSpatial2D) {</span>
<span class="s2">    FLAMEGPU-&gt;message_out.setVariable&lt;flamegpu::id_t&gt;(&quot;id&quot;, FLAMEGPU-&gt;getID());</span>
<span class="s2">    FLAMEGPU-&gt;message_out.setLocation(</span>
<span class="s2">        FLAMEGPU-&gt;getVariable&lt;float&gt;(&quot;x&quot;),</span>
<span class="s2">        FLAMEGPU-&gt;getVariable&lt;float&gt;(&quot;y&quot;));</span>
<span class="s2">    return flamegpu::ALIVE;</span>
<span class="s2">}</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="o">...</span>
</pre></div>
</div>
</div></div>
<p>Next the message input agent function is implemented, two new concepts are introduced here: the message input iterator and accessing environment properties.</p>
<p>Each FLAME GPU message type provides unique methods for accessing messages, in this case we are using the <a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial2D.html#_CPPv4N8flamegpu16MessageSpatial2DE" title="flamegpu::MessageSpatial2D"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">MessageSpatial2D</span></code></a> type. Refer to the <a class="reference internal" href="../guide/5-agent-functions/4-agent-communication.html#device-agent-communication"><span class="std std-ref">agent communication guide</span></a> for details of other messaging format’s usage.</p>
<p>The only way to access spatial messaging types is via an iterator, which returns all messages in a Moore neighbourhood about the provided search location. This means, that all messages within the originally specified search radius will be returned, however it is necessary for the user to filter out the small number of messages which fall outside of this radius that will also be returned. Furthermore, agent’s will also be returned their own message, so may wish to filter out that too.</p>
<p>The spatial message iterator is accessed using <a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial2D.html#_CPPv4NK8flamegpu16MessageSpatial2D2InclERKfRKf" title="flamegpu::MessageSpatial2D::In::operator()"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">FLAMEGPU-&gt;message_in()</span></code></a>, this takes two <code class="docutils literal notranslate"><span class="pre">float</span></code> parameters specifying the search origin. Normally this will be passed directly to a C++ range-based for loop (e.g. <code class="docutils literal notranslate"><span class="pre">or</span> <span class="pre">(const</span> <span class="pre">auto</span> <span class="pre">&amp;message</span> <span class="pre">:</span> <span class="pre">FLAMEGPU-&gt;message_in(my_x,</span> <span class="pre">my_y))</span> <span class="pre">{</span></code>), allowing the returned messages to be iterated.</p>
<p>In the case of <a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial2D.html#_CPPv4N8flamegpu16MessageSpatial2DE" title="flamegpu::MessageSpatial2D"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">MessageSpatial2D</span></code></a>, the returned <a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial2D.html#_CPPv4N8flamegpu16MessageSpatial2D2In6Filter7MessageE" title="flamegpu::MessageSpatial2D::In::Filter::Message"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">Message</span></code></a> objects only provide <a class="reference internal" href="../api/classflamegpu_1_1MessageSpatial2D.html#_CPPv4I0_jENK8flamegpu16MessageSpatial2D2In6Filter7Message11getVariableE1TRA1N_Kc" title="template&lt;typename T, unsigned int N&gt; __device__ T flamegpu::MessageSpatial2D::In::Filter::Message::getVariable(const char (&amp;)[N]) const"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">getVariable()</span></code></a> methods for returning the variables and array variables stored within the message.</p>
<p>Accessing environment properties is very similar to accessing agent and message variables, <a class="reference internal" href="../api/classflamegpu_1_1ReadOnlyDeviceEnvironment.html#_CPPv4I0_jENK8flamegpu25ReadOnlyDeviceEnvironment11getPropertyE1TRA1N_Kc" title="template&lt;typename T, unsigned int N&gt; T flamegpu::ReadOnlyDeviceEnvironment::getProperty(const char (&amp;)[N]) const"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">getProperty()</span></code></a> is called on <a class="reference internal" href="../api/classflamegpu_1_1DeviceEnvironment.html#_CPPv4N8flamegpu17DeviceEnvironmentE" title="flamegpu::DeviceEnvironment"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">FLAMEGPU-&gt;environment</span></code></a>.</p>
<p>The remainder of the Circles model’s message input agent function contains some model specific maths, so you should simply use the code provided below. However, give it a thorough read to check you understand how the messages are being read.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-7-Qysr" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-7-Qysr" name="Qysr" role="tab" tabindex="0">C++</button><button aria-controls="panel-7-UHl0aG9u" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-7-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="-1">Python</button></div><div aria-labelledby="tab-7-Qysr" class="sphinx-tabs-panel code-tab group-tab" id="panel-7-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">ALIVE</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// Agent Function to read the location messages and decide how the agent should move</span>
<span class="n">FLAMEGPU_AGENT_FUNCTION</span><span class="p">(</span><span class="n">input_message</span><span class="p">,</span><span class="w"> </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">MessageSpatial2D</span><span class="p">,</span><span class="w"> </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">MessageNone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">flamegpu</span><span class="o">::</span><span class="kt">id_t</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">getID</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">REPULSE_FACTOR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">environment</span><span class="p">.</span><span class="n">getProperty</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;repulse&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">RADIUS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">message_in</span><span class="p">.</span><span class="n">radius</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">fx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">fy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">x1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">getVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">y1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">getVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="o">&amp;</span><span class="n">message</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">message_in</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="n">y1</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">message</span><span class="p">.</span><span class="n">getVariable</span><span class="o">&lt;</span><span class="n">flamegpu</span><span class="o">::</span><span class="kt">id_t</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">ID</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">x2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">message</span><span class="p">.</span><span class="n">getVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">y2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">message</span><span class="p">.</span><span class="n">getVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="kt">float</span><span class="w"> </span><span class="n">x21</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">x1</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="kt">float</span><span class="w"> </span><span class="n">y21</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">y1</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">separation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqrt</span><span class="p">(</span><span class="n">x21</span><span class="o">*</span><span class="n">x21</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y21</span><span class="o">*</span><span class="n">y21</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">separation</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">RADIUS</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">separation</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="kt">float</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sinf</span><span class="p">((</span><span class="n">separation</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">RADIUS</span><span class="p">)</span><span class="o">*</span><span class="mf">3.141f</span><span class="o">*</span><span class="mi">-2</span><span class="p">)</span><span class="o">*</span><span class="n">REPULSE_FACTOR</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="c1">// Normalise without recalculating separation</span>
<span class="w">                </span><span class="n">x21</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="n">separation</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">y21</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="n">separation</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">fx</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">x21</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">fy</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">y21</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">count</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="n">fx</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">fy</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">setVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">fx</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">setVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">y1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">fy</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">setVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;drift&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">sqrt</span><span class="p">(</span><span class="n">fx</span><span class="o">*</span><span class="n">fx</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">fy</span><span class="o">*</span><span class="n">fy</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">ALIVE</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-7-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-7-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span>...
    return flamegpu::ALIVE;
}
&quot;&quot;&quot;

# Agent Function to read the location messages and decide how the agent should move
input_message = r&quot;&quot;&quot;
FLAMEGPU_AGENT_FUNCTION(input_message, flamegpu::MessageSpatial2D, flamegpu::MessageNone) {
    const flamegpu::id_t ID = FLAMEGPU-&gt;getID();
    const float REPULSE_FACTOR = FLAMEGPU-&gt;environment.getProperty&lt;float&gt;(&quot;repulse&quot;);
    const float RADIUS = FLAMEGPU-&gt;message_in.radius();
    float fx = 0.0;
    float fy = 0.0;
    const float x1 = FLAMEGPU-&gt;getVariable&lt;float&gt;(&quot;x&quot;);
    const float y1 = FLAMEGPU-&gt;getVariable&lt;float&gt;(&quot;y&quot;);
    int count = 0;
    for (const auto &amp;message : FLAMEGPU-&gt;message_in(x1, y1)) {
        if (message.getVariable&lt;flamegpu::id_t&gt;(&quot;id&quot;) != ID) {
            const float x2 = message.getVariable&lt;float&gt;(&quot;x&quot;);
            const float y2 = message.getVariable&lt;float&gt;(&quot;y&quot;);
            float x21 = x2 - x1;
            float y21 = y2 - y1;
            const float separation = sqrt(x21*x21 + y21*y21);
            if (separation &lt; RADIUS &amp;&amp; separation &gt; 0.0f) {
                float k = sinf((separation / RADIUS)*3.141f*-2)*REPULSE_FACTOR;
                // Normalise without recalculating separation
                x21 /= separation;
                y21 /= separation;
                fx += k * x21;
                fy += k * y21;
                count++;
            }
        }
    }
    fx /= count &gt; 0 ? count : 1;
    fy /= count &gt; 0 ? count : 1;
    FLAMEGPU-&gt;setVariable&lt;float&gt;(&quot;x&quot;, x1 + fx);
    FLAMEGPU-&gt;setVariable&lt;float&gt;(&quot;y&quot;, y1 + fy);
    FLAMEGPU-&gt;setVariable&lt;float&gt;(&quot;drift&quot;, sqrt(fx*fx + fy*fy));
    return flamegpu::ALIVE;
}
&quot;&quot;&quot;
...
</pre></div>
</div>
</div></div>
<p>Now that both agent functions have been implemented, they must be attached to the model.</p>
<p>Returning to the earlier defined agent, first we use this to create an <a class="reference internal" href="../api/classflamegpu_1_1AgentFunctionDescription.html#_CPPv4N8flamegpu24AgentFunctionDescriptionE" title="flamegpu::AgentFunctionDescription"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">AgentFunctionDescription</span></code></a> for each of the two function’s that we have defined using <a class="reference internal" href="../api/classflamegpu_1_1AgentDescription.html#_CPPv4I0EN8flamegpu16AgentDescription11newFunctionER24AgentFunctionDescriptionRKNSt6stringE13AgentFunction" title="flamegpu::AgentDescription::newFunction"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">newFunction()</span></code></a> (C++ API) or <a class="reference internal" href="../api/classflamegpu_1_1AgentDescription.html#_CPPv4N8flamegpu16AgentDescription14newRTCFunctionERKNSt6stringERKNSt6stringE" title="flamegpu::AgentDescription::newRTCFunction"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">newRTCFunction()</span></code></a> (Python API). Both of these functions take two arguments, firstly a name to refer to the function, and secondly the function implementation that was defined above.</p>
<p>The returned <a class="reference internal" href="../api/classflamegpu_1_1AgentFunctionDescription.html#_CPPv4N8flamegpu24AgentFunctionDescriptionE" title="flamegpu::AgentFunctionDescription"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">AgentFunctionDescription</span></code></a> can then be used to configure the agent function, enabling support for agent birth and death and any message inputs or outputs that are used. As we are using messages, we must call <a class="reference internal" href="../api/classflamegpu_1_1AgentFunctionDescription.html#_CPPv4N8flamegpu24AgentFunctionDescription16setMessageOutputERKNSt6stringE" title="flamegpu::AgentFunctionDescription::setMessageOutput"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">setMessageOutput()</span></code></a> and <a class="reference internal" href="../api/classflamegpu_1_1AgentFunctionDescription.html#_CPPv4N8flamegpu24AgentFunctionDescription15setMessageInputERKNSt6stringE" title="flamegpu::AgentFunctionDescription::setMessageInput"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">setMessageInput()</span></code></a> passing the name give to our message type (<code class="docutils literal notranslate"><span class="pre">&quot;location&quot;</span></code>).</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-8-Qysr" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-8-Qysr" name="Qysr" role="tab" tabindex="0">C++</button><button aria-controls="panel-8-UHl0aG9u" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-8-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="-1">Python</button></div><div aria-labelledby="tab-8-Qysr" class="sphinx-tabs-panel code-tab group-tab" id="panel-8-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="w">    </span><span class="n">agent</span><span class="p">.</span><span class="n">newVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;drift&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Setup the two agent functions</span>
<span class="w">    </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">AgentFunctionDescription</span><span class="w"> </span><span class="o">&amp;</span><span class="n">out_fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">agent</span><span class="p">.</span><span class="n">newFunction</span><span class="p">(</span><span class="s">&quot;output_message&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">output_message</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">out_fn</span><span class="p">.</span><span class="n">setMessageOutput</span><span class="p">(</span><span class="s">&quot;location&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">AgentFunctionDescription</span><span class="w"> </span><span class="o">&amp;</span><span class="n">in_fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">agent</span><span class="p">.</span><span class="n">newFunction</span><span class="p">(</span><span class="s">&quot;input_message&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">input_message</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">in_fn</span><span class="p">.</span><span class="n">setMessageInput</span><span class="p">(</span><span class="s">&quot;location&quot;</span><span class="p">);</span><span class="w"></span>

<span class="p">...</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-8-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-8-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="n">agent</span><span class="o">.</span><span class="n">newVariableFloat</span><span class="p">(</span><span class="s2">&quot;drift&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="c1"># Setup the two agent functions</span>
<span class="n">out_fn</span> <span class="o">=</span> <span class="n">agent</span><span class="o">.</span><span class="n">newRTCFunction</span><span class="p">(</span><span class="s2">&quot;output_message&quot;</span><span class="p">,</span> <span class="n">output_message</span><span class="p">)</span>
<span class="n">out_fn</span><span class="o">.</span><span class="n">setMessageOutput</span><span class="p">(</span><span class="s2">&quot;location&quot;</span><span class="p">)</span>
<span class="n">in_fn</span> <span class="o">=</span> <span class="n">agent</span><span class="o">.</span><span class="n">newRTCFunction</span><span class="p">(</span><span class="s2">&quot;input_message&quot;</span><span class="p">,</span> <span class="n">input_message</span><span class="p">)</span>
<span class="n">in_fn</span><span class="o">.</span><span class="n">setMessageInput</span><span class="p">(</span><span class="s2">&quot;location&quot;</span><span class="p">)</span>

<span class="o">...</span>
</pre></div>
</div>
</div></div>
</div>
<div class="section" id="execution-order">
<h3>Execution Order<a class="headerlink" href="#execution-order" title="Permalink to this headline"></a></h3>
<p>Finally, the model’s execution flow must be setup. This can be achieved using either the old FLAME GPU 1 style with layers (see <a class="reference internal" href="../api/classflamegpu_1_1ModelDescription.html#_CPPv4N8flamegpu16ModelDescription8newLayerERKNSt6stringE" title="flamegpu::ModelDescription::newLayer"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">ModelDescription::newLayer()</span></code></a>), or the new dependency graph API. In this tutorial we will use the dependency API.</p>
<p>To define the order in which functions are executed during the model, their dependencies must be specified. <a class="reference internal" href="../api/classflamegpu_1_1AgentFunctionDescription.html#_CPPv4N8flamegpu24AgentFunctionDescriptionE" title="flamegpu::AgentFunctionDescription"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">AgentFunctionDescription</span></code></a>, <a class="reference internal" href="../api/classflamegpu_1_1HostFunctionDescription.html#_CPPv4N8flamegpu23HostFunctionDescriptionE" title="flamegpu::HostFunctionDescription"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">HostFunctionDescription</span></code></a> and <a class="reference internal" href="../api/classflamegpu_1_1SubModelDescription.html#_CPPv4N8flamegpu19SubModelDescriptionE" title="flamegpu::SubModelDescription"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">SubModelDescription</span></code></a> objects all implement <a class="reference internal" href="../api/classflamegpu_1_1DependencyNode.html#_CPPv4I0EN8flamegpu14DependencyNode9dependsOnEvR1A" title="template&lt;typename A&gt; void flamegpu::DependencyNode::dependsOn(A&amp;)"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">dependsOn()</span></code></a>. This is used to specify dependencies between the functions of the model.</p>
<p>Next, the dependency graph must be retrieved with <a class="reference internal" href="../api/classflamegpu_1_1ModelDescription.html#_CPPv4NK8flamegpu16ModelDescription18getDependencyGraphEv" title="flamegpu::ModelDescription::getDependencyGraph"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">ModelDescription::getDependencyGraph()</span></code></a>. The root of the graph specified with <a class="reference internal" href="../api/classflamegpu_1_1DependencyGraph.html#_CPPv4N8flamegpu15DependencyGraph7addRootER14DependencyNode" title="flamegpu::DependencyGraph::addRoot"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">DependencyGraph::addRoot()</span></code></a>, and finally the dependency graph converted to layers via <a class="reference internal" href="../api/classflamegpu_1_1DependencyGraph.html#_CPPv4N8flamegpu15DependencyGraph14generateLayersER16ModelDescription" title="flamegpu::DependencyGraph::generateLayers"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">DependencyGraph::generateLayers()</span></code></a>.</p>
<p>This can be placed at the end of the file, following the previously defined environment properties.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-9-Qysr" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-9-Qysr" name="Qysr" role="tab" tabindex="0">C++</button><button aria-controls="panel-9-UHl0aG9u" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-9-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="-1">Python</button></div><div aria-labelledby="tab-9-Qysr" class="sphinx-tabs-panel code-tab group-tab" id="panel-9-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="w">        </span><span class="n">env</span><span class="p">.</span><span class="n">newProperty</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;repulse&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">0.05f</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="p">{</span><span class="w">   </span><span class="c1">// (optional local scope block for cleaner grouping)</span>
<span class="w">        </span><span class="c1">// Dependency specification</span>
<span class="w">        </span><span class="c1">// Message input depends on output</span>
<span class="w">        </span><span class="n">in_fn</span><span class="p">.</span><span class="n">dependsOn</span><span class="p">(</span><span class="n">out_fn</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">DependencyGraph</span><span class="o">&amp;</span><span class="w"> </span><span class="n">dependencyGraph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">model</span><span class="p">.</span><span class="n">getDependencyGraph</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Output is the root of our graph</span>
<span class="w">        </span><span class="n">dependencyGraph</span><span class="p">.</span><span class="n">addRoot</span><span class="p">(</span><span class="n">out_fn</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">dependencyGraph</span><span class="p">.</span><span class="n">generateLayers</span><span class="p">(</span><span class="n">model</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-9-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-9-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="n">env</span><span class="o">.</span><span class="n">newPropertyFloat</span><span class="p">(</span><span class="s2">&quot;repulse&quot;</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">)</span>

<span class="c1"># Message input depends on output</span>
<span class="n">in_fn</span><span class="o">.</span><span class="n">dependsOn</span><span class="p">(</span><span class="n">out_fn</span><span class="p">)</span>
<span class="c1"># Dependency specification</span>
<span class="n">dependencyGraph</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">getDependencyGraph</span><span class="p">()</span>
<span class="c1"># Output is the root of our graph</span>
<span class="n">dependencyGraph</span><span class="o">.</span><span class="n">addRoot</span><span class="p">(</span><span class="n">out_fn</span><span class="p">)</span>
<span class="n">dependencyGraph</span><span class="o">.</span><span class="n">generateLayers</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
</pre></div>
</div>
</div></div>
</div>
<div class="section" id="initialisation-function">
<h3>Initialisation Function<a class="headerlink" href="#initialisation-function" title="Permalink to this headline"></a></h3>
<p>Now that the model’s components and behaviours have been setup, it’s time to decide how the model will be initialised. FLAME GPU allows models to be initialised either via input file and/or user-defined initialisation functions, which may depend on environmental properties or agents loaded from input file.</p>
<p>For the Circles model, we simply need to randomly scatter an amount of agents within the environment bounds. Therefore, we can simply generate agents according to some of the environment properties we defined earlier.</p>
<p>Similar to agent functions, the C++ API defines initialisation functions using <a class="reference internal" href="../api/define_HostAPI__macros_8h_1a45ad84203a419b7833ef1f21484648c8.html#c.FLAMEGPU_INIT_FUNCTION" title="FLAMEGPU_INIT_FUNCTION"><code class="xref c c-macro docutils literal notranslate"><span class="pre">FLAMEGPU_INIT_FUNCTION</span></code></a>, which takes a single argument of the function’s name. Python in contrast has native functions, so they are defined differently, a subclass of <code class="docutils literal notranslate"><span class="pre">pyflamegpu.HostFunctionCallback</span></code> must be created, which implements the method <code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">run(self,</span> <span class="pre">FLAMEGPU):</span></code>.</p>
<p>Initialisation function’s have access to the <a class="reference internal" href="../api/classflamegpu_1_1HostAPI.html#_CPPv4N8flamegpu7HostAPIE" title="flamegpu::HostAPI"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">HostAPI</span></code></a>, the host counter-part to the <a class="reference internal" href="../api/classflamegpu_1_1DeviceAPI.html#_CPPv4I00EN8flamegpu9DeviceAPIE" title="flamegpu::DeviceAPI"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">DeviceAPI</span></code></a> present in agent functions. It has similar functionality, with a few additional features: agent variable reductions, setting environment properties.</p>
<p>Firstly we will need to generate some random numbers, to decide the locations. The <a class="reference internal" href="../api/classflamegpu_1_1HostAPI.html#_CPPv4N8flamegpu7HostAPIE" title="flamegpu::HostAPI"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">HostAPI</span></code></a> contains <code class="docutils literal notranslate"><span class="pre">random</span></code> which provides access to random functionality via <a class="reference internal" href="../api/classflamegpu_1_1HostRandom.html#_CPPv4N8flamegpu10HostRandomE" title="flamegpu::HostRandom"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">HostRandom</span></code></a>. This provides the <a class="reference internal" href="../api/classflamegpu_1_1HostRandom.html#_CPPv4I0ENK8flamegpu10HostRandom7uniformE1Tv" title="template&lt;typename T&gt; T flamegpu::HostRandom::uniform() const"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">uniform()</span></code></a>. It only requires a template argument <code class="docutils literal notranslate"><span class="pre">float</span></code>, and will return a random number in the inclusive-exclusive range <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">1)</span></code>.</p>
<p>The only feature we need to use that is unique to the <a class="reference internal" href="../api/classflamegpu_1_1HostAPI.html#_CPPv4N8flamegpu7HostAPIE" title="flamegpu::HostAPI"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">HostAPI</span></code></a> is agent birth, on the host any number of agents can be created without the limitations of agent functions. First we fetch the <a class="reference internal" href="../api/classflamegpu_1_1HostAgentAPI.html#_CPPv4N8flamegpu12HostAgentAPIE" title="flamegpu::HostAgentAPI"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">HostAgentAPI</span></code></a> for the <code class="docutils literal notranslate"><span class="pre">&quot;point&quot;</span></code> agent, this gives us access to functionality affect that agent. Then we can simply call <a class="reference internal" href="../api/classflamegpu_1_1HostAgentAPI.html#_CPPv4N8flamegpu12HostAgentAPI8newAgentEv" title="flamegpu::HostAgentAPI::newAgent"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">newAgent()</span></code></a> to create new agents, the returned agent has the normal <a class="reference internal" href="../api/classflamegpu_1_1HostNewAgentAPI.html#_CPPv4I0EN8flamegpu15HostNewAgentAPI11setVariableEvRKNSt6stringERK1T" title="template&lt;typename T&gt; void flamegpu::HostNewAgentAPI::setVariable(const std::string&amp;, const T&amp;)"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">setVariable()</span></code></a> functionality and will be added to the simulation after the initialisation functions have all completed.
enumerator</p>
<p>The initialisation function, again, goes near the top of the file alongside the agent functions.</p>
<p>Putting all this together, we can use the below code to generate the initial agent population:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-10-Qysr" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-10-Qysr" name="Qysr" role="tab" tabindex="0">C++</button><button aria-controls="panel-10-UHl0aG9u" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-10-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="-1">Python</button></div><div aria-labelledby="tab-10-Qysr" class="sphinx-tabs-panel code-tab group-tab" id="panel-10-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">ALIVE</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="n">FLAMEGPU_INIT_FUNCTION</span><span class="p">(</span><span class="n">create_agents</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Fetch the desired agent count and environment width</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">AGENT_COUNT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">environment</span><span class="p">.</span><span class="n">getProperty</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;AGENT_COUNT&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">ENV_WIDTH</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">environment</span><span class="p">.</span><span class="n">getProperty</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;ENV_WIDTH&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Create agents</span>
<span class="w">    </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">HostAgentAPI</span><span class="w"> </span><span class="n">t_pop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">agent</span><span class="p">(</span><span class="s">&quot;point&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">AGENT_COUNT</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">t_pop</span><span class="p">.</span><span class="n">newAgent</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="n">t</span><span class="p">.</span><span class="n">setVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">random</span><span class="p">.</span><span class="n">uniform</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">ENV_WIDTH</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">t</span><span class="p">.</span><span class="n">setVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">random</span><span class="p">.</span><span class="n">uniform</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">ENV_WIDTH</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-10-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-10-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
    <span class="k">return</span> <span class="n">flamegpu</span><span class="p">::</span><span class="n">ALIVE</span><span class="p">;</span>
<span class="p">}</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="s2">class create_agents(pyflamegpu.HostFunctionCallback):</span>
<span class="s2">    def run(self, FLAMEGPU):</span>
<span class="s2">        # Fetch the desired agent count and environment width</span>
<span class="s2">        AGENT_COUNT = FLAMEGPU.environment.getPropertyUInt(&quot;AGENT_COUNT&quot;)</span>
<span class="s2">        ENV_WIDTH = FLAMEGPU.environment.getPropertyFloat(&quot;ENV_WIDTH&quot;)</span>
<span class="s2">        # Create agents</span>
<span class="s2">        t_pop = FLAMEGPU.agent(&quot;point&quot;)</span>
<span class="s2">        for i in range(AGENT_COUNT):</span>
<span class="s2">            t = t_pop.newAgent()</span>
<span class="s2">            t.setVariableFloat(&quot;x&quot;, FLAMEGPU.random.uniformFloat() * ENV_WIDTH)</span>
<span class="s2">            t.setVariableFloat(&quot;y&quot;, FLAMEGPU.random.uniformFloat() * ENV_WIDTH)</span>
</pre></div>
</div>
</div></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Use of the FLAME GPU random API in initialisation functions, ensure that the random (and hence the model) is seeded according to the random seed specified for the simulation at execution.</p>
</div>
<p>Similar to agent functions, the initialisation function must be attached to the model. Initialisation function’s always run once at the start of the model, so it’s not necessary to use layer or a dependency graph, they are simply added to the <a class="reference internal" href="../api/classflamegpu_1_1ModelDescription.html#_CPPv4N8flamegpu16ModelDescriptionE" title="flamegpu::ModelDescription"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ModelDescription</span></code></a> using <a class="reference internal" href="../api/classflamegpu_1_1ModelDescription.html#_CPPv4N8flamegpu16ModelDescription15addInitFunctionE30FLAMEGPU_INIT_FUNCTION_POINTER" title="flamegpu::ModelDescription::addInitFunction"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">addInitFunction()</span></code></a> (C++ API) or <code class="docutils literal notranslate"><span class="pre">addInitFunctionCallback()</span></code> (Python API).</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-11-Qysr" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-11-Qysr" name="Qysr" role="tab" tabindex="0">C++</button><button aria-controls="panel-11-UHl0aG9u" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-11-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="-1">Python</button></div><div aria-labelledby="tab-11-Qysr" class="sphinx-tabs-panel code-tab group-tab" id="panel-11-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="w">        </span><span class="n">dependencyGraph</span><span class="p">.</span><span class="n">generateLayers</span><span class="p">(</span><span class="n">model</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="n">model</span><span class="p">.</span><span class="n">addInitFunction</span><span class="p">(</span><span class="n">create_agents</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-11-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-11-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="n">dependencyGraph</span><span class="o">.</span><span class="n">generateLayers</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">addInitFunctionCallback</span><span class="p">(</span><span class="n">create_agents</span><span class="p">()</span><span class="o">.</span><span class="n">__disown__</span><span class="p">())</span>
</pre></div>
</div>
</div></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It is important that <code class="docutils literal notranslate"><span class="pre">__disown__()</span></code> is called when creating the instance of the Python init (host) function callbacks. Without this, Python may decide to deallocate the instance early, leading to undefined behaviour. We are not yet able to detect, or prevent this automatically within FLAME GPU.</p>
</div>
</div>
<div class="section" id="configuring-the-simulation">
<h3>Configuring the Simulation<a class="headerlink" href="#configuring-the-simulation" title="Permalink to this headline"></a></h3>
<p>The <a class="reference internal" href="../api/classflamegpu_1_1ModelDescription.html#_CPPv4N8flamegpu16ModelDescriptionE" title="flamegpu::ModelDescription"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ModelDescription</span></code></a> is now complete, so it is time to construct a <a class="reference internal" href="../api/classflamegpu_1_1CUDASimulation.html#_CPPv4N8flamegpu14CUDASimulationE" title="flamegpu::CUDASimulation"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">CUDASimulation</span></code></a> to execute the model.</p>
<p>In most cases, this is simply a case of constructing the <a class="reference internal" href="../api/classflamegpu_1_1CUDASimulation.html#_CPPv4N8flamegpu14CUDASimulationE" title="flamegpu::CUDASimulation"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">CUDASimulation</span></code></a>, initialising it with command line arguments and calling <a class="reference internal" href="../api/classflamegpu_1_1CUDASimulation.html#_CPPv4N8flamegpu14CUDASimulation8simulateEv" title="flamegpu::CUDASimulation::simulate"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">simulate()</span></code></a>. It is also possible to setup this configuration in code, for details see the <a class="reference internal" href="../guide/8-running-a-simulation/1-configuring-execution.html#configuring-execution"><span class="std std-ref">userguide</span></a>.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-12-Qysr" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-12-Qysr" name="Qysr" role="tab" tabindex="0">C++</button><button aria-controls="panel-12-UHl0aG9u" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-12-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="-1">Python</button></div><div aria-labelledby="tab-12-Qysr" class="sphinx-tabs-panel code-tab group-tab" id="panel-12-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="w">    </span><span class="n">model</span><span class="p">.</span><span class="n">addInitFunction</span><span class="p">(</span><span class="n">create_agents</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Create and run the simulation</span>
<span class="w">    </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">CUDASimulation</span><span class="w"> </span><span class="nf">cuda_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">cuda_model</span><span class="p">.</span><span class="n">simulate</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-12-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-12-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyflamegpu</span>
<span class="c1"># Import sys for access to run args</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="o">...</span>
<span class="n">model</span><span class="o">.</span><span class="n">addInitFunctionCallback</span><span class="p">(</span><span class="n">create_agents</span><span class="p">()</span><span class="o">.</span><span class="n">__disown__</span><span class="p">())</span>

<span class="c1"># Create and run the simulation</span>
<span class="n">cuda_model</span> <span class="o">=</span> <span class="n">pyflamegpu</span><span class="o">.</span><span class="n">CUDASimulation</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<span class="n">cuda_model</span><span class="o">.</span><span class="n">initialise</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
<span class="n">cuda_model</span><span class="o">.</span><span class="n">simulate</span><span class="p">()</span>
</pre></div>
</div>
</div></div>
<p>You can optionally configure logging or visualisation via the <a class="reference internal" href="../api/classflamegpu_1_1CUDASimulation.html#_CPPv4N8flamegpu14CUDASimulationE" title="flamegpu::CUDASimulation"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">CUDASimulation</span></code></a>, these are explained in the following two sections.</p>
</div>
<div class="section" id="configuring-logging-optional">
<h3>Configuring Logging (Optional)<a class="headerlink" href="#configuring-logging-optional" title="Permalink to this headline"></a></h3>
<p>When running FLAME GPU models without a visualisation, you most likely want to collect data from the runs. This can be carried out by defining a logging configuration.</p>
<p>For this tutorial we will log the mean of our <code class="docutils literal notranslate"><span class="pre">&quot;point&quot;</span></code> agents’ <code class="docutils literal notranslate"><span class="pre">&quot;drift&quot;</span></code> variable each step, if the model is working correctly this value should trend towards zero as the agents reach a steady state.</p>
<p>To achieve this we must first create a <a class="reference internal" href="../api/classflamegpu_1_1StepLoggingConfig.html#_CPPv4N8flamegpu17StepLoggingConfigE" title="flamegpu::StepLoggingConfig"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">StepLoggingConfig</span></code></a>, passing our finished <a class="reference internal" href="../api/classflamegpu_1_1ModelDescription.html#_CPPv4N8flamegpu16ModelDescriptionE" title="flamegpu::ModelDescription"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ModelDescription</span></code></a> to it’s constructor.</p>
<p>This object provides a wide range of options for logging agent data and environment properties. However, we only need to request the <a class="reference internal" href="../api/classflamegpu_1_1AgentLoggingConfig.html#_CPPv4N8flamegpu18AgentLoggingConfigE" title="flamegpu::AgentLoggingConfig"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">AgentLoggingConfig</span></code></a> using <a class="reference internal" href="../api/classflamegpu_1_1LoggingConfig.html#_CPPv4N8flamegpu13LoggingConfig5agentERKNSt6stringERKNSt6stringE" title="flamegpu::LoggingConfig::agent"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">agent()</span></code></a>. After which, we simply call <a class="reference internal" href="../api/classflamegpu_1_1AgentLoggingConfig.html#_CPPv4I0EN8flamegpu18AgentLoggingConfig7logMeanEvRKNSt6stringE" title="flamegpu::AgentLoggingConfig::logMean"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">logMean()</span></code></a>, providing the agent variable’s type as a template argument and it’s name as the sole argument.</p>
<p>After the <a class="reference internal" href="../api/classflamegpu_1_1StepLoggingConfig.html#_CPPv4N8flamegpu17StepLoggingConfigE" title="flamegpu::StepLoggingConfig"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">StepLoggingConfig</span></code></a> is fully defined, it can be attached to the <a class="reference internal" href="../api/classflamegpu_1_1CUDASimulation.html#_CPPv4N8flamegpu14CUDASimulationE" title="flamegpu::CUDASimulation"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">CUDASimulation</span></code></a> using <a class="reference internal" href="../api/classflamegpu_1_1CUDASimulation.html#_CPPv4N8flamegpu14CUDASimulation10setStepLogERK17StepLoggingConfig" title="flamegpu::CUDASimulation::setStepLog"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">setStepLog()</span></code></a>.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-13-Qysr" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-13-Qysr" name="Qysr" role="tab" tabindex="0">C++</button><button aria-controls="panel-13-UHl0aG9u" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-13-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="-1">Python</button></div><div aria-labelledby="tab-13-Qysr" class="sphinx-tabs-panel code-tab group-tab" id="panel-13-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="w">    </span><span class="n">model</span><span class="p">.</span><span class="n">addInitFunction</span><span class="p">(</span><span class="n">create_agents</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Specify the desired StepLoggingConfig</span>
<span class="w">    </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">StepLoggingConfig</span><span class="w"> </span><span class="nf">step_log_cfg</span><span class="p">(</span><span class="n">model</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Log every step</span>
<span class="w">    </span><span class="n">step_log_cfg</span><span class="p">.</span><span class="n">setFrequency</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Include the mean of the &quot;point&quot; agent population&#39;s variable &#39;drift&#39;</span>
<span class="w">    </span><span class="n">step_log_cfg</span><span class="p">.</span><span class="n">agent</span><span class="p">(</span><span class="s">&quot;point&quot;</span><span class="p">).</span><span class="n">logMean</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;drift&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Create the simulation</span>
<span class="w">    </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">CUDASimulation</span><span class="w"> </span><span class="nf">cuda_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Attach the logging config</span>
<span class="w">    </span><span class="n">cuda_model</span><span class="p">.</span><span class="n">setStepLog</span><span class="p">(</span><span class="n">step_log_cfg</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Run the simulation</span>
<span class="w">    </span><span class="n">cuda_model</span><span class="p">.</span><span class="n">simulate</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-13-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-13-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="n">model</span><span class="o">.</span><span class="n">addInitFunctionCallback</span><span class="p">(</span><span class="n">create_agents</span><span class="p">()</span><span class="o">.</span><span class="n">__disown__</span><span class="p">())</span>

<span class="c1"># Specify the desired StepLoggingConfig</span>
<span class="n">step_log_cfg</span> <span class="o">=</span> <span class="n">pyflamegpu</span><span class="o">.</span><span class="n">StepLoggingConfig</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<span class="c1"># Log every step</span>
<span class="n">step_log_cfg</span><span class="o">.</span><span class="n">setFrequency</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># Include the mean of the &quot;point&quot; agent population&#39;s variable &#39;drift&#39;</span>
<span class="n">step_log_cfg</span><span class="o">.</span><span class="n">agent</span><span class="p">(</span><span class="s2">&quot;point&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">logMeanFloat</span><span class="p">(</span><span class="s2">&quot;drift&quot;</span><span class="p">)</span>

<span class="c1"># Create the simulation</span>
<span class="n">cuda_model</span> <span class="o">=</span> <span class="n">pyflamegpu</span><span class="o">.</span><span class="n">CUDASimulation</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>

<span class="c1"># Attach the logging config</span>
<span class="n">cuda_model</span><span class="o">.</span><span class="n">setStepLog</span><span class="p">(</span><span class="n">step_log_cfg</span><span class="p">)</span>

<span class="c1"># Init and run the simulation</span>
<span class="n">cuda_model</span><span class="o">.</span><span class="n">initialise</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
<span class="n">cuda_model</span><span class="o">.</span><span class="n">simulate</span><span class="p">()</span>
</pre></div>
</div>
</div></div>
<p>After the simulation has completed, the log can then be collected using <a class="reference internal" href="../api/classflamegpu_1_1CUDASimulation.html#_CPPv4NK8flamegpu14CUDASimulation9getRunLogEv" title="flamegpu::CUDASimulation::getRunLog"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">getRunLog()</span></code></a> or written to file if the appropriate output files were <a class="reference internal" href="../guide/8-running-a-simulation/1-configuring-execution.html#configuring-execution"><span class="std std-ref">configured</span></a> before execution.</p>
<p>To learn more about using logging configurations see the <a class="reference internal" href="../guide/8-running-a-simulation/3-collecting-data.html#collecting-data"><span class="std std-ref">userguide</span></a>.</p>
</div>
<div class="section" id="visualisation-config-optional">
<h3>Visualisation Config (Optional)<a class="headerlink" href="#visualisation-config-optional" title="Permalink to this headline"></a></h3>
<p>Many models are easier to quickly validate early on by using a visualisation, FLAME GPU provides a visualiser capable of visualising agents locations, directions, scales and colours dependent on their variables.</p>
<p>The visualisation configuration (<a class="reference internal" href="../api/classflamegpu_1_1visualiser_1_1ModelVis.html#_CPPv4N8flamegpu10visualiser8ModelVisE" title="flamegpu::visualiser::ModelVis"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ModelVis</span></code></a>) is created from the <a class="reference internal" href="../api/classflamegpu_1_1CUDASimulation.html#_CPPv4N8flamegpu14CUDASimulationE" title="flamegpu::CUDASimulation"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">CUDASimulation</span></code></a> using <a class="reference internal" href="../api/classflamegpu_1_1CUDASimulation.html#_CPPv4N8flamegpu14CUDASimulation16getVisualisationEv" title="flamegpu::CUDASimulation::getVisualisation"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">getVisualisation()</span></code></a>. This provides many advanced options for configuring the visualisation, see the <a class="reference internal" href="../guide/10-visualisation/index.html#visualisation"><span class="std std-ref">userguide</span></a> for the full overview, we will cover the minimum required for visualising the Circles model here.</p>
<p>The below code positions the initial camera, sets the camera’s movement speed (when a user uses the keyboard to move), renders the <code class="docutils literal notranslate"><span class="pre">&quot;point&quot;</span></code> agents as icospheres (these are a low polygon count sphere, great for high agent count visualisations), and marks out the environment boundaries with a white square.</p>
<p>Additionally the simulation speed is limited to 25 steps per second. This allows the evolution of the simulation to be visualised more clearly. This small model would normally execute in hundreds of steps per second, reaching a steady state too fast to observe.</p>
<p>It is important to call <a class="reference internal" href="../api/classflamegpu_1_1visualiser_1_1ModelVis.html#_CPPv4N8flamegpu10visualiser8ModelVis8activateEv" title="flamegpu::visualiser::ModelVis::activate"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">activate()</span></code></a> after the visualisation configuration is complete, to finalise and start the visualiser.</p>
<p>In most cases, you will want the visualisation to persist after the simulation completes, so the exit state can be explored. To achieve this, <a class="reference internal" href="../api/classflamegpu_1_1visualiser_1_1ModelVis.html#_CPPv4N8flamegpu10visualiser8ModelVis4joinEv" title="flamegpu::visualiser::ModelVis::join"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">join()</span></code></a> must be called after <a class="reference internal" href="../api/classflamegpu_1_1CUDASimulation.html#_CPPv4N8flamegpu14CUDASimulation8simulateEv" title="flamegpu::CUDASimulation::simulate"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">simulate()</span></code></a> to catch the main program thread before it exits.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FLAME GPU is designed for use both on personal machines and headless machines over ssh (e.g. HPC). The latter are unlikely to have support for visualisations, as such FLAME GPU can be built without visualisation support. Hence, it is useful to wrap the visualisation specific code with a check for the <code class="docutils literal notranslate"><span class="pre">VISUALISATION</span></code> macro, allowing the model to compile/run irrespective of visualisation support as opposed to maintaining two versions.</p>
</div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-14-Qysr" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-14-Qysr" name="Qysr" role="tab" tabindex="0">C++</button><button aria-controls="panel-14-UHl0aG9u" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-14-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="-1">Python</button></div><div aria-labelledby="tab-14-Qysr" class="sphinx-tabs-panel code-tab group-tab" id="panel-14-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">...</span><span class="w"></span>
<span class="w">    </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">CUDASimulation</span><span class="w"> </span><span class="n">cuda_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">);</span><span class="w"></span>

<span class="c1">// Only compile this block if being built with visualisation support</span>
<span class="cp">#ifdef VISUALISATION</span>
<span class="w">    </span><span class="c1">// Create visualisation</span>
<span class="w">    </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">visualiser</span><span class="o">::</span><span class="n">ModelVis</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_vis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cuda_model</span><span class="p">.</span><span class="n">getVisualisation</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Set the initial camera location and speed</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">INIT_CAM</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ENV_WIDTH</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2.0f</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_vis</span><span class="p">.</span><span class="n">setInitialCameraTarget</span><span class="p">(</span><span class="n">INIT_CAM</span><span class="p">,</span><span class="w"> </span><span class="n">INIT_CAM</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">m_vis</span><span class="p">.</span><span class="n">setInitialCameraLocation</span><span class="p">(</span><span class="n">INIT_CAM</span><span class="p">,</span><span class="w"> </span><span class="n">INIT_CAM</span><span class="p">,</span><span class="w"> </span><span class="n">ENV_WIDTH</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">m_vis</span><span class="p">.</span><span class="n">setCameraSpeed</span><span class="p">(</span><span class="mf">0.01f</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">m_vis</span><span class="p">.</span><span class="n">setSimulationSpeed</span><span class="p">(</span><span class="mi">25</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Add &quot;point&quot; agents to the visualisation</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="o">&amp;</span><span class="n">point_agt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m_vis</span><span class="p">.</span><span class="n">addAgent</span><span class="p">(</span><span class="s">&quot;point&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Location variables have names &quot;x&quot; and &quot;y&quot; so will be used by default</span>
<span class="w">    </span><span class="n">point_agt</span><span class="p">.</span><span class="n">setModel</span><span class="p">(</span><span class="n">flamegpu</span><span class="o">::</span><span class="n">visualiser</span><span class="o">::</span><span class="n">Stock</span><span class="o">::</span><span class="n">Models</span><span class="o">::</span><span class="n">ICOSPHERE</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">point_agt</span><span class="p">.</span><span class="n">setModelScale</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mf">10.0f</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Mark the environment bounds</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">pen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m_vis</span><span class="p">.</span><span class="n">newPolylineSketch</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2f</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pen</span><span class="p">.</span><span class="n">addVertex</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pen</span><span class="p">.</span><span class="n">addVertex</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">ENV_WIDTH</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pen</span><span class="p">.</span><span class="n">addVertex</span><span class="p">(</span><span class="n">ENV_WIDTH</span><span class="p">,</span><span class="w"> </span><span class="n">ENV_WIDTH</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pen</span><span class="p">.</span><span class="n">addVertex</span><span class="p">(</span><span class="n">ENV_WIDTH</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pen</span><span class="p">.</span><span class="n">addVertex</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Open the visualiser window</span>
<span class="w">    </span><span class="n">m_vis</span><span class="p">.</span><span class="n">activate</span><span class="p">();</span><span class="w"></span>
<span class="cp">#endif</span>

<span class="w">    </span><span class="c1">// Run the simulation</span>
<span class="w">    </span><span class="n">cuda_model</span><span class="p">.</span><span class="n">simulate</span><span class="p">();</span><span class="w"></span>

<span class="cp">#ifdef VISUALISATION</span>
<span class="w">    </span><span class="c1">// Keep the visualisation window active after the simulation has completed</span>
<span class="w">    </span><span class="n">m_vis</span><span class="p">.</span><span class="n">join</span><span class="p">();</span><span class="w"></span>
<span class="cp">#endif</span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-14-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-14-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="c1"># Create the simulation</span>
<span class="n">cuda_model</span> <span class="o">=</span> <span class="n">pyflamegpu</span><span class="o">.</span><span class="n">CUDASimulation</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>

<span class="c1"># Only run this block if pyflamegpu was built with visualisation support</span>
<span class="k">if</span> <span class="n">pyflamegpu</span><span class="o">.</span><span class="n">VISUALISATION</span><span class="p">:</span>
    <span class="c1"># Create visualisation</span>
    <span class="n">m_vis</span> <span class="o">=</span> <span class="n">cuda_model</span><span class="o">.</span><span class="n">getVisualisation</span><span class="p">()</span>
    <span class="c1"># Set the initial camera location and speed</span>
    <span class="n">INIT_CAM</span> <span class="o">=</span> <span class="n">ENV_WIDTH</span> <span class="o">/</span> <span class="mi">2</span>
    <span class="n">m_vis</span><span class="o">.</span><span class="n">setInitialCameraTarget</span><span class="p">(</span><span class="n">INIT_CAM</span><span class="p">,</span> <span class="n">INIT_CAM</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">m_vis</span><span class="o">.</span><span class="n">setInitialCameraLocation</span><span class="p">(</span><span class="n">INIT_CAM</span><span class="p">,</span> <span class="n">INIT_CAM</span><span class="p">,</span> <span class="n">ENV_WIDTH</span><span class="p">)</span>
    <span class="n">m_vis</span><span class="o">.</span><span class="n">setCameraSpeed</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
    <span class="n">m_vis</span><span class="o">.</span><span class="n">setSimulationSpeed</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
    <span class="c1"># Add &quot;point&quot; agents to the visualisation</span>
    <span class="n">point_agt</span> <span class="o">=</span> <span class="n">m_vis</span><span class="o">.</span><span class="n">addAgent</span><span class="p">(</span><span class="s2">&quot;point&quot;</span><span class="p">)</span>
    <span class="c1"># Location variables have names &quot;x&quot; and &quot;y&quot; so will be used by default</span>
    <span class="n">point_agt</span><span class="o">.</span><span class="n">setModel</span><span class="p">(</span><span class="n">pyflamegpu</span><span class="o">.</span><span class="n">ICOSPHERE</span><span class="p">);</span>
    <span class="n">point_agt</span><span class="o">.</span><span class="n">setModelScale</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mf">10.0</span><span class="p">);</span>
    <span class="c1"># Mark the environment bounds</span>
    <span class="n">pen</span> <span class="o">=</span> <span class="n">m_vis</span><span class="o">.</span><span class="n">newPolylineSketch</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span>
    <span class="n">pen</span><span class="o">.</span><span class="n">addVertex</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">pen</span><span class="o">.</span><span class="n">addVertex</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">ENV_WIDTH</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">pen</span><span class="o">.</span><span class="n">addVertex</span><span class="p">(</span><span class="n">ENV_WIDTH</span><span class="p">,</span> <span class="n">ENV_WIDTH</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">pen</span><span class="o">.</span><span class="n">addVertex</span><span class="p">(</span><span class="n">ENV_WIDTH</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">pen</span><span class="o">.</span><span class="n">addVertex</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="c1"># Open the visualiser window</span>
    <span class="n">m_vis</span><span class="o">.</span><span class="n">activate</span><span class="p">()</span>

<span class="c1"># Init and run the simulation</span>
<span class="n">cuda_model</span><span class="o">.</span><span class="n">initialise</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
<span class="n">cuda_model</span><span class="o">.</span><span class="n">simulate</span><span class="p">()</span>

<span class="k">if</span> <span class="n">pyflamegpu</span><span class="o">.</span><span class="n">VISUALISATION</span><span class="p">:</span>
    <span class="c1"># Keep the visualisation window active after the simulation has completed</span>
    <span class="n">m_vis</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</pre></div>
</div>
</div></div>
</div>
<div class="section" id="running-the-simulation">
<h3>Running the Simulation<a class="headerlink" href="#running-the-simulation" title="Permalink to this headline"></a></h3>
<p>At this point, you should have a complete model which can be (compiled and) ran.</p>
<p>To run the model for <strong>500</strong> steps with the random seed <strong>12</strong> you would pass the runtime arguments <code class="docutils literal notranslate"><span class="pre">-s</span> <span class="pre">500</span> <span class="pre">-r</span> <span class="pre">12</span></code>.</p>
<p>If you chose to add a logging config, you will want to additionally specify a log file e.g. <code class="docutils literal notranslate"><span class="pre">--out-step</span> <span class="pre">step.json</span></code>.</p>
<p>If you have included the visualisation, however wish to block it from running you would include <code class="docutils literal notranslate"><span class="pre">--console</span></code> or <code class="docutils literal notranslate"><span class="pre">-c</span></code>.</p>
<p>If you wish to continue learning with the Circles model try one of these extensions:</p>
<ul class="simple">
<li><p>Extend the model to operate in 3D.</p></li>
<li><p>Extend the visualisation to colour agents according to their <code class="docutils literal notranslate"><span class="pre">drift</span></code> variable, or number of messages read.</p></li>
<li><p>Extend the model by giving agents a weight that affects the force they apply/receive to/from other agents.</p></li>
</ul>
</div>
<div class="section" id="complete-tutorial-code">
<h3>Complete Tutorial Code<a class="headerlink" href="#complete-tutorial-code" title="Permalink to this headline"></a></h3>
<p>If you have followed the complete tutorial, you should now have the following code.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-15-Qysr" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-15-Qysr" name="Qysr" role="tab" tabindex="0">C++</button><button aria-controls="panel-15-UHl0aG9u" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-15-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="-1">Python</button></div><div aria-labelledby="tab-15-Qysr" class="sphinx-tabs-panel code-tab group-tab" id="panel-15-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;flamegpu/flamegpu.h&quot;</span><span class="cp"></span>

<span class="c1">// Agent Function to output the agents ID and position in to a 2D spatial message list</span>
<span class="n">FLAMEGPU_AGENT_FUNCTION</span><span class="p">(</span><span class="n">output_message</span><span class="p">,</span><span class="w"> </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">MessageNone</span><span class="p">,</span><span class="w"> </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">MessageSpatial2D</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">message_out</span><span class="p">.</span><span class="n">setVariable</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">getID</span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">message_out</span><span class="p">.</span><span class="n">setLocation</span><span class="p">(</span><span class="w"></span>
<span class="w">        </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">getVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">),</span><span class="w"></span>
<span class="w">        </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">getVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">ALIVE</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// Agent Function to read the location messages and decide how the agent should move</span>
<span class="n">FLAMEGPU_AGENT_FUNCTION</span><span class="p">(</span><span class="n">input_message</span><span class="p">,</span><span class="w"> </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">MessageSpatial2D</span><span class="p">,</span><span class="w"> </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">MessageNone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">flamegpu</span><span class="o">::</span><span class="kt">id_t</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">getID</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">REPULSE_FACTOR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">environment</span><span class="p">.</span><span class="n">getProperty</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;repulse&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">RADIUS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">message_in</span><span class="p">.</span><span class="n">radius</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">fx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">fy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">x1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">getVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">y1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">getVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="o">&amp;</span><span class="n">message</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">message_in</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="n">y1</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">message</span><span class="p">.</span><span class="n">getVariable</span><span class="o">&lt;</span><span class="n">flamegpu</span><span class="o">::</span><span class="kt">id_t</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">ID</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">x2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">message</span><span class="p">.</span><span class="n">getVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">y2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">message</span><span class="p">.</span><span class="n">getVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="kt">float</span><span class="w"> </span><span class="n">x21</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">x1</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="kt">float</span><span class="w"> </span><span class="n">y21</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">y1</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">separation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqrt</span><span class="p">(</span><span class="n">x21</span><span class="o">*</span><span class="n">x21</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y21</span><span class="o">*</span><span class="n">y21</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">separation</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">RADIUS</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">separation</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="kt">float</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sinf</span><span class="p">((</span><span class="n">separation</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">RADIUS</span><span class="p">)</span><span class="o">*</span><span class="mf">3.141f</span><span class="o">*</span><span class="mi">-2</span><span class="p">)</span><span class="o">*</span><span class="n">REPULSE_FACTOR</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="c1">// Normalise without recalculating separation</span>
<span class="w">                </span><span class="n">x21</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="n">separation</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">y21</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="n">separation</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">fx</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">x21</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">fy</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">y21</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">count</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="n">fx</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">fy</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">setVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">fx</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">setVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">y1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">fy</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">setVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;drift&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">sqrt</span><span class="p">(</span><span class="n">fx</span><span class="o">*</span><span class="n">fx</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">fy</span><span class="o">*</span><span class="n">fy</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">ALIVE</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="n">FLAMEGPU_INIT_FUNCTION</span><span class="p">(</span><span class="n">create_agents</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Fetch the desired agent count and environment width</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">AGENT_COUNT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">environment</span><span class="p">.</span><span class="n">getProperty</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;AGENT_COUNT&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">ENV_WIDTH</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">environment</span><span class="p">.</span><span class="n">getProperty</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;ENV_WIDTH&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Create agents</span>
<span class="w">    </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">HostAgentAPI</span><span class="w"> </span><span class="n">t_pop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">agent</span><span class="p">(</span><span class="s">&quot;point&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">AGENT_COUNT</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">t_pop</span><span class="p">.</span><span class="n">newAgent</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="n">t</span><span class="p">.</span><span class="n">setVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">random</span><span class="p">.</span><span class="n">uniform</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">ENV_WIDTH</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">t</span><span class="p">.</span><span class="n">setVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">random</span><span class="p">.</span><span class="n">uniform</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">ENV_WIDTH</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="n">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="n">argv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Define some useful constants</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">AGENT_COUNT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16384</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">ENV_WIDTH</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">floor</span><span class="p">(</span><span class="n">cbrt</span><span class="p">(</span><span class="n">AGENT_COUNT</span><span class="p">)));</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Define the FLAME GPU model</span>
<span class="w">    </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">ModelDescription</span><span class="w"> </span><span class="nf">model</span><span class="p">(</span><span class="s">&quot;Circles Tutorial&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="p">{</span><span class="w">   </span><span class="c1">// (optional local scope block for cleaner grouping)</span>
<span class="w">        </span><span class="c1">// Define a message of type MessageSpatial2D named location</span>
<span class="w">        </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">MessageSpatial2D</span><span class="o">::</span><span class="n">Description</span><span class="w"> </span><span class="o">&amp;</span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">model</span><span class="p">.</span><span class="n">newMessage</span><span class="o">&lt;</span><span class="n">flamegpu</span><span class="o">::</span><span class="n">MessageSpatial2D</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;location&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Configure the message list</span>
<span class="w">        </span><span class="n">message</span><span class="p">.</span><span class="n">setMin</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">message</span><span class="p">.</span><span class="n">setMax</span><span class="p">(</span><span class="n">ENV_WIDTH</span><span class="p">,</span><span class="w"> </span><span class="n">ENV_WIDTH</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">message</span><span class="p">.</span><span class="n">setRadius</span><span class="p">(</span><span class="mf">1.0f</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Add extra variables to the message</span>
<span class="w">        </span><span class="c1">// X Y (Z) are implicit for spatial messages</span>
<span class="w">        </span><span class="n">message</span><span class="p">.</span><span class="n">newVariable</span><span class="o">&lt;</span><span class="n">flamegpu</span><span class="o">::</span><span class="kt">id_t</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Define an agent named point</span>
<span class="w">    </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">AgentDescription</span><span class="w"> </span><span class="o">&amp;</span><span class="n">agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">model</span><span class="p">.</span><span class="n">newAgent</span><span class="p">(</span><span class="s">&quot;point&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Assign the agent some variables (ID is implicit to agents, so we don&#39;t define it ourselves)</span>
<span class="w">    </span><span class="n">agent</span><span class="p">.</span><span class="n">newVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">agent</span><span class="p">.</span><span class="n">newVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">agent</span><span class="p">.</span><span class="n">newVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;z&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">agent</span><span class="p">.</span><span class="n">newVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;drift&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Setup the two agent functions</span>
<span class="w">    </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">AgentFunctionDescription</span><span class="w"> </span><span class="o">&amp;</span><span class="n">out_fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">agent</span><span class="p">.</span><span class="n">newFunction</span><span class="p">(</span><span class="s">&quot;output_message&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">output_message</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">out_fn</span><span class="p">.</span><span class="n">setMessageOutput</span><span class="p">(</span><span class="s">&quot;location&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">AgentFunctionDescription</span><span class="w"> </span><span class="o">&amp;</span><span class="n">in_fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">agent</span><span class="p">.</span><span class="n">newFunction</span><span class="p">(</span><span class="s">&quot;input_message&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">input_message</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">in_fn</span><span class="p">.</span><span class="n">setMessageInput</span><span class="p">(</span><span class="s">&quot;location&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="p">{</span><span class="w">   </span><span class="c1">// (optional local scope block for cleaner grouping)</span>
<span class="w">        </span><span class="c1">// Define environment properties</span>
<span class="w">        </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">EnvironmentDescription</span><span class="w"> </span><span class="o">&amp;</span><span class="n">env</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">model</span><span class="p">.</span><span class="n">Environment</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="n">env</span><span class="p">.</span><span class="n">newProperty</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;AGENT_COUNT&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">AGENT_COUNT</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">env</span><span class="p">.</span><span class="n">newProperty</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;ENV_WIDTH&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ENV_WIDTH</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">env</span><span class="p">.</span><span class="n">newProperty</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;repulse&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">0.05f</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="p">{</span><span class="w">   </span><span class="c1">// (optional local scope block for cleaner grouping)</span>
<span class="w">        </span><span class="c1">// Message input depends on output</span>
<span class="w">        </span><span class="n">in_fn</span><span class="p">.</span><span class="n">dependsOn</span><span class="p">(</span><span class="n">out_fn</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Dependency specification</span>
<span class="w">        </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">DependencyGraph</span><span class="o">&amp;</span><span class="w"> </span><span class="n">dependencyGraph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">model</span><span class="p">.</span><span class="n">getDependencyGraph</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Output is the root of our graph</span>
<span class="w">        </span><span class="n">dependencyGraph</span><span class="p">.</span><span class="n">addRoot</span><span class="p">(</span><span class="n">out_fn</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">dependencyGraph</span><span class="p">.</span><span class="n">generateLayers</span><span class="p">(</span><span class="n">model</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="n">model</span><span class="p">.</span><span class="n">addInitFunction</span><span class="p">(</span><span class="n">create_agents</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Specify the desired StepLoggingConfig</span>
<span class="w">    </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">StepLoggingConfig</span><span class="w"> </span><span class="nf">step_log_cfg</span><span class="p">(</span><span class="n">model</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Log every step</span>
<span class="w">    </span><span class="n">step_log_cfg</span><span class="p">.</span><span class="n">setFrequency</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Include the mean of the &quot;point&quot; agent population&#39;s variable &#39;drift&#39;</span>
<span class="w">    </span><span class="n">step_log_cfg</span><span class="p">.</span><span class="n">agent</span><span class="p">(</span><span class="s">&quot;point&quot;</span><span class="p">).</span><span class="n">logMean</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;drift&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Create the simulation</span>
<span class="w">    </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">CUDASimulation</span><span class="w"> </span><span class="nf">cuda_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Attach the logging config</span>
<span class="w">    </span><span class="n">cuda_model</span><span class="p">.</span><span class="n">setStepLog</span><span class="p">(</span><span class="n">step_log_cfg</span><span class="p">);</span><span class="w"></span>

<span class="c1">// Only compile this block if being built with visualisation support</span>
<span class="cp">#ifdef VISUALISATION</span>
<span class="w">    </span><span class="c1">// Create visualisation</span>
<span class="w">    </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">visualiser</span><span class="o">::</span><span class="n">ModelVis</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m_vis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cuda_model</span><span class="p">.</span><span class="n">getVisualisation</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Set the initial camera location and speed</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">INIT_CAM</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ENV_WIDTH</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2.0f</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">m_vis</span><span class="p">.</span><span class="n">setInitialCameraTarget</span><span class="p">(</span><span class="n">INIT_CAM</span><span class="p">,</span><span class="w"> </span><span class="n">INIT_CAM</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">m_vis</span><span class="p">.</span><span class="n">setInitialCameraLocation</span><span class="p">(</span><span class="n">INIT_CAM</span><span class="p">,</span><span class="w"> </span><span class="n">INIT_CAM</span><span class="p">,</span><span class="w"> </span><span class="n">ENV_WIDTH</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">m_vis</span><span class="p">.</span><span class="n">setCameraSpeed</span><span class="p">(</span><span class="mf">0.01f</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">m_vis</span><span class="p">.</span><span class="n">setSimulationSpeed</span><span class="p">(</span><span class="mi">25</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Add &quot;point&quot; agents to the visualisation</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="o">&amp;</span><span class="n">point_agt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m_vis</span><span class="p">.</span><span class="n">addAgent</span><span class="p">(</span><span class="s">&quot;point&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Location variables have names &quot;x&quot; and &quot;y&quot; so will be used by default</span>
<span class="w">    </span><span class="n">point_agt</span><span class="p">.</span><span class="n">setModel</span><span class="p">(</span><span class="n">flamegpu</span><span class="o">::</span><span class="n">visualiser</span><span class="o">::</span><span class="n">Stock</span><span class="o">::</span><span class="n">Models</span><span class="o">::</span><span class="n">ICOSPHERE</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">point_agt</span><span class="p">.</span><span class="n">setModelScale</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mf">10.0f</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Mark the environment bounds</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">pen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m_vis</span><span class="p">.</span><span class="n">newPolylineSketch</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2f</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pen</span><span class="p">.</span><span class="n">addVertex</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pen</span><span class="p">.</span><span class="n">addVertex</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">ENV_WIDTH</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pen</span><span class="p">.</span><span class="n">addVertex</span><span class="p">(</span><span class="n">ENV_WIDTH</span><span class="p">,</span><span class="w"> </span><span class="n">ENV_WIDTH</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pen</span><span class="p">.</span><span class="n">addVertex</span><span class="p">(</span><span class="n">ENV_WIDTH</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">pen</span><span class="p">.</span><span class="n">addVertex</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Open the visualiser window</span>
<span class="w">    </span><span class="n">m_vis</span><span class="p">.</span><span class="n">activate</span><span class="p">();</span><span class="w"></span>
<span class="cp">#endif</span>

<span class="w">    </span><span class="c1">// Run the simulation</span>
<span class="w">    </span><span class="n">cuda_model</span><span class="p">.</span><span class="n">simulate</span><span class="p">();</span><span class="w"></span>

<span class="cp">#ifdef VISUALISATION</span>
<span class="w">    </span><span class="c1">// Keep the visualisation window active after the simulation has completed</span>
<span class="w">    </span><span class="n">m_vis</span><span class="p">.</span><span class="n">join</span><span class="p">();</span><span class="w"></span>
<span class="cp">#endif</span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-15-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-15-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyflamegpu</span>
<span class="c1"># Import sys for access to run args</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="c1"># Agent Function to output the agents ID and position in to a 2D spatial message list</span>
<span class="n">output_message</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">FLAMEGPU_AGENT_FUNCTION(output_message, flamegpu::MessageNone, flamegpu::MessageSpatial2D) {</span>
<span class="s2">    FLAMEGPU-&gt;message_out.setVariable&lt;flamegpu::id_t&gt;(&quot;id&quot;, FLAMEGPU-&gt;getID());</span>
<span class="s2">    FLAMEGPU-&gt;message_out.setLocation(</span>
<span class="s2">        FLAMEGPU-&gt;getVariable&lt;float&gt;(&quot;x&quot;),</span>
<span class="s2">        FLAMEGPU-&gt;getVariable&lt;float&gt;(&quot;y&quot;));</span>
<span class="s2">    return flamegpu::ALIVE;</span>
<span class="s2">}</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="c1"># Agent Function to read the location messages and decide how the agent should move</span>
<span class="n">input_message</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">FLAMEGPU_AGENT_FUNCTION(input_message, flamegpu::MessageSpatial2D, flamegpu::MessageNone) {</span>
<span class="s2">    const flamegpu::id_t ID = FLAMEGPU-&gt;getID();</span>
<span class="s2">    const float REPULSE_FACTOR = FLAMEGPU-&gt;environment.getProperty&lt;float&gt;(&quot;repulse&quot;);</span>
<span class="s2">    const float RADIUS = FLAMEGPU-&gt;message_in.radius();</span>
<span class="s2">    float fx = 0.0;</span>
<span class="s2">    float fy = 0.0;</span>
<span class="s2">    const float x1 = FLAMEGPU-&gt;getVariable&lt;float&gt;(&quot;x&quot;);</span>
<span class="s2">    const float y1 = FLAMEGPU-&gt;getVariable&lt;float&gt;(&quot;y&quot;);</span>
<span class="s2">    int count = 0;</span>
<span class="s2">    for (const auto &amp;message : FLAMEGPU-&gt;message_in(x1, y1)) {</span>
<span class="s2">        if (message.getVariable&lt;flamegpu::id_t&gt;(&quot;id&quot;) != ID) {</span>
<span class="s2">            const float x2 = message.getVariable&lt;float&gt;(&quot;x&quot;);</span>
<span class="s2">            const float y2 = message.getVariable&lt;float&gt;(&quot;y&quot;);</span>
<span class="s2">            float x21 = x2 - x1;</span>
<span class="s2">            float y21 = y2 - y1;</span>
<span class="s2">            const float separation = sqrt(x21*x21 + y21*y21);</span>
<span class="s2">            if (separation &lt; RADIUS &amp;&amp; separation &gt; 0.0f) {</span>
<span class="s2">                float k = sinf((separation / RADIUS)*3.141f*-2)*REPULSE_FACTOR;</span>
<span class="s2">                // Normalise without recalculating separation</span>
<span class="s2">                x21 /= separation;</span>
<span class="s2">                y21 /= separation;</span>
<span class="s2">                fx += k * x21;</span>
<span class="s2">                fy += k * y21;</span>
<span class="s2">                count++;</span>
<span class="s2">            }</span>
<span class="s2">        }</span>
<span class="s2">    }</span>
<span class="s2">    fx /= count &gt; 0 ? count : 1;</span>
<span class="s2">    fy /= count &gt; 0 ? count : 1;</span>
<span class="s2">    FLAMEGPU-&gt;setVariable&lt;float&gt;(&quot;x&quot;, x1 + fx);</span>
<span class="s2">    FLAMEGPU-&gt;setVariable&lt;float&gt;(&quot;y&quot;, y1 + fy);</span>
<span class="s2">    FLAMEGPU-&gt;setVariable&lt;float&gt;(&quot;drift&quot;, sqrt(fx*fx + fy*fy));</span>
<span class="s2">    return flamegpu::ALIVE;</span>
<span class="s2">}</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="k">class</span> <span class="nc">create_agents</span><span class="p">(</span><span class="n">pyflamegpu</span><span class="o">.</span><span class="n">HostFunctionCallback</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">FLAMEGPU</span><span class="p">):</span>
        <span class="c1"># Fetch the desired agent count and environment width</span>
        <span class="n">AGENT_COUNT</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">getPropertyUInt</span><span class="p">(</span><span class="s2">&quot;AGENT_COUNT&quot;</span><span class="p">)</span>
        <span class="n">ENV_WIDTH</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">getPropertyFloat</span><span class="p">(</span><span class="s2">&quot;ENV_WIDTH&quot;</span><span class="p">)</span>
        <span class="c1"># Create agents</span>
        <span class="n">t_pop</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">.</span><span class="n">agent</span><span class="p">(</span><span class="s2">&quot;point&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">AGENT_COUNT</span><span class="p">):</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">t_pop</span><span class="o">.</span><span class="n">newAgent</span><span class="p">()</span>
            <span class="n">t</span><span class="o">.</span><span class="n">setVariableFloat</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">FLAMEGPU</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniformFloat</span><span class="p">()</span> <span class="o">*</span> <span class="n">ENV_WIDTH</span><span class="p">)</span>
            <span class="n">t</span><span class="o">.</span><span class="n">setVariableFloat</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">FLAMEGPU</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniformFloat</span><span class="p">()</span> <span class="o">*</span> <span class="n">ENV_WIDTH</span><span class="p">)</span>

<span class="c1"># Define some useful constants</span>
<span class="n">AGENT_COUNT</span> <span class="o">=</span> <span class="mi">16384</span>
<span class="n">ENV_WIDTH</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">AGENT_COUNT</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">))</span>

<span class="c1"># Define the FLAME GPU model</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">pyflamegpu</span><span class="o">.</span><span class="n">ModelDescription</span><span class="p">(</span><span class="s2">&quot;Circles Tutorial&quot;</span><span class="p">)</span>

<span class="c1"># Define a message of type MessageSpatial2D named location</span>
<span class="n">message</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">newMessageSpatial2D</span><span class="p">(</span><span class="s2">&quot;location&quot;</span><span class="p">)</span>
<span class="c1"># Configure the message list</span>
<span class="n">message</span><span class="o">.</span><span class="n">setMin</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">message</span><span class="o">.</span><span class="n">setMax</span><span class="p">(</span><span class="n">ENV_WIDTH</span><span class="p">,</span> <span class="n">ENV_WIDTH</span><span class="p">)</span>
<span class="n">message</span><span class="o">.</span><span class="n">setRadius</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># Add extra variables to the message</span>
<span class="c1"># X Y (Z) are implicit for spatial messages</span>
<span class="n">message</span><span class="o">.</span><span class="n">newVariableID</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>

<span class="c1"># Define an agent named point</span>
<span class="n">agent</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">newAgent</span><span class="p">(</span><span class="s2">&quot;point&quot;</span><span class="p">)</span>
<span class="c1"># Assign the agent some variables (ID is implicit to agents, so we don&#39;t define it ourselves)</span>
<span class="n">agent</span><span class="o">.</span><span class="n">newVariableFloat</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">)</span>
<span class="n">agent</span><span class="o">.</span><span class="n">newVariableFloat</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">)</span>
<span class="n">agent</span><span class="o">.</span><span class="n">newVariableFloat</span><span class="p">(</span><span class="s2">&quot;z&quot;</span><span class="p">)</span>
<span class="n">agent</span><span class="o">.</span><span class="n">newVariableFloat</span><span class="p">(</span><span class="s2">&quot;drift&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="c1"># Setup the two agent functions</span>
<span class="n">out_fn</span> <span class="o">=</span> <span class="n">agent</span><span class="o">.</span><span class="n">newRTCFunction</span><span class="p">(</span><span class="s2">&quot;output_message&quot;</span><span class="p">,</span> <span class="n">output_message</span><span class="p">)</span>
<span class="n">out_fn</span><span class="o">.</span><span class="n">setMessageOutput</span><span class="p">(</span><span class="s2">&quot;location&quot;</span><span class="p">)</span>
<span class="n">in_fn</span> <span class="o">=</span> <span class="n">agent</span><span class="o">.</span><span class="n">newRTCFunction</span><span class="p">(</span><span class="s2">&quot;input_message&quot;</span><span class="p">,</span> <span class="n">input_message</span><span class="p">)</span>
<span class="n">in_fn</span><span class="o">.</span><span class="n">setMessageInput</span><span class="p">(</span><span class="s2">&quot;location&quot;</span><span class="p">)</span>

<span class="c1"># Define environment properties</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Environment</span><span class="p">()</span>
<span class="n">env</span><span class="o">.</span><span class="n">newPropertyUInt</span><span class="p">(</span><span class="s2">&quot;AGENT_COUNT&quot;</span><span class="p">,</span> <span class="n">AGENT_COUNT</span><span class="p">)</span>
<span class="n">env</span><span class="o">.</span><span class="n">newPropertyFloat</span><span class="p">(</span><span class="s2">&quot;ENV_WIDTH&quot;</span><span class="p">,</span> <span class="n">ENV_WIDTH</span><span class="p">)</span>
<span class="n">env</span><span class="o">.</span><span class="n">newPropertyFloat</span><span class="p">(</span><span class="s2">&quot;repulse&quot;</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">)</span>

<span class="c1"># Message input depends on output</span>
<span class="n">in_fn</span><span class="o">.</span><span class="n">dependsOn</span><span class="p">(</span><span class="n">out_fn</span><span class="p">)</span>
<span class="c1"># Dependency specification</span>
<span class="n">dependencyGraph</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">getDependencyGraph</span><span class="p">()</span>
<span class="c1"># Output is the root of our graph</span>
<span class="n">dependencyGraph</span><span class="o">.</span><span class="n">addRoot</span><span class="p">(</span><span class="n">out_fn</span><span class="p">)</span>
<span class="n">dependencyGraph</span><span class="o">.</span><span class="n">generateLayers</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">addInitFunctionCallback</span><span class="p">(</span><span class="n">create_agents</span><span class="p">()</span><span class="o">.</span><span class="n">__disown__</span><span class="p">())</span>

<span class="c1"># Specify the desired StepLoggingConfig</span>
<span class="n">step_log_cfg</span> <span class="o">=</span> <span class="n">pyflamegpu</span><span class="o">.</span><span class="n">StepLoggingConfig</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<span class="c1"># Log every step</span>
<span class="n">step_log_cfg</span><span class="o">.</span><span class="n">setFrequency</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># Include the mean of the &quot;point&quot; agent population&#39;s variable &#39;drift&#39;</span>
<span class="n">step_log_cfg</span><span class="o">.</span><span class="n">agent</span><span class="p">(</span><span class="s2">&quot;point&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">logMeanFloat</span><span class="p">(</span><span class="s2">&quot;drift&quot;</span><span class="p">)</span>

<span class="c1"># Create the simulation</span>
<span class="n">cuda_model</span> <span class="o">=</span> <span class="n">pyflamegpu</span><span class="o">.</span><span class="n">CUDASimulation</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>

<span class="c1"># Attach the logging config</span>
<span class="n">cuda_model</span><span class="o">.</span><span class="n">setStepLog</span><span class="p">(</span><span class="n">step_log_cfg</span><span class="p">)</span>

<span class="c1"># Only run this block if pyflamegpu was built with visualisation support</span>
<span class="k">if</span> <span class="n">pyflamegpu</span><span class="o">.</span><span class="n">VISUALISATION</span><span class="p">:</span>
    <span class="c1"># Create visualisation</span>
    <span class="n">m_vis</span> <span class="o">=</span> <span class="n">cuda_model</span><span class="o">.</span><span class="n">getVisualisation</span><span class="p">()</span>
    <span class="c1"># Set the initial camera location and speed</span>
    <span class="n">INIT_CAM</span> <span class="o">=</span> <span class="n">ENV_WIDTH</span> <span class="o">/</span> <span class="mi">2</span>
    <span class="n">m_vis</span><span class="o">.</span><span class="n">setInitialCameraTarget</span><span class="p">(</span><span class="n">INIT_CAM</span><span class="p">,</span> <span class="n">INIT_CAM</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">m_vis</span><span class="o">.</span><span class="n">setInitialCameraLocation</span><span class="p">(</span><span class="n">INIT_CAM</span><span class="p">,</span> <span class="n">INIT_CAM</span><span class="p">,</span> <span class="n">ENV_WIDTH</span><span class="p">)</span>
    <span class="n">m_vis</span><span class="o">.</span><span class="n">setCameraSpeed</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
    <span class="n">m_vis</span><span class="o">.</span><span class="n">setSimulationSpeed</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
    <span class="c1"># Add &quot;point&quot; agents to the visualisation</span>
    <span class="n">point_agt</span> <span class="o">=</span> <span class="n">m_vis</span><span class="o">.</span><span class="n">addAgent</span><span class="p">(</span><span class="s2">&quot;point&quot;</span><span class="p">)</span>
    <span class="c1"># Location variables have names &quot;x&quot; and &quot;y&quot; so will be used by default</span>
    <span class="n">point_agt</span><span class="o">.</span><span class="n">setModel</span><span class="p">(</span><span class="n">pyflamegpu</span><span class="o">.</span><span class="n">ICOSPHERE</span><span class="p">);</span>
    <span class="n">point_agt</span><span class="o">.</span><span class="n">setModelScale</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mf">10.0</span><span class="p">);</span>
    <span class="c1"># Mark the environment bounds</span>
    <span class="n">pen</span> <span class="o">=</span> <span class="n">m_vis</span><span class="o">.</span><span class="n">newPolylineSketch</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span>
    <span class="n">pen</span><span class="o">.</span><span class="n">addVertex</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">pen</span><span class="o">.</span><span class="n">addVertex</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">ENV_WIDTH</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">pen</span><span class="o">.</span><span class="n">addVertex</span><span class="p">(</span><span class="n">ENV_WIDTH</span><span class="p">,</span> <span class="n">ENV_WIDTH</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">pen</span><span class="o">.</span><span class="n">addVertex</span><span class="p">(</span><span class="n">ENV_WIDTH</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">pen</span><span class="o">.</span><span class="n">addVertex</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="c1"># Open the visualiser window</span>
    <span class="n">m_vis</span><span class="o">.</span><span class="n">activate</span><span class="p">()</span>

<span class="c1"># Init and run the simulation</span>
<span class="n">cuda_model</span><span class="o">.</span><span class="n">initialise</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
<span class="n">cuda_model</span><span class="o">.</span><span class="n">simulate</span><span class="p">()</span>

<span class="k">if</span> <span class="n">pyflamegpu</span><span class="o">.</span><span class="n">VISUALISATION</span><span class="p">:</span>
    <span class="c1"># Keep the visualisation window active after the simulation has completed</span>
    <span class="n">m_vis</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</pre></div>
</div>
</div></div>
</div>
</div>
<div class="section" id="related-links">
<h2>Related Links<a class="headerlink" href="#related-links" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>User Guide Page: <a class="reference internal" href="../guide/13-seatbelts/index.html#seatbelts"><span class="std std-ref">What is SEATBELTS?</span></a></p></li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../index.html" class="btn btn-neutral float-left" title="Welcome to FLAME GPU 2’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../quickstart/index.html" class="btn btn-neutral float-right" title="Quickstart" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, University of Sheffield.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-XXXXXXX-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-XXXXXXX-1', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>