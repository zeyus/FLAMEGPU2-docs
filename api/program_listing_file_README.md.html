

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Program Listing for File README.md &mdash; FLAME GPU 2 0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/collapsible-lists/css/tree_view.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/collapsible-lists/js/CollapsibleLists.compressed.js"></script>
        <script src="../_static/collapsible-lists/js/apply-collapsible-lists.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: black" >
          

          
            <a href="../index.html" class="icon icon-home"> FLAME GPU 2
          

          
            
            <img src="../_static/flamegpu2-icon-notext-128.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../guide/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="library_root.html">Library API</a></li>
<li class="toctree-l1"><a class="reference internal" href="class_view_hierarchy.html">Class Hierarchy</a></li>
<li class="toctree-l1"><a class="reference internal" href="file_view_hierarchy.html">File Hierarchy</a></li>
<li class="toctree-l1"><a class="reference internal" href="unabridged_api.html">Full API</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">FLAME GPU 2</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Program Listing for File README.md</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/api/program_listing_file_README.md.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="program-listing-for-file-readme-md">
<span id="program-listing-file-readme-md"></span><h1>Program Listing for File README.md<a class="headerlink" href="#program-listing-for-file-readme-md" title="Permalink to this headline">¶</a></h1>
<p>↰ <a class="reference internal" href="file_README.md.html#file-readme-md"><span class="std std-ref">Return to documentation for file</span></a> (<code class="docutils literal notranslate"><span class="pre">README.md</span></code>)</p>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span><span class="gh"># FLAME GPU 2</span>

<span class="gu">### Introduction</span>

The project aim is to develop an existing computer application called FLAMEGPU, a high performance Graphics Processing Unit (GPU) extension to the FLAME framework that provides a mapping between a formal agent specifications with C based scripting and optimised CUDA code to support scalable muti-agent simulation.  The plan it to expand/extend features and capabilities of the exiting &lt;a href=&quot;https://github.com/FLAMEGPU/FLAMEGPU&quot;&gt;FLAMEGPU software&lt;/a&gt;, in order to position it as a middle-ware for complex systems simulation. The application is expected to be the equivalent of Thrust for simplifying complex systems on GPUs.  The FLAMEGPU library includes algorithms such as spatial partitioning, network communication.

The Code is currently under active development and should <span class="gs">**not be used**</span> until the first release.

<span class="gu">### Continuous Integration</span>

Continuous Integration (CI) is provided by Github Actions.
CI jobs <span class="ge">*only*</span> include compilation, as the CI workers do not include CUDA-capable GPUs.

[<span class="nt">![Ubuntu</span>](<span class="na">https://github.com/FLAMEGPU/FLAMEGPU2_dev/workflows/Ubuntu/badge.svg?branch=master</span>)](https://github.com/FLAMEGPU/FLAMEGPU2_dev/actions?query=workflow%3AUbuntu+branch%3Amaster) [<span class="nt">![Windows</span>](<span class="na">https://github.com/FLAMEGPU/FLAMEGPU2_dev/workflows/Windows/badge.svg?branch=master</span>)](https://github.com/FLAMEGPU/FLAMEGPU2_dev/actions?query=workflow%3AWindows+branch%3Amaster) [<span class="nt">![Lint</span>](<span class="na">https://github.com/FLAMEGPU/FLAMEGPU2_dev/workflows/Lint/badge.svg?branch=master</span>)](https://github.com/FLAMEGPU/FLAMEGPU2_dev/actions?query=workflow%3ALint+branch%3Amaster) [<span class="nt">![Docs</span>](<span class="na">https://github.com/FLAMEGPU/FLAMEGPU2_dev/workflows/Docs/badge.svg?branch=master</span>)](https://github.com/FLAMEGPU/FLAMEGPU2_dev/actions?query=workflow%3ADocs+branch%3Amaster)



<span class="gu">### Dependencies</span>

The dependencies below are required for building FLAME GPU 2.

Only documentation can be built without the required dependencies (however Doxygen is still required).

<span class="gu">#### Required</span>

+ [<span class="nt">CMake</span>](<span class="na">https://cmake.org/</span>) <span class="sb">`&gt;= 3.15`</span> (<span class="sb">`&gt;= 3.18`</span> recommended)
+ [<span class="nt">CUDA Toolkit</span>](<span class="na">https://developer.nvidia.com/cuda-toolkit</span>) <span class="sb">`&gt;= 10.0`</span>
+ [<span class="nt">git</span>](<span class="na">https://git-scm.com/</span>) (Used for dependency management)
+ <span class="ge">*Linux:*</span>
  + [<span class="nt">make</span>](<span class="na">https://www.gnu.org/software/make/</span>)
  + gcc/g++ <span class="sb">`&gt;= 7`</span> (version requirements [<span class="nt">here</span>](<span class="na">https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#system-requirements</span>))
+ <span class="ge">*Windows:*</span>
  + Visual Studio 2017 or higher (2019 recommended)

<span class="gu">#### Optional</span>
+ [<span class="nt">cpplint</span>](<span class="na">https://github.com/cpplint/cpplint</span>): Required for linting code
+ [<span class="nt">Doxygen</span>](<span class="na">http://www.doxygen.nl/</span>): Required for building documentation
+ [<span class="nt">Python</span>](<span class="na">https://www.python.org/</span>) <span class="sb">`&gt;= 3.x`</span>: required for python integration
+ [<span class="nt">swig</span>](<span class="na">http://www.swig.org/</span>) <span class="sb">`&gt;= 4.0.2`</span>: Required for python integration
  + Swig 4.x will be automatically downloaded by CMake if not provided (if possible).

<span class="gu">#### Known Issues</span>
&lt;!-- Thrust issue https://github.com/NVIDIA/thrust/issues/1090 --&gt;
+ Windows/MSVC and CUDA &lt; 11.0
  + There may be intermittent compilation errors due to an NVCC+MSVC bug exposed by Thrust/CUB.
  + Re-running the build appears to work in most cases, Otherwise consider upgrading to CUDA 11.0+ if possible.
+ Windows/MSVC and CUDA &lt;= 11.0
  + Incremental builds of executables may result in an error at link time (fatbinlink.c) if the flamegpu2 library has been rebuilt, due to a bug with the cuda visual studio integration when relative paths are used.
  + If this presents itself, re-save the any <span class="sb">`.cu`</span> file for the executable you are working on and build again.
  + A workaround is in place for CUDA 11.1+
+ CMake 3.16 has known issues on some platforms.
+ Python &lt;= 3.5 may encounter issues with dependency installation such as setuptools. If so, please manually install the correct version.
  + i.e. <span class="sb">`python3 -m pip install --upgrade &#39;setuptools; python_version &gt;= &quot;3.6&quot;&#39; &#39;setuptools&lt;51.3.0; python_version &lt; &quot;3.6&quot; and python_version &gt;= &quot;3.0&quot;&#39;`</span>


<span class="gu">### Building FLAME GPU 2</span>

FLAME GPU 2 uses [<span class="nt">CMake</span>](<span class="na">https://cmake.org/</span>), as a cross-platform process, for configuring and generating build directives, e.g. <span class="sb">`Makefile`</span> or <span class="sb">`.vcxproj`</span>. This is used to build the FLAMEGPU2 library, examples, tests and documentation.

<span class="gu">#### Linux</span>

Under Linux, <span class="sb">`cmake`</span> can be used to generate makefiles specific to your system:

<span class="sb">```</span>
<span class="sb">mkdir -p build &amp;&amp; cd build</span>
<span class="sb">cmake ..</span>
<span class="sb">make -j8</span>
<span class="sb">```</span>

The option <span class="sb">`-j8`</span> enables parallel compilation using upto 8 threads, this is recommended to improve build times.

By default a <span class="sb">`Makefile`</span> for the <span class="sb">`Release`</span> build configuration will be generated.

Alternatively, using <span class="sb">`-DCMAKE_BUILD_TYPE=`</span>, <span class="sb">`Debug`</span> or <span class="sb">`Profile`</span> build configurations can be generated:

<span class="sb">```</span>
<span class="sb">mkdir -p build &amp;&amp; cd build</span>
<span class="sb">cmake .. -DCMAKE_BUILD_TYPE=Profile</span>
<span class="sb">make -j8</span>
<span class="sb">```</span>

<span class="gu">#### Windows</span>

<span class="ge">*Note: If installing CMake on Windows ensure CMake is added to the system path, allowing `cmake` to be used via `cmd`, this option is disabled within the installer by default.*</span>

When generating Visual studio project files, using <span class="sb">`cmake`</span> (or <span class="sb">`cmake-gui`</span>), the platform <span class="gs">**must**</span> be specified as <span class="sb">`x64`</span>.

Using <span class="sb">`cmake`</span> this takes the form <span class="sb">`-A x64`</span>:

<span class="sb">```</span>
<span class="sb">mkdir build &amp;&amp; cd build</span>
<span class="sb">cmake .. -A x64</span>
<span class="sb">FLAMEGPU2.sln</span>
<span class="sb">```</span>

This command will use the latest version of Visual studio detected, and open the created Visual studio solution.
If the <span class="sb">`cmake`</span> command fails, the detected version does not support CUDA. Reinstalling CUDA may correct this issue.

Alternatively using <span class="sb">`-G`</span> the desired version of Visual studio can be specified:

<span class="sb">```</span>
<span class="sb">mkdir build &amp;&amp; cd build</span>
<span class="sb">cmake .. -G &quot;Visual Studio 16 2019&quot; -A x64</span>
<span class="sb">FLAMEGPU2.sln</span>
<span class="sb">```</span>

<span class="sb">`Visual Studio 16 2019`</span> can be replaced with any supported [<span class="nt">Visual studio generator</span>](<span class="na">https://cmake.org/cmake/help/latest/manual/cmake-generators.7.html#visual-studio-generators</span>) that is installed.


CMake will find and use the lastest CUDA toolkit avaialable by default. This choice can be overridden by specifying <span class="sb">`CMAKE_GENERATOR_TOOLSET`</span> to the desired CUDA version. I.e. to specify CUDA 11.1:

<span class="sb">```</span>
<span class="sb">cmake .. -DCMAKE_GENERATOR_TOOLSET=cuda=11.1</span>
<span class="sb">```</span>

<span class="gu">#### Configuring CMake</span>

The following options are available when calling <span class="sb">`cmake`</span> on either Linux or Windows. It is also possible to manage these options via <span class="sb">`cmake-gui`</span> on Windows, often by setting the variable of the same name.

<span class="ge">*The examples in the following sections use Linux syntax, it is necessary to include the `-A` (and `-G`) arguments from above when calling `cmake` on Windows. Similarly `.vcxproj` and `.sln` files will be generated rather than `Makefile`.*</span>

<span class="gu">##### Individual examples</span>

Build directives for individual examples can be built from their respective directories

<span class="sb">```</span>
<span class="sb">cd examples/mas/</span>
<span class="sb">mkdir -p build &amp;&amp; cd build</span>
<span class="sb">cmake ..</span>
<span class="sb">```</span>

<span class="gu">##### Visualisation</span>

By default FGPU2 will not build visualisations, however this can be enabled with the cmake option <span class="sb">`-DVISUALISATION=ON`</span>. This also introduces the <span class="sb">`VISUALISATION`</span> preprocessor macro to all projects, so that optional visualisation code can be enabled.

On Windows this will then automatically download the visualisation repository and all dependencies, as such the initial CMake configuration after enabling visualisation may take longer than expected.
On Linux you may need to install additional packages, refer to the CMake configure output for clarification of which packages are missing from your system.

<span class="gs">**Visualisation Dependencies:**</span>
+ [<span class="nt">SDL</span>](<span class="na">https://www.libsdl.org/</span>)
+ [<span class="nt">GLM</span>](<span class="na">http://glm.g-truc.net/</span>) <span class="ge">*(consistent C++/GLSL vector maths functionality)*</span>
+ [<span class="nt">GLEW</span>](<span class="na">http://glew.sourceforge.net/</span>) <span class="ge">*(GL extension loader)*</span>
+ [<span class="nt">FreeType</span>](<span class="na">http://www.freetype.org/</span>)  <span class="ge">*(font loading)*</span>
+ [<span class="nt">DevIL</span>](<span class="na">http://openil.sourceforge.net/</span>)  <span class="ge">*(image loading)*</span>
+ [<span class="nt">Fontconfig</span>](<span class="na">https://www.fontconfig.org/</span>)  <span class="ge">*(Linux only, font detection)*</span>

The visualisation codebase can be found at [<span class="nt">this location</span>](<span class="na">https://github.com/FLAMEGPU/FLAMEGPU2-visualiser</span>) and is a fork of [<span class="nt">sdl_exp</span>](<span class="na">https://github.com/Robadob/sdl_exp</span>).

<span class="gu">##### Testing</span>

The test suite can be built from the root directory using <span class="sb">`-DBUILD_TESTS=ON`</span>:

<span class="sb">```</span>
<span class="sb">mkdir -p build &amp;&amp; cd build</span>
<span class="sb">cmake .. -DBUILD_TESTS=ON</span>
<span class="sb">make -j8</span>
<span class="sb">```</span>

The first time CMake is configured with <span class="sb">`-DBUILD_TESTS=ON`</span> an internet connection is required, as [<span class="nt">GoogleTest</span>](<span class="na">https://github.com/google/googletest</span>) is downloaded and built.
Subsequent reconfigures will attempt to update this copy, but will continue if updating fails.
Automatic updating of GoogleTest can be disabled by passing <span class="sb">`-DBUILD_TESTS=OFF`</span>.

GoogleTest runtime documentation can be found [<span class="nt">here</span>](<span class="na">https://github.com/google/googletest/blob/master/googletest/docs/advanced.md</span>).
In particular <span class="sb">`--gtest_catch_exceptions=0`</span> may be useful during test development, so that unhandled exceptions are passed straight to the debugger.

<span class="gu">##### Documentation</span>

If you wish to build the documentation, [<span class="nt">doxygen</span>](<span class="na">http://www.doxygen.nl/</span>) must be available on your system.

A build file for documentation is generated at the same time as build files for the flamegpu2 library.

This generates the target <span class="sb">`docs`</span> which can be called with <span class="sb">`make`</span>.

<span class="sb">```</span>
<span class="sb">cd src</span>
<span class="sb">mkdir -p build &amp;&amp; cd build</span>
<span class="sb">cmake ..</span>
<span class="sb">make docs</span>
<span class="sb">```</span>

<span class="ge">*When using Visual Studio, the target `docs` will appear as a project within the created solution.*</span>

<span class="gs">**Building Documentation Without CUDA**</span>
If you have Doxygen and don&#39;t have the CUDA compiler, CMake will generate a minimal project for only building the documentation.

On Linux the standard documentation command, shown above, can be used if <span class="sb">`make`</span> is available.

If <span class="sb">`make`</span> is unavailable, <span class="ge">*e.g. on Windows*</span>, <span class="sb">`make docs`</span> can be replaced with a direct call to <span class="sb">`doxygen`</span>:

<span class="sb">```</span>
<span class="sb">doxygen Doxyfile.docs</span>
<span class="sb">```</span>

<span class="gu">##### Device Architectures</span>

CUDA device architectures can be specified via <span class="sb">`-DCUDA_ARCH`</span> when generating make files, using a semi colon, space or comma separated list of compute capability numbers. I.e to build for just SM_61 and SM_70:

<span class="sb">```</span>
<span class="sb">mkdir -p build &amp;&amp; cd build</span>
<span class="sb">cmake .. -DCUDA_ARCH=&quot;61;70&quot;</span>
<span class="sb">make -j8</span>
<span class="sb">```</span>

Pass <span class="sb">`-DCUDA_ARCH=`</span> to reset to the default.

<span class="gu">##### NVTX Markers</span>

[<span class="nt">NVTX markers</span>](<span class="na">https://docs.nvidia.com/cuda/profiler-users-guide/index.html#nvtx</span>) can be enabled to improve the profiling experience, using the <span class="sb">`USE_NVTX`</span> Cmake option.

I.e. <span class="sb">`-DUSE_NVTX=ON`</span> will enable NVTX markers and allow custom markers to be included. This is implied by the <span class="sb">`Profile`</span> build configuration.
See <span class="sb">`include/util/nvtx.h`</span> and the associated documentation for how to apply custom markers.

<span class="gu">### Running FLAME GPU 2</span>
Examples for FLAME GPU 2 build to <span class="sb">`&lt;cmake_build_path&gt;/bin/&lt;operating_system&gt;-x64/&lt;Debug|Release|Profile&gt;/`</span>, and can be executed from that directory via command line.

If wishing to run examples within Visual Studio it is necessary to right click the desired example in the Solution Explorer and select <span class="sb">`Debug &gt; Start New Instance`</span>. Alternatively, if <span class="sb">`Set as StartUp Project`</span> is selected, the main debugging menus can be used to initiate execution. To configure command line argument for execution within Visual Studio, right click the desired example in the Solution Explorer and select <span class="sb">`Properties`</span>, in this dialog select <span class="sb">`Debugging`</span> in the left hand menu to display the entry field for <span class="sb">`command arguments`</span>. Note, it may be necessary to change the configuration as the properties dialog may be targeting a different configuration to the current build configuration.

<span class="gu">#### Runtime compilation of Agent Functions</span>

FLAME GPU 2 supports runtime compilation of agent functions. E.g. specification of agent functions, or agent function conditions, as strings. This is a prerequisite for other language support via [<span class="nt">SWIG</span>](<span class="na">http://www.swig.org/</span>). In order to test RTC features (in <span class="sb">`tests/test_cases/runtime/test_rtc_device_api.cu`</span>) you must set the following environment variables.

<span class="k">1.</span> <span class="sb">`FLAMEGPU2_INC_DIR`</span> This should be set to the <span class="sb">`\include`</span> directory of the main FLAMEGPU2 directory.
<span class="k">2.</span> <span class="sb">`CUDA_PATH`</span> This may be set when installing CUDA, however if it does not exist or has been changed this then it <span class="gs">**must**</span> point to the CUDA installation folder of the CUDA version used to compile FLAMEGPU (e.g. the one detected by CMake).

<span class="gu">### Creating your own project using FLAME GPU 2</span>
You should use the [<span class="nt">FLAME GPU 2 template project</span>](<span class="na">https://github.com/FLAMEGPU/FLAMEGPU2_example_template</span>). This provides a simple standalone example with CMake files ready to build a model using FLAME GPU 2.
</pre></div>
</div>
</section>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2019, University of Sheffield.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-XXXXXXX-1', 'auto');
    
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>