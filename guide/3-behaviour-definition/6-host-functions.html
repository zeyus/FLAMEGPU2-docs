

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Host Functions &mdash; FLAME GPU 2 0 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
        <script src="../../_static/tabs.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Initial Conditions" href="../4-initial-conditions/index.html" />
    <link rel="prev" title="Conditional Behaviours" href="5-conditional-behaviours.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: black" >
          

          
            <a href="../../index.html" class="icon icon-home"> FLAME GPU 2
          

          
            
            <img src="../../_static/flamegpu2-icon-notext-128.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../quickstart/index.html">Quickstart Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../quickstart/1-quickstart.html">Quickstart Guide</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../1-meta/index.html">First Steps</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../1-meta/1-philosophy.html">FLAMEGPU2 Design Philosophy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-meta/2-creating-project.html">Creating a Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1-meta/3-structure.html">Structure of a FLAMEGPU2 Program</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../1-meta/3-structure.html#agent-host-function-definitions">Agent/Host Function Definitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../1-meta/3-structure.html#model-declaration">Model Declaration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../1-meta/3-structure.html#initialisation">Initialisation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../1-meta/3-structure.html#execution">Execution</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../2-model-definition/index.html">Defining a Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../2-model-definition/1-model.html">Creating a Model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../2-model-definition/1-model.html#what-is-a-model">What is a Model?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../2-model-definition/1-model.html#creating-a-modeldescription-object">Creating a ModelDescription Object</a></li>
<li class="toctree-l4"><a class="reference internal" href="../2-model-definition/1-model.html#more-info">More Info</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../2-model-definition/2-environment.html">Adding Environmental Properties</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../2-model-definition/2-environment.html#what-is-an-environment">What is an Environment?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../2-model-definition/2-environment.html#creating-an-environmentdescription-object">Creating an EnvironmentDescription Object</a></li>
<li class="toctree-l4"><a class="reference internal" href="../2-model-definition/2-environment.html#defining-environmental-properties">Defining Environmental Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../2-model-definition/2-environment.html#attaching-the-environment-to-a-model">Attaching the Environment to a Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../2-model-definition/2-environment.html#full-example-code-from-this-page">Full Example Code From This Page</a></li>
<li class="toctree-l4"><a class="reference internal" href="../2-model-definition/2-environment.html#more-info">More Info</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../2-model-definition/3-agent.html">Defining Agents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../2-model-definition/3-agent.html#defining-a-new-agent-type">Defining a New Agent Type</a></li>
<li class="toctree-l4"><a class="reference internal" href="../2-model-definition/3-agent.html#agent-variables">Agent Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="../2-model-definition/3-agent.html#agent-array-variables">Agent Array Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="../2-model-definition/3-agent.html#agent-states">Agent States</a></li>
<li class="toctree-l4"><a class="reference internal" href="../2-model-definition/3-agent.html#full-example-code-from-this-page">Full Example Code From This Page</a></li>
<li class="toctree-l4"><a class="reference internal" href="../2-model-definition/3-agent.html#more-info">More Info</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Defining Behaviours</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="1-defining-agent-functions.html">Defining Agent Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="1-defining-agent-functions.html#what-is-an-agent-function">What is an Agent Function?</a></li>
<li class="toctree-l4"><a class="reference internal" href="1-defining-agent-functions.html#defining-an-agent-function">Defining an Agent Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="1-defining-agent-functions.html#defining-a-runtime-compiled-agent-function-c">Defining a Runtime-Compiled Agent Function (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="1-defining-agent-functions.html#flamegpu-device-functions">FLAMEGPU Device Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="1-defining-agent-functions.html#flamegpu-host-device-functions">FLAMEGPU Host Device Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="1-defining-agent-functions.html#full-example-code-from-this-page">Full Example Code From This Page</a></li>
<li class="toctree-l4"><a class="reference internal" href="1-defining-agent-functions.html#more-info">More Info</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="2-modifying-agent-variables.html">Modifying Agent Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="3-interacting-with-environment.html">Interacting with the Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="4-agent-communication.html">Agent Communication</a><ul>
<li class="toctree-l4"><a class="reference internal" href="4-agent-communication.html#defining-messages">Defining Messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="4-agent-communication.html#sending-messages">Sending Messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="4-agent-communication.html#reading-messages">Reading Messages</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="5-conditional-behaviours.html">Conditional Behaviours</a><ul>
<li class="toctree-l4"><a class="reference internal" href="5-conditional-behaviours.html#agent-function-conditions">Agent Function Conditions</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Host Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#defining-host-functions">Defining Host Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#adding-host-functions-to-a-model">Adding Host Functions to a Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="#writing-host-functions">Writing Host Functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../4-initial-conditions/index.html">Initial Conditions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../4-initial-conditions/1-agent-populations.html">Agent Populations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../4-initial-conditions/1-agent-populations.html#creating-an-agent-population">Creating an Agent Population</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../4-initial-conditions/2-initial-properties.html">Initialising Agent Variables</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../4-initial-conditions/2-initial-properties.html#initialising-a-population">Initialising a Population</a></li>
<li class="toctree-l4"><a class="reference internal" href="../4-initial-conditions/2-initial-properties.html#accessing-a-single-agent">Accessing a Single Agent</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../4-initial-conditions/4-rng-seeds.html">Random Number Generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../4-initial-conditions/5-from-disk.html">Initialisation from Disk</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../5-running-a-sim/index.html">Running a Simulation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../5-running-a-sim/1-defining-execution-order.html">Defining Execution Order</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../5-running-a-sim/1-defining-execution-order.html#specifying-dependencies">Specifying Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../5-running-a-sim/1-defining-execution-order.html#accessing-the-dependencygraph">Accessing the DependencyGraph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../5-running-a-sim/1-defining-execution-order.html#specifying-roots">Specifying Roots</a></li>
<li class="toctree-l4"><a class="reference internal" href="../5-running-a-sim/1-defining-execution-order.html#generating-layers">Generating Layers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../5-running-a-sim/1-defining-execution-order.html#visualising-the-dependencies">Visualising the Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../5-running-a-sim/1-defining-execution-order.html#manual-layer-specification">Manual Layer Specification</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../5-running-a-sim/2-launching-a-sim.html">Launching a Simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../5-running-a-sim/3-end-conditions.html">Simulation Exit Conditions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../5-running-a-sim/3-end-conditions.html#max-steps">Max Steps</a></li>
<li class="toctree-l4"><a class="reference internal" href="../5-running-a-sim/3-end-conditions.html#conditional-exit">Conditional Exit</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../5-running-a-sim/4-collecting-data.html">Collecting Data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../5-running-a-sim/4-collecting-data.html#saving-agent-state">Saving Agent State</a></li>
<li class="toctree-l4"><a class="reference internal" href="../5-running-a-sim/4-collecting-data.html#collecting-other-information">Collecting Other Information</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../6-agent-birth-death/index.html">Agent Birth/Death</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../6-agent-birth-death/1-agent-birth-device.html">Agent Birth from Agent Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../6-agent-birth-death/1-agent-birth-device.html#agent-creation-overview">Agent Creation Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../6-agent-birth-death/1-agent-birth-device.html#enabling-agent-creation">Enabling Agent Creation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../6-agent-birth-death/1-agent-birth-device.html#creating-the-new-agent">Creating the New Agent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../6-agent-birth-death/1-agent-birth-device.html#conditional-agent-creation">Conditional Agent Creation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../6-agent-birth-death/1-agent-birth-device.html#full-example-code-from-this-page">Full Example Code From This Page</a></li>
<li class="toctree-l4"><a class="reference internal" href="../6-agent-birth-death/1-agent-birth-device.html#more-info">More Info</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../6-agent-birth-death/2-agent-birth-host.html">Agent Birth from Host Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6-agent-birth-death/3-agent-death.html">Agent Death</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../6-agent-birth-death/3-agent-death.html#enabling-agent-death">Enabling Agent Death</a></li>
<li class="toctree-l4"><a class="reference internal" href="../6-agent-birth-death/3-agent-death.html#id1">Agent Death</a></li>
<li class="toctree-l4"><a class="reference internal" href="../6-agent-birth-death/3-agent-death.html#more-info">More Info</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../7-submodels/index.html">Submodels</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../7-submodels/1-defining-a-submodel.html">Defining a Submodel</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../7-submodels/1-defining-a-submodel.html#submodel-definition">SubModel Definition</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../8-running-multiple-sims/index.html">Running Multiple Simulations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../8-running-multiple-sims/4-multiple-sims.html">Launching Ensembles</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../9-visualisation/index.html">Visualisation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../9-visualisation/1-building-with-vis.html">Building with Visualisation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../9-visualisation/1-building-with-vis.html#default-visualisation">Default Visualisation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../9-visualisation/2-custom-models.html">Custom Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../9-visualisation/3-custom-colours.html">Custom Colours</a></li>
<li class="toctree-l3"><a class="reference internal" href="../9-visualisation/4-representing-properties-with-colour.html">Custom Models</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../10-performance-troubleshooting/index.html">Performance Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../10-performance-troubleshooting/1-perf.html">Performance Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../11-fgpu2-source/index.html">Building or Modifying the FGPU2 Source</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../11-fgpu2-source/1-build-from-source.html">Building FGPU2 from Source</a></li>
<li class="toctree-l3"><a class="reference internal" href="../11-fgpu2-source/2-request-a-new-feature.html">Requesting Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../11-fgpu2-source/3-contribute.html">Contributing to FLAMEGPU2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../11-fgpu2-source/3-contribute.html#reporting-bugs">Reporting Bugs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../11-fgpu2-source/3-contribute.html#submitting-pull-requests">Submitting Pull Requests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../11-fgpu2-source/3-contribute.html#license">License</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../example-docs/index.html">Example Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../example-docs/1-boids-bruteforce.html">Boids Brute Force</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">FLAME GPU 2</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">User Guide</a> &raquo;</li>
        
          <li><a href="index.html">Defining Behaviours</a> &raquo;</li>
        
      <li>Host Functions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/guide/3-behaviour-definition/6-host-functions.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="host-functions">
<h1>Host Functions<a class="headerlink" href="#host-functions" title="Permalink to this headline">¶</a></h1>
<p>Not all model behaviours can be achieved with agent functions. Some behaviours need to operate over at a level above agents, host functions provide this functionality. If you need to perform a reduction over an agent population, sort agents or update environment properties a host function can deliver.</p>
<section id="defining-host-functions">
<h2>Defining Host Functions<a class="headerlink" href="#defining-host-functions" title="Permalink to this headline">¶</a></h2>
<p>Host functions have a similar interface to agent functions, however the core difference is that Python API host functions are implemented in Python.</p>
<p>Example definition:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-0-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-0-Qysr" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-0-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button></div><div aria-labelledby="tab-0-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" id="panel-0-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define an host function called host_fn1</span>
<span class="k">class</span> <span class="nc">host_fn1</span><span class="p">(</span><span class="n">pyflamegpu</span><span class="o">.</span><span class="n">HostFunctionCallback</span><span class="p">):</span>
  <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">     The explicit __init__() is optional, however if used the superclass __init__() must be called</span>
<span class="sd">  &#39;&#39;&#39;</span>
  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

  <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">FLAMEGPU</span><span class="p">):</span>
    <span class="c1"># Behaviour goes here</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-Qysr" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-0-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Define an host function called host_fn1</span>
<span class="n">FLAMEGPU_HOST_FUNCTION</span><span class="p">(</span><span class="n">host_fn1</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Behaviour goes here</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
<span class="p">...</span> <span class="c1">// Rest of code</span>
</pre></div>
</div>
</div></div>
</section>
<section id="adding-host-functions-to-a-model">
<h2>Adding Host Functions to a Model<a class="headerlink" href="#adding-host-functions-to-a-model" title="Permalink to this headline">¶</a></h2>
<p>There are several ways that host functions can be added to a model; init, exit, step and layer.</p>
<p>They can be added as init functions, which execute once at the start when <code class="docutils literal notranslate"><span class="pre">CUDASimulation::simulate()</span></code> is called.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-1-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-1-Qysr" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-1-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button></div><div aria-labelledby="tab-1-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" id="panel-1-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define a new model</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">pyflamegpu</span><span class="o">.</span><span class="n">ModelDescription</span><span class="p">(</span><span class="s2">&quot;Test Model&quot;</span><span class="p">);</span>
<span class="o">...</span> <span class="c1"># Rest of model definition</span>
<span class="c1"># Add the init function host_fn1 to Test Model</span>
<span class="n">model</span><span class="o">.</span><span class="n">addInitFunctionCallback</span><span class="p">(</span><span class="n">host_fn1</span><span class="p">()</span><span class="o">.</span><span class="n">__disown__</span><span class="p">());</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-Qysr" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-1-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Define a new model</span>
<span class="n">ModelDescription</span> <span class="nf">model</span><span class="p">(</span><span class="s">&quot;Test Model&quot;</span><span class="p">);</span>
<span class="p">...</span> <span class="c1">// Rest of model definition</span>
<span class="c1">// Add the init function host_fn1 to Test Model</span>
<span class="n">model</span><span class="p">.</span><span class="n">addInitFunction</span><span class="p">(</span><span class="n">host_fn1</span><span class="p">);</span>
</pre></div>
</div>
</div></div>
<p>They can be added as exit functions, which execute once after all steps have completed when <code class="docutils literal notranslate"><span class="pre">CUDASimulation::simulate()</span></code> is called.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-2-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-2-Qysr" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-2-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button></div><div aria-labelledby="tab-2-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" id="panel-2-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define a new model</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">pyflamegpu</span><span class="o">.</span><span class="n">ModelDescription</span><span class="p">(</span><span class="s2">&quot;Test Model&quot;</span><span class="p">);</span>
<span class="o">...</span> <span class="c1"># Rest of model definition</span>
<span class="c1"># Add the exit function host_fn1 to Test Model</span>
<span class="n">model</span><span class="o">.</span><span class="n">addExitFunctionCallback</span><span class="p">(</span><span class="n">host_fn1</span><span class="p">()</span><span class="o">.</span><span class="n">__disown__</span><span class="p">());</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-2-Qysr" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-2-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Define a new model</span>
<span class="n">ModelDescription</span> <span class="nf">model</span><span class="p">(</span><span class="s">&quot;Test Model&quot;</span><span class="p">);</span>
<span class="p">...</span> <span class="c1">// Rest of model definition</span>
<span class="c1">// Add the exit function host_fn1 to Test Model</span>
<span class="n">model</span><span class="p">.</span><span class="n">addExitFunction</span><span class="p">(</span><span class="n">host_fn1</span><span class="p">);</span>
</pre></div>
</div>
</div></div>
<p>They can be added as step functions, which execute each model step after all layers have executed.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-3-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-3-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-3-Qysr" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-3-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button></div><div aria-labelledby="tab-3-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" id="panel-3-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define a new model</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">pyflamegpu</span><span class="o">.</span><span class="n">ModelDescription</span><span class="p">(</span><span class="s2">&quot;Test Model&quot;</span><span class="p">);</span>
<span class="o">...</span> <span class="c1"># Rest of model definition</span>
<span class="c1"># Add the step function host_fn1 to Test Model</span>
<span class="n">model</span><span class="o">.</span><span class="n">addStepFunctionCallback</span><span class="p">(</span><span class="n">host_fn1</span><span class="p">()</span><span class="o">.</span><span class="n">__disown__</span><span class="p">());</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-3-Qysr" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-3-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Define a new model</span>
<span class="n">ModelDescription</span> <span class="nf">model</span><span class="p">(</span><span class="s">&quot;Test Model&quot;</span><span class="p">);</span>
<span class="p">...</span> <span class="c1">// Rest of model definition</span>
<span class="c1">// Add the step function host_fn1 to Test Model</span>
<span class="n">model</span><span class="p">.</span><span class="n">addStepFunction</span><span class="p">(</span><span class="n">host_fn1</span><span class="p">);</span>
</pre></div>
</div>
</div></div>
<p>They can also be added to individual layers, so that they can execute between agent functions each model step.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-4-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-4-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-4-Qysr" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-4-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button></div><div aria-labelledby="tab-4-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" id="panel-4-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define a new model</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">pyflamegpu</span><span class="o">.</span><span class="n">ModelDescription</span><span class="p">(</span><span class="s2">&quot;Test Model&quot;</span><span class="p">);</span>
<span class="o">...</span> <span class="c1"># Rest of model definition</span>
<span class="c1"># Define a new layer</span>
<span class="n">layer1</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">newLayer</span><span class="p">();</span>
<span class="c1"># Add the host function host_fn1 to the layer</span>
<span class="n">layer1</span><span class="o">.</span><span class="n">addHostFunctionCallback</span><span class="p">(</span><span class="n">host_fn1</span><span class="p">()</span><span class="o">.</span><span class="n">__disown__</span><span class="p">());</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-4-Qysr" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-4-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Define a new model</span>
<span class="n">ModelDescription</span> <span class="nf">model</span><span class="p">(</span><span class="s">&quot;Test Model&quot;</span><span class="p">);</span>
<span class="p">...</span> <span class="c1">// Rest of model definition</span>
<span class="c1">// Define a new layer</span>
<span class="n">Layer</span> <span class="n">Description</span> <span class="o">&amp;</span><span class="n">layer1</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="n">newLayer</span><span class="p">();</span>
<span class="c1">// Add the host function host_fn1 to the layer</span>
<span class="n">layer1</span><span class="p">.</span><span class="n">addHostFunction</span><span class="p">(</span><span class="n">host_fn1</span><span class="p">);</span>
</pre></div>
</div>
</div></div>
</section>
<section id="writing-host-functions">
<h2>Writing Host Functions<a class="headerlink" href="#writing-host-functions" title="Permalink to this headline">¶</a></h2>
<p>Host functions have access to the <code class="docutils literal notranslate"><span class="pre">HostAPI</span></code>. This has similarities to the <code class="docutils literal notranslate"><span class="pre">DeviceAPI</span></code> available within agent functions, however different functionality is available.</p>
<p><strong>Agent Tools</strong></p>
<p>Host agent operations are performed on a single agent state, the state can be omitted if agents exist within the default state.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-5-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-5-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-5-Qysr" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-5-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button></div><div aria-labelledby="tab-5-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" id="panel-5-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">read_env_hostfn</span><span class="p">(</span><span class="n">pyflamegpu</span><span class="o">.</span><span class="n">HostFunctionCallback</span><span class="p">):</span>
  <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">FLAMEGPU</span><span class="p">):</span>
    <span class="c1"># Retrieve the host agent tools for agent sheep in the default state</span>
    <span class="n">sheep</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">.</span><span class="n">agent</span><span class="p">(</span><span class="s2">&quot;sheep&quot;</span><span class="p">);</span>
    <span class="c1"># Retrieve the host agent tools for agent wolf in the hungry state</span>
    <span class="n">hungry_wolf</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">.</span><span class="n">agent</span><span class="p">(</span><span class="s2">&quot;wolf&quot;</span><span class="p">,</span> <span class="s2">&quot;hungry&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-5-Qysr" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-5-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Define an host function called read_env_hostfn</span>
<span class="n">FLAMEGPU_HOST_FUNCTION</span><span class="p">(</span><span class="n">read_env_hostfn</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Retrieve the host agent tools for agent sheep in the default state</span>
    <span class="n">HostAgentAPI</span> <span class="n">sheep</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">agent</span><span class="p">(</span><span class="s">&quot;sheep&quot;</span><span class="p">);</span>
    <span class="c1">// Retrieve the host agent tools for agent wolf in the hungry state</span>
    <span class="n">HostAgentAPI</span> <span class="n">hungry_wolf</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">agent</span><span class="p">(</span><span class="s">&quot;wolf&quot;</span><span class="p">,</span> <span class="s">&quot;hungry&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<p>Various reduction operators are provided, to allow specific agent variables to be reduced across the population.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 33%" />
<col style="width: 58%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Arguments</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sum</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">variable</span></code></p></td>
<td><p>Returns the sum of the specified agent variable.</p></td>
</tr>
</tbody>
</table>
<p><code class="docutils literal notranslate"><span class="pre">min</span></code>             <code class="docutils literal notranslate"><span class="pre">variable</span></code>                                                       Returns the minimum value of the specifieda agent variable.
=================== ================================================================== ===================================================================================================================
<code class="docutils literal notranslate"><span class="pre">max</span></code>             <code class="docutils literal notranslate"><span class="pre">variable</span></code>                                                       Returns the maximum value of the specified agent variable.
=================== ================================================================== ===================================================================================================================
<code class="docutils literal notranslate"><span class="pre">count</span></code>           <code class="docutils literal notranslate"><span class="pre">variable</span></code>, <code class="docutils literal notranslate"><span class="pre">value</span></code>                                            Returns the number of agents with the specified value of the specified agent variable.
=================== ================================================================== ===================================================================================================================
<code class="docutils literal notranslate"><span class="pre">histogramEven</span></code>   <code class="docutils literal notranslate"><span class="pre">variable</span></code>, <code class="docutils literal notranslate"><span class="pre">histogramBins</span></code>, <code class="docutils literal notranslate"><span class="pre">lowerBound</span></code>, <code class="docutils literal notranslate"><span class="pre">upperBound</span></code>    Returns a histogram of the specified agent variable, with evenly spaced bins in the range [lowerBounds, upperBound)
=================== ================================================================== ===================================================================================================================</p>
<p>As with most variable operations, these require the variable type to be specified as a template argument (appended to the method name in Python). The C++ interface optionally the output type for <code class="docutils literal notranslate"><span class="pre">sum</span></code> and <code class="docutils literal notranslate"><span class="pre">histogramEven</span></code> to be specified too.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-6-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-6-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-6-Qysr" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-6-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button></div><div aria-labelledby="tab-6-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" id="panel-6-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define an host function called reduce_hostfn</span>
<span class="k">class</span> <span class="nc">reduce_hostfn</span><span class="p">(</span><span class="n">pyflamegpu</span><span class="o">.</span><span class="n">HostFunctionCallback</span><span class="p">):</span>
  <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">FLAMEGPU</span><span class="p">):</span>
    <span class="c1"># Retrieve the host agent tools for agent sheep in the default state</span>
    <span class="n">sheep</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">.</span><span class="n">agent</span><span class="p">(</span><span class="s2">&quot;sheep&quot;</span><span class="p">);</span>
    <span class="c1"># Reduce for the min, max, sum of the sheep agent&#39;s health variable</span>
    <span class="n">min_health</span> <span class="o">=</span> <span class="n">sheep</span><span class="o">.</span><span class="n">minFloat</span><span class="p">(</span><span class="s2">&quot;health&quot;</span><span class="p">);</span>
    <span class="n">max_health</span> <span class="o">=</span> <span class="n">sheep</span><span class="o">.</span><span class="n">maxFloat</span><span class="p">(</span><span class="s2">&quot;health&quot;</span><span class="p">);</span>
    <span class="n">sum_health</span> <span class="o">=</span> <span class="n">sheep</span><span class="o">.</span><span class="n">sumFloat</span><span class="p">(</span><span class="s2">&quot;health&quot;</span><span class="p">);</span>
    <span class="c1"># Count the number of sheep with a health variable equal to 0</span>
    <span class="n">empty_health</span> <span class="o">=</span> <span class="n">sheep</span><span class="o">.</span><span class="n">countFloat</span><span class="p">(</span><span class="s2">&quot;health&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="c1"># Create a histogram of sheep health</span>
    <span class="n">health_hist</span> <span class="o">=</span> <span class="n">sheep</span><span class="o">.</span><span class="n">histogramEven</span><span class="p">(</span><span class="s2">&quot;health&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">100.001</span><span class="p">);</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-6-Qysr" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-6-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Define an host function called reduce_hostfn</span>
<span class="n">FLAMEGPU_HOST_FUNCTION</span><span class="p">(</span><span class="n">reduce_hostfn</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Retrieve the host agent tools for agent sheep in the default state</span>
    <span class="n">HostAgentAPI</span> <span class="n">sheep</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">agent</span><span class="p">(</span><span class="s">&quot;sheep&quot;</span><span class="p">);</span>
    <span class="c1">// Reduce for the min, max of the sheep agent&#39;s health variable</span>
    <span class="kt">float</span> <span class="n">min_health</span> <span class="o">=</span> <span class="n">sheep</span><span class="p">.</span><span class="n">min</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;health&quot;</span><span class="p">);</span>
    <span class="kt">float</span> <span class="n">max_health</span> <span class="o">=</span> <span class="n">sheep</span><span class="p">.</span><span class="n">max</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;health&quot;</span><span class="p">);</span>
    <span class="c1">// Reduce for the sum of the sheep agent&#39;s health variable with the output type double</span>
    <span class="kt">double</span> <span class="n">sum_health</span> <span class="o">=</span> <span class="n">sheep</span><span class="p">.</span><span class="n">sum</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span> <span class="kt">double</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;health&quot;</span><span class="p">);</span>
    <span class="c1">// Count the number of sheep with a health variable equal to 0</span>
    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">empty_health</span> <span class="o">=</span> <span class="n">sheep</span><span class="p">.</span><span class="n">count</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;health&quot;</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">);</span>
    <span class="c1">// Create a histogram of sheep health</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="n">health_hist</span> <span class="o">=</span> <span class="n">sheep</span><span class="p">.</span><span class="n">histogramEven</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;health&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">100.001f</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<p>The C++ API also has access to custom reduction and transform-reduction operations:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-7-Qysr" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-7-Qysr" name="Qysr" role="tab" tabindex="0">C++</button></div><div aria-labelledby="tab-7-Qysr" class="sphinx-tabs-panel code-tab group-tab" id="panel-7-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Define a bespoke reduction operator sum</span>
<span class="n">FLAMEGPU_CUSTOM_REDUCTION</span><span class="p">(</span><span class="n">sum</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// Define a bespoke reduction operator</span>
<span class="n">FLAMEGPU_CUSTOM_TRANSFORM</span><span class="p">(</span><span class="n">is_even</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">?</span> <span class="nl">a</span> <span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Define an host function called customreduce_hostfn</span>
<span class="n">FLAMEGPU_HOST_FUNCTION</span><span class="p">(</span><span class="n">customreduce_hostfn</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Retrieve the host agent tools for agent sheep in the default state</span>
    <span class="n">HostAgentAPI</span> <span class="n">sheep</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">agent</span><span class="p">(</span><span class="s">&quot;sheep&quot;</span><span class="p">);</span>
    <span class="c1">// Reduce for the sum of the sheep agent&#39;s health variable, the input value is 0</span>
    <span class="kt">double</span> <span class="n">sum_health</span> <span class="o">=</span> <span class="n">sheep</span><span class="p">.</span><span class="n">reduce</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;health&quot;</span><span class="p">,</span> <span class="n">sum</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">);</span>
    <span class="c1">// Reduce for the sum of the sheep agent&#39;s health variable&#39;s that are even, the input value is 0</span>
    <span class="kt">double</span> <span class="n">sum_even_health</span> <span class="o">=</span> <span class="n">sheep</span><span class="p">.</span><span class="n">transformReduce</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span> <span class="kt">double</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;health&quot;</span><span class="p">,</span> <span class="n">is_even</span><span class="p">,</span> <span class="n">sum</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<p>Agent populations can also be sorted according to a variable, the C++ API can additionally sort according to two variables. FLAMEGPU2 may automatically sort agent populations that are outputting spatial messages, as this can significantly improve performance when reading messages.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-8-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-8-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-8-Qysr" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-8-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button></div><div aria-labelledby="tab-8-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" id="panel-8-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define an host function called reduce_hostfn</span>
<span class="k">class</span> <span class="nc">reduce_hostfn</span><span class="p">(</span><span class="n">pyflamegpu</span><span class="o">.</span><span class="n">HostFunctionCallback</span><span class="p">):</span>
  <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">FLAMEGPU</span><span class="p">):</span>
    <span class="c1"># Retrieve the host agent tools for agent sheep in the default state</span>
    <span class="n">sheep</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">.</span><span class="n">agent</span><span class="p">(</span><span class="s2">&quot;sheep&quot;</span><span class="p">);</span>
    <span class="c1"># Sort the sheep population according to their health variable</span>
    <span class="n">sheep</span><span class="o">.</span><span class="n">sortFloat</span><span class="p">(</span><span class="s2">&quot;health&quot;</span><span class="p">,</span> <span class="n">flamegpu</span><span class="o">.</span><span class="n">ASC</span><span class="p">);</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-8-Qysr" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-8-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Define an host function called reduce_hostfn</span>
<span class="n">FLAMEGPU_HOST_FUNCTION</span><span class="p">(</span><span class="n">reduce_hostfn</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Retrieve the host agent tools for agent sheep in the default state</span>
    <span class="n">HostAgentAPI</span> <span class="n">sheep</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">agent</span><span class="p">(</span><span class="s">&quot;sheep&quot;</span><span class="p">);</span>
    <span class="c1">// Sort the sheep population according to their health variable</span>
    <span class="n">sheep</span><span class="p">.</span><span class="n">sort</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;health&quot;</span><span class="p">,</span> <span class="n">HostAgentAPI</span><span class="o">::</span><span class="n">ASC</span><span class="p">);</span>
    <span class="c1">// Sort the sheep population according to their awake variables, those with equal awake variables are sub-sorted according by health</span>
    <span class="n">sheep</span><span class="p">.</span><span class="n">sort</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;awake&quot;</span><span class="p">,</span> <span class="n">flamegpu</span><span class="p">.</span><span class="n">DESC</span><span class="p">,</span> <span class="s">&quot;health&quot;</span><span class="p">,</span> <span class="n">flamegpu</span><span class="p">.</span><span class="n">ASC</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<p>It’s also possible to create new agents with the <code class="docutils literal notranslate"><span class="pre">HostAgentAPI</span></code>, this is covered in <a class="reference external" href="../6-agent-birth-death/2-agent-birth-host.html">Section 6.2.</a>. These agents are not created until after the layer has completed execution, so they will not affect reductions or sorts carried out in the same host function. This is the prefered method of host agent birth as it performs a single host-device memory copy.</p>
<p>For raw access to agent data, <code class="docutils literal notranslate"><span class="pre">DeviceAgentVector</span></code> can be used. This has an interface similar to <code class="docutils literal notranslate"><span class="pre">AgentVector</span></code>, however automatically synchronises data movement between host and device. This should only be used in limited circumstances as copying memory between host and device has high latency.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-9-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-9-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-9-Qysr" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-9-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button></div><div aria-labelledby="tab-9-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" id="panel-9-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define an host function called deviceagentvector_hostfn</span>
<span class="k">class</span> <span class="nc">deviceagentvector_hostfn</span><span class="p">(</span><span class="n">pyflamegpu</span><span class="o">.</span><span class="n">HostFunctionCallback</span><span class="p">):</span>
  <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">FLAMEGPU</span><span class="p">):</span>
    <span class="c1"># Retrieve the host agent tools for agent sheep in the default state</span>
    <span class="n">sheep</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">.</span><span class="n">agent</span><span class="p">(</span><span class="s2">&quot;sheep&quot;</span><span class="p">);</span>
    <span class="c1"># Get DeviceAgentVector to the sheep population</span>
    <span class="n">sheep_vector</span> <span class="o">=</span> <span class="n">sheep</span><span class="o">.</span><span class="n">getPopulationData</span><span class="p">();</span>
    <span class="c1"># Set all sheep&#39;s health back to 100</span>
    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">sheep_vector</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">setVariableFloat</span><span class="p">(</span><span class="s2">&quot;health&quot;</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">);</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-9-Qysr" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-9-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Define an host function called deviceagentvector_hostfn</span>
<span class="n">FLAMEGPU_HOST_FUNCTION</span><span class="p">(</span><span class="n">deviceagentvector_hostfn</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Retrieve the host agent tools for agent sheep in the default state</span>
    <span class="n">HostAgentAPI</span> <span class="n">sheep</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">agent</span><span class="p">(</span><span class="s">&quot;sheep&quot;</span><span class="p">);</span>
    <span class="c1">// Get DeviceAgentVector to the sheep population</span>
    <span class="n">DeviceAgentVector</span> <span class="n">sheep_vector</span> <span class="o">=</span> <span class="n">sheep</span><span class="p">.</span><span class="n">getPopulationData</span><span class="p">();</span>
    <span class="c1">// Set all sheep&#39;s health back to 100</span>
    <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="nl">s</span> <span class="p">:</span> <span class="n">sheep_vector</span><span class="p">)</span>
        <span class="n">s</span><span class="p">.</span><span class="n">setVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;health&quot;</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">);</span>
</pre></div>
</div>
</div></div>
<p><strong>Environment Tools</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">HostAPI</span></code> access to environment properties goes further than the <code class="docutils literal notranslate"><span class="pre">DeviceAPI</span></code>, allowing environment properties to be updated too. Only environment properties marked const, during model definition cannot be updated.</p>
<p>Reading environment properties:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-10-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-10-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-10-Qysr" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-10-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button></div><div aria-labelledby="tab-10-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" id="panel-10-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define an host function called read_env_hostfn</span>
<span class="k">class</span> <span class="nc">read_env_hostfn</span><span class="p">(</span><span class="n">pyflamegpu</span><span class="o">.</span><span class="n">HostFunctionCallback</span><span class="p">):</span>
  <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">FLAMEGPU</span><span class="p">):</span>
    <span class="c1"># Retrieve the environment property foo of type float</span>
    <span class="n">foo</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">getPropertyFloat</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">);</span>
    <span class="c1"># Retrieve the environment property bar of type int array[3]</span>
    <span class="n">bar</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">getPropertyArrayInt</span><span class="p">(</span><span class="s2">&quot;bar&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-10-Qysr" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-10-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Define an host function called read_env_hostfn</span>
<span class="n">FLAMEGPU_HOST_FUNCTION</span><span class="p">(</span><span class="n">read_env_hostfn</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Retrieve the environment property foo of type float</span>
    <span class="k">const</span> <span class="kt">float</span> <span class="n">foo</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">environment</span><span class="p">.</span><span class="n">getProperty</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">);</span>
    <span class="c1">// Retrieve the environment property bar of type int array[3]</span>
    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span> <span class="mi">3</span><span class="o">&gt;</span> <span class="n">bar</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">environment</span><span class="p">.</span><span class="n">getProperty</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="mi">3</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;bar&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<p>Updating environment properties:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-11-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-11-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-11-Qysr" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-11-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button></div><div aria-labelledby="tab-11-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" id="panel-11-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define an host function called write_env_hostfn</span>
<span class="k">class</span> <span class="nc">write_env_hostfn</span><span class="p">(</span><span class="n">pyflamegpu</span><span class="o">.</span><span class="n">HostFunctionCallback</span><span class="p">):</span>
  <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">FLAMEGPU</span><span class="p">):</span>
    <span class="c1"># Update the environment property foo of type float</span>
    <span class="n">FLAMEGPU</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">setPropertyFloat</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">);</span>
    <span class="c1"># Update the environment property bar of type int array[3]</span>
    <span class="n">FLAMEGPU</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">setPropertyArrayInt</span><span class="p">(</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]);</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-11-Qysr" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-11-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Define an host function called write_env_hostfn</span>
<span class="n">FLAMEGPU_HOST_FUNCTION</span><span class="p">(</span><span class="n">write_env_hostfn</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Update the environment property foo of type float</span>
    <span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">environment</span><span class="p">.</span><span class="n">setProperty</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="mf">12.0f</span><span class="p">);</span>
    <span class="c1">// Update the environment property bar of type int array[3]</span>
    <span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">environment</span><span class="p">.</span><span class="n">setProperty</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="mi">3</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;bar&quot;</span><span class="p">,</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">});</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<p><strong>Random Generation</strong></p>
<p>Usage of the <code class="docutils literal notranslate"><span class="pre">HostAPI</span></code> random methods matches that of the <code class="docutils literal notranslate"><span class="pre">DeviceAPI</span></code>.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 13%" />
<col style="width: 14%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Arguments</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">uniform</span></code></p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Returns a uniformly distributed floating point number in the inclusive-exclusive range [0, 1).</p></td>
</tr>
</tbody>
</table>
<p><code class="docutils literal notranslate"><span class="pre">uniform</span></code>         <code class="docutils literal notranslate"><span class="pre">min</span></code>, <code class="docutils literal notranslate"><span class="pre">max</span></code>     Returns a uniformly distributed integer in the inclusive range [min, max].
=================== ==================== =======================================================================================================
<code class="docutils literal notranslate"><span class="pre">normal</span></code>          -                    Returns a normally distributed floating point number with mean 0.0 and standard deviation 1.0.
=================== ==================== =======================================================================================================
<code class="docutils literal notranslate"><span class="pre">logNormal</span></code>       <code class="docutils literal notranslate"><span class="pre">mean</span></code>, <code class="docutils literal notranslate"><span class="pre">stddev</span></code> Returns a log-normally distributed floating point number with the specified mean and standard deviation
=================== ==================== =======================================================================================================</p>
<p>When calling any of these methods the type must be specified. Most methods only support floating point types (e.g. <code class="docutils literal notranslate"><span class="pre">float</span></code>, <code class="docutils literal notranslate"><span class="pre">double</span></code>), with the exception of tha parameterised <cite>uniform`</cite> method which is restricted to integer types:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-12-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-12-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-12-Qysr" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-12-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button></div><div aria-labelledby="tab-12-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" id="panel-12-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define an host function called random_hostfn</span>
<span class="k">class</span> <span class="nc">random_hostfn</span><span class="p">(</span><span class="n">pyflamegpu</span><span class="o">.</span><span class="n">HostFunctionCallback</span><span class="p">):</span>
  <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">FLAMEGPU</span><span class="p">):</span>
    <span class="c1"># Generate a uniform random float [0, 1)</span>
    <span class="n">uniform_float</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniformFloat</span><span class="p">();</span>
    <span class="c1"># Generate a uniform random integer [1, 10]</span>
    <span class="n">uniform_int</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniformInt</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-12-Qysr" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-12-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Define an host function called random_hostfn</span>
<span class="n">FLAMEGPU_HOST_FUNCTION</span><span class="p">(</span><span class="n">random_hostfn</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Generate a uniform random float [0, 1)</span>
    <span class="k">const</span> <span class="kt">float</span> <span class="n">uniform_float</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">random</span><span class="p">.</span><span class="n">uniform</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">();</span>
    <span class="c1">// Generate a uniform random integer [1, 10]</span>
    <span class="k">const</span> <span class="kt">int</span> <span class="n">uniform_int</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">random</span><span class="p">.</span><span class="n">uniform</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<p>Additionally the <code class="docutils literal notranslate"><span class="pre">HostAPI</span></code> random object has the ability to retrieve and update the seed used for random generation during the current model execution. However, for most users this will likely be unnecessary as the random seed can be configured before simulations are executed.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-13-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-13-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-13-Qysr" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-13-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button></div><div aria-labelledby="tab-13-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" id="panel-13-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define an host function called random_hostfn2</span>
<span class="k">class</span> <span class="nc">random_hostfn2</span><span class="p">(</span><span class="n">pyflamegpu</span><span class="o">.</span><span class="n">HostFunctionCallback</span><span class="p">):</span>
  <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">FLAMEGPU</span><span class="p">):</span>
    <span class="c1"># Retrieve the current random seed</span>
    <span class="n">old_seed</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">getSeed</span><span class="p">();</span>
    <span class="c1"># Change the random seed to 12</span>
    <span class="n">FLAMEGPU</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">setSeed</span><span class="p">(</span><span class="mi">12</span><span class="p">);</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-13-Qysr" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-13-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Define an host function called random_hostfn2</span>
<span class="n">FLAMEGPU_HOST_FUNCTION</span><span class="p">(</span><span class="n">random_hostfn2</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Retrieve the current random seed</span>
    <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">old_seed</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">random</span><span class="p">.</span><span class="n">getSeed</span><span class="p">();</span>
    <span class="c1">// Change the random seed to 12</span>
    <span class="n">FLAMEGPU</span><span class="p">.</span><span class="n">random</span><span class="o">-&gt;</span><span class="n">setSeed</span><span class="p">(</span><span class="mi">12</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
<p><strong>Misc</strong></p>
<p>These other methods are also available within <code class="docutils literal notranslate"><span class="pre">HostAPI</span></code> for use within host functions:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 25%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>Return</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">getStepCounter()</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span></code></p></td>
<td><p>Returns the current step index, the first step has index 0.</p></td>
</tr>
</tbody>
</table>
</section>
</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../4-initial-conditions/index.html" class="btn btn-neutral float-right" title="Initial Conditions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="5-conditional-behaviours.html" class="btn btn-neutral float-left" title="Conditional Behaviours" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2019, University of Sheffield.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-XXXXXXX-1', 'auto');
    
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>